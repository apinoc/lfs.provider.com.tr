<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Firefox-1.5.0.9
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.69.1" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="blfs" class="6.2.0">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Beyond Linux From Scratch - Version 6.2.0
        </h4>
        <h3>
          Chapter&nbsp;36.&nbsp;Graphical Web Browsers
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="graphweb.html" title=
          "Graphical Web Browsers">Prev</a>
          <p>
            Graphical Web Browsers
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="galeon.html" title="Galeon-2.0.1">Next</a>
          <p>
            Galeon-2.0.1
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="graphweb.html" title=
          "Chapter&nbsp;36.&nbsp;Graphical Web Browsers">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.2.0">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <a id="firefox" name="firefox"></a>
        <h1 class="sect1">
          Firefox-1.5.0.9
        </h1>
      </div>
      <div class="package" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Introduction to Firefox
          </h2>
        </div>
        <p>
          <span class="application">Firefox</span> is a stand-alone browser
          based on the <span class="application">Mozilla</span> codebase.
        </p>
        <h3>
          <a id="id2871251" name="id2871251"></a>Package Information
        </h3>
        <div class="itemizedlist">
          <ul compact="compact">
            <li>
              <p>
                Download (HTTP): <a href=
                "http://releases.mozilla.org/pub/mozilla.org/firefox/releases/1.5.0.9/source/firefox-1.5.0.9-source.tar.bz2">
                <span class=
                "url">http://releases.mozilla.org/pub/mozilla.org/firefox/releases/1.5.0.9/source/firefox-1.5.0.9-source.tar.bz2</span></a>
              </p>
            </li>
            <li>
              <p>
                Download (FTP): <a href=
                "ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/1.5.0.9/source/firefox-1.5.0.9-source.tar.bz2">
                <span class=
                "url">ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/1.5.0.9/source/firefox-1.5.0.9-source.tar.bz2</span></a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: 383d3f3a17ba819ead94c2edc6739773
              </p>
            </li>
            <li>
              <p>
                Download size: 34.0 MB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 548 MB
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 13.9 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          <a id="id2536343" name="id2536343"></a>Additional Downloads
        </h3>
        <div class="itemizedlist">
          <ul compact="compact">
            <li>
              <p>
                Required patch (if using system-installed versions of
                <span class="application">NSS</span> and <span class=
                "application">NSPR</span>): <a href=
                "http://www.linuxfromscratch.org/patches/blfs/6.2.0/firefox-1.5.0.9-system_nss-1.patch">
                <span class=
                "url">http://www.linuxfromscratch.org/patches/blfs/6.2.0/firefox-1.5.0.9-system_nss-1.patch</span></a>
              </p>
            </li>
            <li>
              <p>
                Required patch (if enabling <span class=
                "application">Pango</span> font rendering): <a href=
                "http://www.linuxfromscratch.org/patches/blfs/6.2.0/firefox-1.5.0.9-pangoxft-1.patch">
                <span class=
                "url">http://www.linuxfromscratch.org/patches/blfs/6.2.0/firefox-1.5.0.9-pangoxft-1.patch</span></a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          <a id="id2719586" name="id2719586"></a>Firefox Dependencies
        </h3>
        <h4>
          <a id="id2871717" name="id2871717"></a>Required
        </h4>
        <p class="required">
          <a href="../x/gtk2.html">GTK+-2.8.20</a>, <a href=
          "../general/libidl.html">libIDL-0.8.7</a>, and <a href=
          "../general/zip.html">Zip-2.32</a>
        </p>
        <p>
          Note: <span class="application">libjpeg</span> should have been
          installed before <span class="application">GTK+</span> and should
          exist on your system. If for some reason you haven't installed
          <span class="application">libjpeg</span>, you should remove the
          <tt class="option">--with-system-jpeg</tt> option from the
          <tt class="filename">.mozconfig</tt> file created below.
        </p>
        <h4>
          <a id="id2548536" name="id2548536"></a>Recommended (if you will be
          installing any other package that utilizes NSS/NSPR, such as
          <span class="application">Thunderbird</span>, <span class=
          "application">Mozilla</span>, <span class=
          "application">Evolution</span>, or <span class=
          "application">OpenOffice</span>)
        </h4>
        <p class="recommended">
          <a href="../postlfs/nss.html">NSS-3.11.3</a>
        </p>
        <h4>
          <a id="id2686601" name="id2686601"></a>Optional
        </h4>
        <p class="optional">
          <a href="../general/unzip.html">UnZip-5.52</a> and <a href=
          "../gnome/libgnomeui.html">libgnomeui-2.14.1</a> (to build the
          gnomevfs extension)
        </p>
        <p class="usernotes">
          User Notes: <a href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/firefox"><span class=
          "url">http://wiki.linuxfromscratch.org/blfs/wiki/firefox</span></a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Installation of Firefox
          </h2>
        </div>
        <p>
          The configuration of <span class="application">Firefox</span> is
          accomplished by creating a <tt class="filename">.mozconfig</tt>
          file containing the desired configuration options. A default
          <tt class="filename">.mozconfig</tt> is created below. To see the
          entire list of available configuration options (and an abbreviated
          description of each one), issue <span><strong class=
          "command">./configure --help</strong></span>. If you are going to
          use system-installed versions of the <span class=
          "application">NSS</span> and <span class="application">NSPR</span>
          libraries, ensure you uncomment the two lines near the bottom of
          the file. If you are going to build the <span class=
          "application">OpenOffice</span> package and you want to use this
          <span class="application">Firefox</span> installation as the
          default <span class="application">Mozilla</span> source, ensure you
          uncomment the <tt class="option">--enable-ldap</tt> option in the
          file created below. You may also wish to review the entire file and
          uncomment any other desired options. If you would prefer to
          download the file instead of creating it by typing or
          cut-and-pasting, you can find it at <a href=
          "http://anduin.linuxfromscratch.org/files/BLFS/firefox-1.5.0.9-mozconfig">
          <span class=
          "url">http://anduin.linuxfromscratch.org/files/BLFS/firefox-1.5.0.9-mozconfig</span></a>
          (the file must be installed in the root of the source tree
          <tt class="filename">mozilla</tt> directory, and named <tt class=
          "filename">.mozconfig</tt>). Create the file by issuing the
          following command:
        </p>
        <pre class="userinput"><kbd class=
        "command">cat &gt; .mozconfig &lt;&lt; "EOF"
<tt class=
"literal"># This file contains the options used in the Firefox build. You may
# need to specify additional options for your specific build needs.
# Use the information provided by running './configure --help' to
# help you determine if you need to add any additional options.
# Some additional options can be added by uncommenting the examples
# in this file or adding options by inserting a line containing
# 'ac_add_options --some-option-you-need'.


# Use the default settings specified in the source tree
. $topsrcdir/browser/config/mozconfig

# Create an object directory and specify to build the package in that
# directory. If desired, modify the location of the object directory
# to a directory inside the source tree by removing '../' from the
# line below.
mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/../firefox-build

# Specify the installation prefix. If you would prefer Firefox
# installed in a different prefix, modify the line below to fit
# your needs. You'll also need to modify some of the instructions in
# the BLFS book to point to your desired prefix.
ac_add_options --prefix=/usr

# These options are used so that the Firefox binaries are linked to
# the system-installed copies of the specified libraries instead of
# the source tree code which may not be the most recent versions.
ac_add_options --with-system-zlib
ac_add_options --with-system-png
ac_add_options --with-system-jpeg
ac_add_options --enable-system-cairo

# This option causes the installed binaries to have the official
# Firefox name embedded in them. Due to license restrictions, you
# may not distribute binaries created using this option.
ac_add_options --enable-official-branding

# This option specifies to include support for rendering the HTML
# &lt;canvas&gt;&lt;/canvas&gt; tag in the Firefox browser.
ac_add_options --enable-canvas

# This option is used to enable support for rendering SVG files in the
# Firefox browser. Comment out the line to disable the option.
ac_add_options --enable-svg

# This option is used so that the debugging symbols are removed from
# the installed binaries during the installation process. Comment out
# this option if you may have a need to retain the debugging symbols
# in the installed binaries. Note that this can substantially
# increase the size of the installed binaries.
ac_add_options --enable-strip

# This option is added so that test libraries and programs are not
# built. These would only be required for debugging purposes.
ac_add_options --disable-tests

# This option is added so that the Mozilla Installer program is not
# built or installed. The program is not required for a BLFS
# installation of Firefox.
ac_add_options --disable-installer

# This option is used to disable the a11y support in the Firefox
# binaries. Comment out this option if you require a11y support.
ac_add_options --disable-accessibility

# This option is used to enable source tree included LDAP support in
# the Firefox binaries.
###################################################################
#
# NOTE: You must uncomment this option if there is any chance of
# compiling the OpenOffice package from source code using this copy
# of Firefox for your Mozilla support.
#
###################################################################
#ac_add_options --enable-ldap

# Uncomment this option if you desire support for dual-monitor
# display of Firefox using the X-Window Xinerama libraries.
#ac_add_options --enable-xinerama

# These two options enable support for building Firefox with
# system-installed versions of the Network Security Services (NSS)
# and Netscape Portable Runtime (NSPR) libraries. Uncomment both
# lines to enable support for system-installed NSS/NSPR.
#ac_add_options --with-system-nss
#ac_add_options --with-system-nspr

# Complex scripts such as Thai can only be rendered in Firefox with the
# help of Pango. This option significantly slows rendering, so only use
# it if necessary.
#ac_add_options --enable-pango

# This option identifies the default binary directory of the Firefox
# installation and is used to locate Firefox's installed files. This
# option is not required for end-user browsing, and is only used for
# development purposes.
#ac_add_options --with-default-mozilla-five-home=/usr/lib/firefox-1.5.0.9</tt>

EOF</kbd></pre>
        <p>
          If you wish to use <span class="application">Pango</span> for font
          rendering and have uncommented the appropriate option in <tt class=
          "filename">.mozconfig</tt>, apply the following patch:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../firefox-1.5.0.9-pangoxft-1.patch</kbd></pre>
        <p>
          If you have system-installed Network Security Services (NSS) and
          Netscape Portable Runtime (NSPR) libraries and you uncommented the
          appropriate lines in the <tt class="filename">.mozconfig</tt> file
          to utilize them, apply the following patch:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../firefox-1.5.0.9-system_nss-1.patch</kbd></pre>
        <p>
          Compile <span class="application">Firefox</span> by issuing the
          following commands:
        </p>
        <pre class="userinput"><kbd class=
        "command">sed -i "s/^    enum$/&amp; xptinfo_enum_1/" \
    xpcom/reflect/xptinfo/public/xptinfo.h &amp;&amp;
make -f client.mk build</kbd></pre>
        <p>
          This package does not come with a test suite.
        </p>
        <p>
          Now, as the <tt class="systemitem">root</tt> user, install the
          package:
        </p>
        <pre class="root"><kbd class=
        "command">make -f client.mk install &amp;&amp;

install -v -m755 -d /usr/lib/firefox-1.5.0.9/chrome/icons/default &amp;&amp;
ln -v -s ../../../icons/default.xpm \
    /usr/lib/firefox-1.5.0.9/chrome/icons/default &amp;&amp;

chown -v -R root:root \
    /usr/lib/firefox-1.5.0.9/extensions/inspector@mozilla.org/*</kbd></pre>
        <p>
          If you enabled LDAP support in the <span class=
          "application">Firefox</span> build, install some additional
          interface headers as the <tt class="systemitem">root</tt> user:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -m644 ../firefox-build/dist/public/ldap-private/* \
    /usr/include/firefox-1.5.0.9/ldap</kbd></pre>
        <p>
          If you built <span class="application">Firefox</span> utilizing
          system-installed NSS and NSPR libraries, the <tt class=
          "filename">firefox-ns*.pc</tt> <span class=
          "application">pkgconfig</span> files are broken as they point to
          the wrong directories where the actual libraries and interface
          headers are located. Issue the following commands as the <tt class=
          "systemitem">root</tt> user to replace the broken files with
          symbolic links to known good files:
        </p>
        <pre class="root"><kbd class=
        "command">ln -v -sf nss.pc /usr/lib/pkgconfig/firefox-nss.pc &amp;&amp;
ln -v -sf nspr.pc /usr/lib/pkgconfig/firefox-nspr.pc</kbd></pre>
        <p>
          If you did <span class="strong"><strong>NOT</strong></span> build
          <span class="application">Firefox</span> utilizing system-installed
          NSS and NSPR libraries, issue the following commands as the
          <tt class="systemitem">root</tt> user to install the NSS interface
          headers:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -m755 -d /usr/include/firefox-1.5.0.9/nss &amp;&amp;
cp -v -Lf ../firefox-build/dist/{private,public}/nss/*.h \
    /usr/include/firefox-1.5.0.9/nss</kbd></pre>
        <div class="note">
          <div class="admonhead">
            <img alt="[Note]" src="../images/note.png" />
            <h3 class="admontitle">
              Note
            </h3>
          </div>
          <div class="admonbody">
            <p>
              You should run <span><strong class=
              "command">/usr/bin/firefox</strong></span> once as the
              <tt class="systemitem">root</tt> user (or any user with write
              privileges) to create some necessary additional files in the
              <tt class="filename">/usr</tt> hierarchy.
            </p>
          </div>
        </div>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Command Explanations
          </h2>
        </div>
        <p>
          <span><strong class="command">sed -i "s/^ enum$/&amp;
          xptinfo_enum_1/" ...</strong></span>: This command is used to fix
          an anonymous enum in an external/public interface header file.
        </p>
        <p>
          <span><strong class="command">make -f client.mk
          ...</strong></span>: Mozilla products are packaged to allow the use
          of a configuration file which can be used to pass the configuration
          settings to the <span><strong class=
          "command">configure</strong></span> command. <span><strong class=
          "command">make</strong></span> uses the <tt class=
          "filename">client.mk</tt> file to get initial configuration and
          setup parameters, then depending on the target parameter
          (<em class="parameter"><tt>build</tt></em> or <em class=
          "parameter"><tt>install</tt></em>), either runs the
          <span><strong class="command">configure</strong></span> script and
          compiles the package or installs the package.
        </p>
        <p>
          <span><strong class="command">install -v -m755 -d
          .../chrome/icons/default</strong></span> and <span><strong class=
          "command">ln -v -s ../../../icons/default.xpm ...</strong></span>:
          These two commands are used to create a symlink in the required
          directory so that the proper icon is displayed in the taskbar and
          when <span class="application">Firefox</span> windows are
          minimized.
        </p>
        <p>
          <span><strong class="command">chown -v -R root:root
          ...</strong></span>: This command changes the ownership of some
          installed files to more appropriate user:group names.
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Configuring Firefox
          </h2>
        </div>
        <p>
          No specific configuration is required as long as the
          <span><strong class="command">firefox</strong></span> script is in
          the user's path. If <span class="application">Firefox</span> is
          installed in a non-standard location, then make a symlink to the
          <span><strong class="command">firefox</strong></span> script in the
          <tt class="filename">/usr/bin</tt> directory.
        </p>
        <p>
          If your Window or Desktop Manager does not allow you to configure a
          default mail client, you can add a configuration parameter to
          <span class="application">Firefox</span> so that an email client
          will start when you click on a <tt class="systemitem">mailto:</tt>
          URL. There are two parameters you need to check. The procedure to
          check or modify any of the configuration parameters is quite simple
          and the instructions here can be used to view or modify any of the
          parameters.
        </p>
        <p>
          First, open the configuration dialog by entering <tt class=
          "systemitem">about:config</tt> in the address bar. This will
          display a list of the configuration preferences and information
          related to each one. You can use the &ldquo;<span class=
          "quote">Filter:</span>&rdquo; bar to enter search criteria and
          narrow down the listed items. Changing a preference can be done
          using two methods. One, if the preference has a boolean value
          (True/False), simply double-click on the preference to toggle the
          value and two, for other preferences simply right-click on the
          desired line, choose &ldquo;<span class=
          "quote">Modify</span>&rdquo; from the menu and change the value.
          Creating new preference items is accomplished in the same way,
          except choose &ldquo;<span class="quote">New</span>&rdquo; from the
          menu and provide the desired data into the fields when prompted.
        </p>
        <p>
          The two configuration preference items you need to check so that
          <span class="application">Firefox</span> uses a specified default
          mail client are the <em class=
          "parameter"><tt>network.protocol-handler.external.mailto</tt></em>
          which should be set to <tt class="option">True</tt> and the
          <em class=
          "parameter"><tt>network.protocol-handler.app.mailto</tt></em> which
          should be set to the path of the desired mail client, e.g.,
          <tt class="option">/usr/bin/thunderbird</tt>.
        </p>
        <div class="tip">
          <div class="admonhead">
            <img alt="[Tip]" src="../images/tip.png" />
            <h3 class="admontitle">
              Tip
            </h3>
          </div>
          <div class="admonbody">
            <p>
              There is a multitude of configuration parameters you can tweak
              to customize <span class="application">Firefox</span>. A very
              extensive and up-to-date list of these parameters can be found
              at <a href=
              "http://preferential.mozdev.org/preferences.html"><span class=
              "url">http://preferential.mozdev.org/preferences.html</span></a>.
            </p>
          </div>
        </div>
        <p>
          Many applications look for <span><strong class=
          "command">netscape</strong></span> when they need to open a
          browser. You may wish to make the following symlink for convenience
          (as the <tt class="systemitem">root</tt> user).
        </p>
        <pre class="root"><kbd class=
        "command">ln -v -sf firefox /usr/bin/netscape</kbd></pre>
        <p>
          For installing various <span class="application">Firefox</span>
          plugins, refer to <a href=
          "http://plugindoc.mozdev.org/linux.html"><span class="url">Mozdev's
          PluginDoc Project</span></a>. If you have the <a href=
          "../general/jdk.html">JDK-1.5.0_10</a> already installed, create
          the following link as the <tt class="systemitem">root</tt> user to
          utilize the installed <span class="application">Java</span> plugin:
        </p>
        <pre class="root"><kbd class=
        "command">ln -v -s $JAVA_HOME/jre/plugin/i386/ns7/libjavaplugin_oji.so \
    /usr/lib/firefox-1.5.0.9/plugins</kbd></pre>
        <p>
          Some packages install Mozilla plugins into the default system-wide
          directory <tt class="filename">/usr/lib/mozilla/plugins</tt>. If
          desired, create symbolic links in the <span class=
          "application">Firefox</span> plugin directory <tt class=
          "filename">/usr/lib/firefox-1.5.0.9/plugins</tt> to the files in
          the default plugin directory (you should link to the actual files
          and not other links). Alternatively, you can move or copy the files
          in the default plugin directory to the <span class=
          "application">Firefox</span> plugin directory. An example of
          creating a symbolic link is shown below. Create the links as the
          <tt class="systemitem">root</tt> user:
        </p>
        <pre class="root"><kbd class=
        "command">ln -v -s ../../mozilla/plugins/<em class=
        "replaceable"><tt>&lt;plugin.so&gt;</tt></em> \
    /usr/lib/firefox-1.5.0.9/plugins</kbd></pre>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Contents
          </h2>
        </div>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong><span class="segtitle">Installed
              Programs:</span></strong> <span class="seg">firefox and
              firefox-config</span>
            </div>
            <div class="seg">
              <strong><span class="segtitle">Installed
              Libraries:</span></strong> <span class="seg">Numerous
              libraries, browser components, plugins, extensions, and helper
              modules installed in <tt class=
              "filename">/usr/lib/firefox-1.5.0.9</tt></span>
            </div>
            <div class="seg">
              <strong><span class="segtitle">Installed
              Directories:</span></strong> <span class=
              "seg">/usr/include/firefox-1.5.0.9, /usr/lib/firefox-1.5.0.9,
              and /usr/share/idl/firefox-1.5.0.9</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            <a id="id2757043" name="id2757043"></a>Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <a id="firefox-prog" name="firefox-prog"></a><span class=
                  "term"><span><strong class=
                  "command">firefox</strong></span></span>
                </td>
                <td>
                  <p>
                    is a shell script that sets up the environment and calls
                    the <tt class="filename">firefox-bin</tt> binary.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <a id="firefox-config" name=
                  "firefox-config"></a><span class=
                  "term"><span><strong class="command">firefox-config</strong></span></span>
                </td>
                <td>
                  <p>
                    determines the compile and linker flags that should be
                    used to compile and link programs that use <span class=
                    "application">Firefox</span> libraries and browser
                    components.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2007-01-21 04:05:16 -0600
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="graphweb.html" title=
          "Graphical Web Browsers">Prev</a>
          <p>
            Graphical Web Browsers
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="galeon.html" title="Galeon-2.0.1">Next</a>
          <p>
            Galeon-2.0.1
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="graphweb.html" title=
          "Chapter&nbsp;36.&nbsp;Graphical Web Browsers">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.2.0">Home</a>.
        </li>
      </ul>
    </div>
  </body>
</html>
