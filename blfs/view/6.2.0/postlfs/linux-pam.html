<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Linux-PAM-0.99.4.0
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.69.1" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="blfs" class="6.2.0">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Beyond Linux From Scratch - Version 6.2.0
        </h4>
        <h3>
          Chapter&nbsp;4.&nbsp;Security
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="cracklib.html" title=
          "CrackLib-2.8.9">Prev</a>
          <p>
            CrackLib-2.8.9
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="shadow.html" title="Shadow-4.0.15">Next</a>
          <p>
            Shadow-4.0.15
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapter&nbsp;4.&nbsp;Security">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.2.0">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <a id="linux-pam" name="linux-pam"></a>
        <h1 class="sect1">
          Linux-PAM-0.99.4.0
        </h1>
      </div>
      <div class="package" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Introduction to Linux-PAM
          </h2>
        </div>
        <p>
          The <span class="application">Linux-PAM</span> package contains
          Pluggable Authentication Modules. This is useful to enable the
          local system administrator to choose how applications authenticate
          users.
        </p>
        <h3>
          <a id="id2656549" name="id2656549"></a>Package Information
        </h3>
        <div class="itemizedlist">
          <ul compact="compact">
            <li>
              <p>
                Download (HTTP): <a href=
                "http://www.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-0.99.4.0.tar.bz2">
                <span class=
                "url">http://www.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-0.99.4.0.tar.bz2</span></a>
              </p>
            </li>
            <li>
              <p>
                Download (FTP): <a href=
                "ftp://ftp.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-0.99.4.0.tar.bz2">
                <span class=
                "url">ftp://ftp.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-0.99.4.0.tar.bz2</span></a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: 267ea71253615342261f9fc486d06647
              </p>
            </li>
            <li>
              <p>
                Download size: 783 KB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 19.8 MB
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 0.5 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          <a id="id2642521" name="id2642521"></a>Additional Downloads
        </h3>
        <div class="itemizedlist">
          <ul compact="compact">
            <li>
              <p>
                Optional documentation: <a href=
                "http://www.kernel.org/pub/linux/libs/pam/pre/doc/Linux-PAM-0.99.4.0-docs.tar.bz2">
                <span class=
                "url">http://www.kernel.org/pub/linux/libs/pam/pre/doc/Linux-PAM-0.99.4.0-docs.tar.bz2</span></a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          <a id="id2584266" name="id2584266"></a>Linux-PAM Dependencies
        </h3>
        <h4>
          <a id="id2604064" name="id2604064"></a>Optional
        </h4>
        <p class="optional">
          <a href="cracklib.html">CrackLib-2.8.9</a>, <a href=
          "http://www.prelude-ids.org/"><span class="url">Prelude</span></a>,
          and <a href=
          "http://sourceforge.net/projects/sgmltools-lite/"><span class=
          "url">sgmltools-lite</span></a>
        </p>
        <p class="usernotes">
          User Notes: <a href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/linux-pam"><span class=
          "url">http://wiki.linuxfromscratch.org/blfs/wiki/linux-pam</span></a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Installation of Linux-PAM
          </h2>
        </div>
        <p>
          If you downloaded the documentation, unpack the tarball into the
          <tt class="filename">doc</tt> directory of the source tree:
        </p>
        <pre class="userinput"><kbd class=
        "command">tar -xf ../Linux-PAM-0.99.4.0-docs.tar.bz2 -C doc</kbd></pre>
        <p>
          Install <span class="application">Linux-PAM</span> by running the
          following commands:
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure --libdir=/usr/lib \
            --sbindir=/lib/security \
            --enable-securedir=/lib/security \
            --enable-docdir=/usr/share/doc/Linux-PAM-0.99.4.0 \
            --enable-read-both-confs &amp;&amp;
make</kbd></pre>
        <p>
          The test suite will not provide meaningful results until the
          package has been installed and configured. If, after installing the
          package and creating a minimum configuration as shown below in the
          'other' example, you wish to run the tests, issue
          <span><strong class="command">make check</strong></span>.
        </p>
        <div class="tip">
          <div class="admonhead">
            <img alt="[Tip]" src="../images/tip.png" />
            <h3 class="admontitle">
              Tip
            </h3>
          </div>
          <div class="admonbody">
            <p>
              Don't delete the <span class="application">Linux-PAM</span>
              source tree until after you reinstall the <span class=
              "application">Shadow</span> package. The reinstallation of the
              Shadow package includes much more stringent security for the
              PAM configuration, and you can run the <span class=
              "application">Linux-PAM</span> test suite after completing the
              <span class="application">Shadow</span> instructions to test
              the new setup. All the tests should pass.
            </p>
          </div>
        </div>
        <p>
          Now, as the <tt class="systemitem">root</tt> user:
        </p>
        <pre class="root"><kbd class="command">make install &amp;&amp;
chmod -v 4755 /lib/security/unix_chkpwd &amp;&amp;
mv -v /lib/security/pam_tally /sbin &amp;&amp;
mv -v /usr/lib/libpam*.so.0* /lib &amp;&amp;
ln -v -sf ../../lib/libpam.so.0.81.3 /usr/lib/libpam.so &amp;&amp;
ln -v -sf ../../lib/libpamc.so.0.81.0 /usr/lib/libpamc.so &amp;&amp;
ln -v -sf ../../lib/libpam_misc.so.0.81.2 /usr/lib/libpam_misc.so</kbd></pre>
        <p>
          If you downloaded the documentation, install it using the following
          command:
        </p>
        <pre class="root"><kbd class=
        "command">for DOCTYPE in html pdf ps txts
do
    cp -v -R doc/$DOCTYPE /usr/share/doc/Linux-PAM-0.99.4.0
done</kbd></pre>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Command Explanations
          </h2>
        </div>
        <p>
          <em class="parameter"><tt>--libdir=/usr/lib</tt></em>: This
          parameter results in the libraries being installed in <tt class=
          "filename">/usr/lib</tt>.
        </p>
        <p>
          <em class="parameter"><tt>--sbindir=/lib/security</tt></em>: This
          parameter results in two executables, one which is not intended to
          be run from the command line, being installed in the same directory
          as the PAM modules. One of the executables is later moved to the
          <tt class="filename">/sbin</tt> directory.
        </p>
        <p>
          <em class=
          "parameter"><tt>--enable-securedir=/lib/security</tt></em>: This
          parameter results in the PAM modules being installed in <tt class=
          "filename">/lib/security</tt>.
        </p>
        <p>
          <em class="parameter"><tt>--enable-docdir=...</tt></em>: This
          parameter results in the documentation being installed in a
          versioned directory name.
        </p>
        <p>
          <em class="parameter"><tt>--enable-read-both-confs</tt></em>: This
          parameter allows the local administrator to choose which
          configuration file setup to use.
        </p>
        <p>
          <span><strong class="command">chmod -v 4755
          /lib/security/unix_chkpwd</strong></span>: The <span><strong class=
          "command">unix_chkpwd</strong></span> password-helper program must
          be setuid so that non-<tt class="systemitem">root</tt> processes
          can access the shadow-password file.
        </p>
        <p>
          <span><strong class="command">mv -v /lib/security/pam_tally
          /sbin</strong></span>: The <span><strong class=
          "command">pam_tally</strong></span> program is designed to be run
          by the system administrator, possibly in single-user mode, so it is
          moved to the appropriate directory.
        </p>
        <p>
          <span><strong class="command">mv -v /usr/lib/libpam*.so.0*
          /lib</strong></span>: This command moves the dynamic libraries to
          <tt class="filename">/lib</tt> as they may be required in single
          user mode.
        </p>
        <p>
          <span><strong class="command">ln -v -sf ...</strong></span>: These
          commands recreate the <tt class="filename">.so</tt> symlinks as the
          libraries they pointed to were moved to <tt class=
          "filename">/lib</tt>.
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Configuring Linux-PAM
          </h2>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="pam-config" name="pam-config"></a>Config Files
                </h4>
              </div>
            </div>
          </div>
          <p>
            <tt class="filename">/etc/security/*</tt> and <tt class=
            "filename">/etc/pam.d/*</tt> or <tt class=
            "filename">/etc/pam.conf</tt>
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2699468" name="id2699468"></a>Configuration
                  Information
                </h4>
              </div>
            </div>
          </div>
          <p>
            Configuration information is placed in <tt class=
            "filename">/etc/pam.d/</tt> or <tt class=
            "filename">/etc/pam.conf</tt> depending on system administrator
            preference. Below are example files of each type:
          </p>
          <pre class="screen"><tt class="literal"># Begin /etc/pam.d/other

auth            required        pam_unix.so     nullok
account         required        pam_unix.so
session         required        pam_unix.so
password        required        pam_unix.so     nullok

# End /etc/pam.d/other

# Begin /etc/pam.conf

other           auth            required        pam_unix.so     nullok
other           account         required        pam_unix.so
other           session         required        pam_unix.so
other           password        required        pam_unix.so     nullok

# End /etc/pam.conf</tt></pre>
          <p>
            The <span class="application">PAM</span> man page
            (<span><strong class="command">man pam</strong></span>) provides
            a good starting point for descriptions of fields and allowable
            entries. The <a href=
            "http://www.kernel.org/pub/linux/libs/pam/Linux-PAM-html/pam.html">
            <span class="url">Linux-PAM System Administrators'
            Guide</span></a> is recommended for additional information.
          </p>
          <p>
            Refer to <a href=
            "http://www.kernel.org/pub/linux/libs/pam/modules.html"><span class="url">
            http://www.kernel.org/pub/linux/libs/pam/modules.html</span></a>
            for a list of various modules available.
          </p>
          <div class="important">
            <div class="admonhead">
              <img alt="[Important]" src="../images/important.png" />
              <h3 class="admontitle">
                Important
              </h3>
            </div>
            <div class="admonbody">
              <p>
                You should now reinstall the <a href=
                "shadow.html">Shadow-4.0.15</a> package.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Contents
          </h2>
        </div>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong><span class="segtitle">Installed
              Program:</span></strong> <span class="seg">pam_tally</span>
            </div>
            <div class="seg">
              <strong><span class="segtitle">Installed
              Libraries:</span></strong> <span class="seg">libpam.{so,a},
              libpamc.{so,a}, and libpam_misc.{so,a}</span>
            </div>
            <div class="seg">
              <strong><span class="segtitle">Installed
              Directories:</span></strong> <span class="seg">/etc/pam.d,
              /etc/security, /lib/security and /usr/include/security</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            <a id="id2669218" name="id2669218"></a>Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <a id="pam_tally" name="pam_tally"></a><span class=
                  "term"><span><strong class=
                  "command">pam_tally</strong></span></span>
                </td>
                <td>
                  <p>
                    is used to view or manipulate the <tt class=
                    "filename">faillog</tt> file.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <a id="libpam" name="libpam"></a><span class=
                  "term"><tt class="filename">libpam.{so,a}</tt></span>
                </td>
                <td>
                  <p>
                    provides the interfaces between applications and the PAM
                    modules.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2007-01-18 13:38:19 -0600
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="cracklib.html" title=
          "CrackLib-2.8.9">Prev</a>
          <p>
            CrackLib-2.8.9
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="shadow.html" title="Shadow-4.0.15">Next</a>
          <p>
            Shadow-4.0.15
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapter&nbsp;4.&nbsp;Security">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.2.0">Home</a>.
        </li>
      </ul>
    </div>
  </body>
</html>
