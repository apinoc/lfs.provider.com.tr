<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Chapter&nbsp;23.&nbsp;Databases
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.69.1" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="blfs" class="6.2.0">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Beyond Linux From Scratch - Version 6.2.0
        </h4>
        <h3>
          Part&nbsp;VI.&nbsp;Servers
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="sendmail.html" title=
          "Sendmail-8.13.6">Prev</a>
          <p>
            Sendmail-8.13.6
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="mysql.html" title="MySQL-5.0.21">Next</a>
          <p>
            MySQL-5.0.21
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="server.html" title=
          "Part&nbsp;VI.&nbsp;Servers">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.2.0">Home</a>
        </li>
      </ul>
    </div>
    <div class="chapter" lang="en" xml:lang="en">
      <div class="titlepage">
        <a id="server-databases" name="server-databases"></a>
        <h1 class="chapter">
          Databases
        </h1>
      </div>
      <p>
        This chapter includes databases that range from single-user
        read/write to industrial database servers with transaction support.
        Generally, you will be sent here to satisfy dependencies to other
        applications although building a SQL server on a base LFS system is
        entirely possible.
      </p>
      <div class="sect1" lang="en" xml:lang="en">
        <div class="titlepage">
          <a id="db" name="db"></a>
          <h1 class="sect1">
            Berkeley DB-4.4.20
          </h1>
        </div>
        <div class="package" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Introduction to Berkeley DB
            </h2>
          </div>
          <p>
            The <span class="application">Berkeley DB</span> package contains
            programs and utilities used by many other applications for
            database related functions. This package is also installed during
            LFS and may already exist on your system. It is listed here in
            BLFS as well because you may need to reinstall it if you need the
            additional language bindings or the RPC server. If you do
            reinstall <span class="application">Berkeley DB</span>, ensure
            you use the 4.4.20 version used in the LFS book.
          </p>
          <h3>
            <a id="id2566922" name="id2566922"></a>Package Information
          </h3>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  Download (HTTP): <a href=
                  "http://downloads.sleepycat.com/db-4.4.20.tar.gz"><span class="url">
                  http://downloads.sleepycat.com/db-4.4.20.tar.gz</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download (FTP): <a href=
                  "ftp://ftp.sleepycat.com/releases/db-4.4.20.tar.gz"><span class="url">
                  ftp://ftp.sleepycat.com/releases/db-4.4.20.tar.gz</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download MD5 sum: d84dff288a19186b136b0daf7067ade3
                </p>
              </li>
              <li>
                <p>
                  Download size: 7.9 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated disk space required: 66.7 MB (additional 100 MB
                  to run parallel standard test suite)
                </p>
              </li>
              <li>
                <p>
                  Estimated build time: 1.4 SBU (builds all bindings, add an
                  additional 145 SBU to run parallel standard test suite)
                </p>
              </li>
            </ul>
          </div>
          <h3>
            <a id="id2583764" name="id2583764"></a>Additional Downloads
          </h3>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  Required patch: <a href=
                  "http://www.sleepycat.com/update/4.4.20/patch.4.4.20.1"><span class="url">
                  http://www.sleepycat.com/update/4.4.20/patch.4.4.20.1</span></a>
                </p>
              </li>
              <li>
                <p>
                  Required patch: <a href=
                  "http://www.sleepycat.com/update/4.4.20/patch.4.4.20.2"><span class="url">
                  http://www.sleepycat.com/update/4.4.20/patch.4.4.20.2</span></a>
                </p>
              </li>
              <li>
                <p>
                  Required patch: <a href=
                  "http://www.sleepycat.com/update/4.4.20/patch.4.4.20.3"><span class="url">
                  http://www.sleepycat.com/update/4.4.20/patch.4.4.20.3</span></a>
                </p>
              </li>
              <li>
                <p>
                  Required patch: <a href=
                  "http://www.sleepycat.com/update/4.4.20/patch.4.4.20.4"><span class="url">
                  http://www.sleepycat.com/update/4.4.20/patch.4.4.20.4</span></a>
                </p>
              </li>
            </ul>
          </div>
          <h3>
            <a id="id2581991" name="id2581991"></a>Berkeley DB Dependencies
          </h3>
          <h4>
            <a id="id2507907" name="id2507907"></a>Optional
          </h4>
          <p class="optional">
            <a href="../general/tcl.html">Tcl-8.4.13</a>, <a href=
            "../general/jdk.html">JDK-1.5.0_10</a>, and <a href=
            "http://www.gnu.org/software/sharutils/"><span class=
            "url">sharutils</span></a> (for the <span><strong class=
            "command">uudecode</strong></span> command)
          </p>
          <p class="usernotes">
            User Notes: <a href=
            "http://wiki.linuxfromscratch.org/blfs/wiki/db"><span class=
            "url">http://wiki.linuxfromscratch.org/blfs/wiki/db</span></a>
          </p>
        </div>
        <div class="testing" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Testing Berkeley DB
            </h2>
          </div>
          <p>
            You may want to skip ahead to <a href=
            "databases.html#bdb-installation" title=
            "Installation of Berkeley DB">the section called
            &ldquo;Installation of Berkeley DB&rdquo;</a>. The test suite can
            take up to 150 SBUs and has a few bugs causing a report of
            &ldquo;<span class="quote">Regression tests failed</span>&rdquo;.
            However, running the test suite is a very exhaustive test of your
            hardware, perhaps pushing your machine harder (especially disk
            I/O) than it will ever see during production use. Note that you
            must have <span class="application">Tcl</span> installed to run
            the test suite.
          </p>
          <p>
            Build for the <span class="application">Berkeley DB</span> test
            by running the following commands:
          </p>
          <pre class="userinput"><kbd class=
          "command">for PATCH in ../patch.4.4.20.{1..4}; do patch -Np0 -i $PATCH; done &amp;&amp;
cd build_unix &amp;&amp;
../dist/configure --prefix=/usr \
                  --enable-test \
                  --enable-tcl  \
                  --with-tcl=/usr/lib &amp;&amp;
make</kbd></pre>
          <p>
            To test the results, start <span><strong class=
            "command">tclsh</strong></span>:
          </p>
          <pre class="userinput"><kbd class="command">tclsh</kbd></pre>
          <p>
            From the <span><strong class="command">tclsh</strong></span>
            prompt (<tt class="prompt">%&nbsp;</tt>), run:
          </p>
          <pre class="userinput"><kbd class="command">source ../test/test.tcl
run_parallel 5 run_std
exit</kbd></pre>
          <p>
            Clean up the source tree with the following command:
          </p>
          <pre class="userinput"><kbd class=
          "command">make realclean &amp;&amp;
cd ..</kbd></pre>
        </div>
        <div class="installation" lang="en" xml:lang="en">
          <div class="titlepage">
            <a id="bdb-installation" name="bdb-installation"></a>
            <h2 class="sect2">
              Installation of Berkeley DB
            </h2>
          </div>
          <p>
            The installation commands below are identical to the commands
            used in the LFS book. If you installed <span class=
            "application">Berkeley DB</span> in LFS, and you don't add
            anything to the <span><strong class=
            "command">configure</strong></span> script, you'll end up with
            exactly what you already have. The additional parameters you can
            use are listed in the Command Explanations section below. Install
            <span class="application">Berkeley DB</span> by running the
            following commands:
          </p>
          <pre class="userinput"><kbd class=
          "command">for PATCH in ../patch.4.4.20.{1..4}; do patch -Np0 -i $PATCH; done &amp;&amp;
cd build_unix &amp;&amp;
../dist/configure --prefix=/usr \
                  --enable-compat185 \
                  --enable-cxx &amp;&amp;
make</kbd></pre>
          <p>
            Now, as the <tt class="systemitem">root</tt> user:
          </p>
          <pre class="root"><kbd class=
          "command">make docdir=/usr/share/doc/db-4.4.20 install &amp;&amp;
chown -v root:root /usr/bin/db_* /usr/lib/libdb* /usr/include/db* &amp;&amp;
chown -v root:root /usr/bin/berkeley_db_svc &amp;&amp;
chown -v -R root:root /usr/share/doc/db-4.4.20</kbd></pre>
        </div>
        <div class="commands" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Command Explanations
            </h2>
          </div>
          <p>
            <span><strong class="command">cd build_unix &amp;&amp;
            ../dist/configure --prefix=/usr...</strong></span>: This replaces
            the normal <span><strong class=
            "command">./configure</strong></span> command, as <span class=
            "application">Berkeley DB</span> comes with various build
            directories for different platforms.
          </p>
          <p>
            <em class="parameter"><tt>--enable-compat185</tt></em>: This
            switch enables building the DB-1.85 compatibility API.
          </p>
          <p>
            <em class="parameter"><tt>--enable-cxx</tt></em>: This switch
            enables building C++ API libraries.
          </p>
          <p>
            <em class="parameter"><tt>--enable-tcl
            --with-tcl=/usr/lib</tt></em>: Enables <span class=
            "application">Tcl</span> support in DB and creates the <tt class=
            "filename">libdb_tcl</tt> libraries.
          </p>
          <p>
            <em class="parameter"><tt>--enable-java</tt></em>: Enables
            <span class="application">Java</span> support in DB and creates
            the <tt class="filename">libdb_java</tt> libraries.
          </p>
          <p>
            <em class="parameter"><tt>--enable-rpc</tt></em>: Enables
            building the <span class="application">Berkeley DB</span> RPC
            server.
          </p>
          <p>
            <span><strong class="command">make
            docdir=/usr/share/doc/db-4.4.20 install</strong></span>: This
            installs the documentation in the correct location instead of
            <tt class="filename">/usr/docs</tt>.
          </p>
          <p>
            <span><strong class="command">chown -v root:root
            /usr/bin/berkeley_db_svc</strong></span>: This command changes
            the ownership of the RPC server program. It is only required if
            you passed <em class="parameter"><tt>--enable-rpc</tt></em> to
            the <span><strong class="command">configure</strong></span>
            script.
          </p>
        </div>
        <div class="content" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Contents
            </h2>
          </div>
          <p>
            Only the program and libraries not installed in LFS are listed
            here, the others can be found at <a href=
            "../../../../lfs/view/6.2/chapter06/db.html#contents-db"><span class="url">
            ../../../../lfs/view/6.2/chapter06/db.html#contents-db</span></a>
            as they were initially installed during the building of LFS.
          </p>
          <div class="segmentedlist">
            <div class="seglistitem">
              <div class="seg">
                <strong><span class="segtitle">Installed
                Program:</span></strong> <span class=
                "seg">berkeley_db_svc</span>
              </div>
              <div class="seg">
                <strong><span class="segtitle">Installed
                Libraries:</span></strong> <span class=
                "seg">libdb_java.{so,a} and libdb_tcl.{so,a}</span>
              </div>
              <div class="seg">
                <strong><span class="segtitle">Installed
                Directory:</span></strong> <span class=
                "seg">/usr/share/doc/db-4.4.20</span>
              </div>
            </div>
          </div>
          <div class="variablelist">
            <h3>
              <a id="id2625897" name="id2625897"></a>Short Descriptions
            </h3>
            <table border="0">
              <col align="left" valign="top" />
              <tbody>
                <tr>
                  <td>
                    <a id="berkeley_db_svc" name=
                    "berkeley_db_svc"></a><span class=
                    "term"><span><strong class=
                    "command">berkeley_db_svc</strong></span></span>
                  </td>
                  <td>
                    <p>
                      is the <span class="application">Berkeley DB</span> RPC
                      server.
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <p class="updated">
        Last updated on 2007-01-15 18:08:14 -0600
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="sendmail.html" title=
          "Sendmail-8.13.6">Prev</a>
          <p>
            Sendmail-8.13.6
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="mysql.html" title="MySQL-5.0.21">Next</a>
          <p>
            MySQL-5.0.21
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="server.html" title=
          "Part&nbsp;VI.&nbsp;Servers">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.2.0">Home</a>.
        </li>
      </ul>
    </div>
  </body>
</html>
