<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Chapter&nbsp;42.&nbsp;Printing
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.69.1" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="blfs" class="6.2.0">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Beyond Linux From Scratch - Version 6.2.0
        </h4>
        <h3>
          Part&nbsp;XII.&nbsp;Printing, Scanning and Typesetting
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="pst.html" title=
          "Printing, Scanning and Typesetting">Prev</a>
          <p>
            Printing, Scanning and Typesetting
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="LPRng.html" title="LPRng-3.8.28">Next</a>
          <p>
            LPRng-3.8.28
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="pst.html" title=
          "Part&nbsp;XII.&nbsp;Printing, Scanning and Typesetting">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.2.0">Home</a>
        </li>
      </ul>
    </div>
    <div class="chapter" lang="en" xml:lang="en">
      <div class="titlepage">
        <a id="pst-printing" name="pst-printing"></a>
        <h1 class="chapter">
          Printing
        </h1>
      </div>
      <p>
        This chapter contains spooling printer management systems and
        ghostscript applications to render PostScript for display on
        terminals or paper.
      </p>
      <div class="sect1" lang="en" xml:lang="en">
        <div class="titlepage">
          <a id="cups" name="cups"></a>
          <h1 class="sect1">
            CUPS-1.2.7
          </h1>
        </div>
        <div class="package" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Introduction to CUPS
            </h2>
          </div>
          <p>
            The Common Unix Printing System (CUPS) is a print spooler and
            associated utilities. It is based on the "Internet Printing
            Protocol" and provides printing services to most PostScript and
            raster printers.
          </p>
          <h3>
            <a id="id2980265" name="id2980265"></a>Package Information
          </h3>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  Download (HTTP): <a href=
                  "http://ftp2.easysw.com/pub/cups/1.2.7/cups-1.2.7-source.tar.bz2">
                  <span class=
                  "url">http://ftp2.easysw.com/pub/cups/1.2.7/cups-1.2.7-source.tar.bz2</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download (FTP): <a href=
                  "ftp://ftp3.easysw.com/pub/cups/1.2.7/cups-1.2.7-source.tar.bz2">
                  <span class=
                  "url">ftp://ftp3.easysw.com/pub/cups/1.2.7/cups-1.2.7-source.tar.bz2</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download MD5 sum: bf44783d9b46130bee9f2995e6055470
                </p>
              </li>
              <li>
                <p>
                  Download size: 3.5 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated disk space required: 55 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated build time: 0.6 SBU
                </p>
              </li>
            </ul>
          </div>
          <h3>
            <a id="id2914611" name="id2914611"></a>CUPS Dependencies
          </h3>
          <h4>
            <a id="id2901340" name="id2901340"></a>Recommended
          </h4>
          <p class="recommended">
            <a href="../general/graphlib.html#libjpeg">libjpeg-6b</a>,
            <a href="../general/libpng.html">libpng-1.2.12</a>, and <a href=
            "../general/libtiff.html">LibTIFF-3.8.2</a>
          </p>
          <h4>
            <a id="id2952888" name="id2952888"></a>Optional
          </h4>
          <p class="optional">
            <a href="../general/pkgconfig.html">pkg-config-0.20</a>, <a href=
            "../general/dbus.html">D-BUS-0.62</a>, <a href=
            "../server/openldap.html">OpenLDAP-2.3.27</a>, <a href=
            "../postlfs/security.html#openssl">OpenSSL-0.9.8d</a> or <a href=
            "http://www.gnu.org/software/gnutls/"><span class=
            "url">GnuTLS</span></a> (which needs <a href=
            "ftp://ftp.gnupg.org/gcrypt/alpha/libgpg-error/"><span class=
            "url">libgpg-error</span></a>, <a href=
            "ftp://ftp.gnupg.org/gcrypt/libgcrypt/"><span class=
            "url">libgcrypt</span></a> and <a href=
            "ftp://ftp.gnupg.org/gcrypt/alpha/gnutls/opencdk/"><span class=
            "url">opencdk</span></a>, in that order), <a href=
            "../postlfs/linux-pam.html">Linux-PAM-0.99.4.0</a>, <a href=
            "../general/php.html">PHP-5.1.4</a>, <a href=
            "../general/python.html">Python-2.4.4</a>, <a href=
            "../general/jdk.html">JDK-1.5.0_10</a>, <a href=
            "http://www.openslp.org/"><span class="url">OpenSLP</span></a>,
            <a href=
            "http://packages.debian.org/unstable/source/libpaper"><span class="url">
            libpaper</span></a>, <a href=
            "ftp://oss.sgi.com/projects/xfs/cmd_tars/"><span class=
            "url">libacl</span></a> (requires <a href=
            "ftp://oss.sgi.com/projects/xfs/cmd_tars/"><span class=
            "url">libattr</span></a>), <a href=
            "http://www.easysw.com/htmldoc/"><span class=
            "url">HTMLDOC</span></a>, and <a href=
            "http://valgrind.kde.org/"><span class="url">Valgrind</span></a>
            (optionally used if running the test suites)
          </p>
          <p class="usernotes">
            User Notes: <a href=
            "http://wiki.linuxfromscratch.org/blfs/wiki/cups"><span class=
            "url">http://wiki.linuxfromscratch.org/blfs/wiki/cups</span></a>
          </p>
        </div>
        <div class="installation" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Installation of CUPS
            </h2>
          </div>
          <p>
            Create an <tt class="systemitem">lp</tt> user, as <span class=
            "application">CUPS</span> will create some files owned by this
            user. (The <tt class="systemitem">lp</tt> user is the default
            used by <span class="application">CUPS</span>, but may be changed
            to a different user by passing a parameter to the
            <span><strong class="command">configure</strong></span> script.)
            Use the following command as the <tt class="systemitem">root</tt>
            user:
          </p>
          <pre class="root"><kbd class=
          "command">useradd -c "Print Service User" -d /dev/null -g lp -s /bin/false -u 9 lp</kbd></pre>
          <p>
            Install <span class="application">CUPS</span> by running the
            following commands:
          </p>
          <pre class="userinput"><kbd class="command">./configure &amp;&amp;
make</kbd></pre>
          <p>
            To test the results, issue: <span><strong class="command">make
            check</strong></span>. This will run a basic test suite without
            any load testing. If you wish to run the tests specifying
            non-default parameters, issue: <span><strong class="command">make
            test</strong></span>. Note that the &ldquo;<span class=
            "quote">torture load testing</span>&rdquo; test uses more
            resources than those displayed in the prompt.
          </p>
          <p>
            Now, as the <tt class="systemitem">root</tt> user:
          </p>
          <pre class="root"><kbd class="command">make install</kbd></pre>
          <p>
            The <span class="application">man</span> files are installed in
            compressed (<tt class="filename">.gz</tt>) format. If desired,
            use the following commands to uncompress them:
          </p>
          <pre class="root"><kbd class=
          "command">gunzip -v /usr/share/man/man{\
1/{cancel,cups{-config,test{dsc,ppd}},\
lp{,options,passwd,q,rm,r,stat}}.1,\
5/{{classes,client,cups-snmp,cupsd,printers,subscriptions,mailto}.conf,\
mime.{convs,types}}.5,\
7/{backend,filter}.7,\
8/{accept,cups{d,addsmb,enable,-{deviced,driverd,lpd,polld,}},\
lp{admin,info,move,c}}.8}.gz &amp;&amp;

rm -v /usr/share/man/man8/{reject,cupsdisable}.8.gz &amp;&amp;

ln -v -s accept.8 /usr/share/man/man8/reject.8 &amp;&amp;
ln -v -s cupsenable.8 /usr/share/man/man8/cupsdisable.8</kbd></pre>
        </div>
        <div class="commands" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Command Explanations
            </h2>
          </div>
          <p>
            The basic default behavior of the installation is appropriate for
            LFS systems. <span class="application">CUPS</span> files are
            placed in <tt class="filename">/usr/bin</tt>, <tt class=
            "filename">/usr/sbin</tt>, <tt class="filename">/var</tt> and
            <tt class="filename">/etc/cups</tt>.
          </p>
        </div>
        <div class="configuration" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Configuring CUPS
            </h2>
          </div>
          <p>
            Configuration of <span class="application">CUPS</span> is
            dependent on the type of printer and can be complex. Generally,
            PostScript printers are easier. For detailed instructions on
            configuration and use of <span class="application">CUPS</span>,
            see <a href="http://www.cups.org/documentation.php"><span class=
            "url">http://www.cups.org/documentation.php</span></a>. The
            Software Administrators Manual and Software Users Manual are
            particularly useful.
          </p>
          <p>
            For non-PostScript printers to print with <span class=
            "application">CUPS</span>, you need to install <a href=
            "espgs.html">ESP Ghostscript-8.15.2</a> to convert PostScript to
            raster images and a driver (e.g., from <a href=
            "gimp-print.html">Gimp-Print-4.2.7</a>) to convert the resulting
            raster images to a form that the printer understands. <a href=
            "http://www.linuxprinting.org/foomatic.html"><span class=
            "url">Foomatic</span></a> drivers use Ghostscript to convert
            PostScript to a printable form directly, but this is considered
            to be a hack by <span class="application">CUPS</span> developers.
          </p>
          <div class="sect3" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title">
                    <a id="cups-init" name="cups-init"></a>Boot Script
                  </h4>
                </div>
              </div>
            </div>
            <p>
              During the installation, <span class="application">CUPS</span>
              added startup files in <tt class="filename">/etc/rc.d</tt>.
              These scripts will work in most cases, but will fail if you
              provide printers to <span class="application">Samba</span>
              clients. Additionally, they are not consistent with standard
              LFS style scripts. Replace the installed scripts with the
              scripts and symlinks included in the <a href=
              "../introduction/bootscripts.html">blfs-bootscripts-20060910</a>
              package:
            </p>
            <pre class="root"><kbd class=
            "command">make install-cups</kbd></pre>
          </div>
        </div>
        <div class="content" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Contents
            </h2>
          </div>
          <div class="segmentedlist">
            <div class="seglistitem">
              <div class="seg">
                <strong><span class="segtitle">Installed
                Programs:</span></strong> <span class="seg">accept, cancel,
                cups-config, cupsaddsmb, cupsd, cupstestppd, disable, enable,
                lp, lpadmin, lpc, lpinfo, lpmove, lpoptions, lppasswd, lpq,
                lpr, lprm, lpstat, and reject</span>
              </div>
              <div class="seg">
                <strong><span class="segtitle">Installed
                Libraries:</span></strong> <span class="seg">libcups.{so,a},
                libcupsimage.{so,a}, and various filters and backend
                drivers</span>
              </div>
              <div class="seg">
                <strong><span class="segtitle">Installed
                Directories:</span></strong> <span class="seg">/etc/cups,
                /usr/include/cups, /usr/lib/cups, /usr/share/doc/cups,
                /usr/share/cups, /var/log/cups, and /var/spool/cups</span>
              </div>
            </div>
          </div>
          <div class="variablelist">
            <h3>
              <a id="id2888913" name="id2888913"></a>Short Descriptions
            </h3>
            <table border="0">
              <col align="left" valign="top" />
              <tbody>
                <tr>
                  <td>
                    <a id="accept" name="accept"></a><span class=
                    "term"><span><strong class=
                    "command">accept</strong></span></span>
                  </td>
                  <td>
                    <p>
                      instructs the printing system to accept print jobs to
                      the specified destinations.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="cancel-cups" name="cancel-cups"></a><span class=
                    "term"><span><strong class=
                    "command">cancel</strong></span></span>
                  </td>
                  <td>
                    <p>
                      cancels existing print jobs from the print queues.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="cups-config" name="cups-config"></a><span class=
                    "term"><span><strong class=
                    "command">cups-config</strong></span></span>
                  </td>
                  <td>
                    <p>
                      is a <span class="application">CUPS</span> program
                      configuration utility.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="cupsaddsmb" name="cupsaddsmb"></a><span class=
                    "term"><span><strong class=
                    "command">cupsaddsmb</strong></span></span>
                  </td>
                  <td>
                    <p>
                      exports printers to the <span class=
                      "application">Samba</span> software for use with
                      Windows clients.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="cupsd" name="cupsd"></a><span class=
                    "term"><span><strong class=
                    "command">cupsd</strong></span></span>
                  </td>
                  <td>
                    <p>
                      is the scheduler for the Common Unix Printing System.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="cupstestppd" name="cupstestppd"></a><span class=
                    "term"><span><strong class=
                    "command">cupstestppd</strong></span></span>
                  </td>
                  <td>
                    <p>
                      tests the conformance of PPD files.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="disable" name="disable"></a><span class=
                    "term"><span><strong class=
                    "command">disable</strong></span></span>
                  </td>
                  <td>
                    <p>
                      stops the named printers or classes.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="enable" name="enable"></a><span class=
                    "term"><span><strong class=
                    "command">enable</strong></span></span>
                  </td>
                  <td>
                    <p>
                      starts the named printers or classes.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lp-cups" name="lp-cups"></a><span class=
                    "term"><span><strong class=
                    "command">lp</strong></span></span>
                  </td>
                  <td>
                    <p>
                      submits files for printing or alters a pending job.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lpadmin" name="lpadmin"></a><span class=
                    "term"><span><strong class=
                    "command">lpadmin</strong></span></span>
                  </td>
                  <td>
                    <p>
                      configures printer and class queues provided by
                      <span class="application">CUPS</span>.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lpc-cups" name="lpc-cups"></a><span class=
                    "term"><span><strong class=
                    "command">lpc</strong></span></span>
                  </td>
                  <td>
                    <p>
                      provides limited control over printer and class queues
                      provided by <span class="application">CUPS</span>.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lpinfo" name="lpinfo"></a><span class=
                    "term"><span><strong class=
                    "command">lpinfo</strong></span></span>
                  </td>
                  <td>
                    <p>
                      lists the available devices or drivers known to the
                      <span class="application">CUPS</span> server.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lpmove" name="lpmove"></a><span class=
                    "term"><span><strong class=
                    "command">lpmove</strong></span></span>
                  </td>
                  <td>
                    <p>
                      moves the specified job to a new destination.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lpoptions" name="lpoptions"></a><span class=
                    "term"><span><strong class=
                    "command">lpoptions</strong></span></span>
                  </td>
                  <td>
                    <p>
                      displays or sets printer options and defaults.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lppasswd" name="lppasswd"></a><span class=
                    "term"><span><strong class=
                    "command">lppasswd</strong></span></span>
                  </td>
                  <td>
                    <p>
                      adds, changes or deletes passwords in the <span class=
                      "application">CUPS</span> digest password file
                      <tt class="filename">passwd.md5</tt>.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lpq-cups" name="lpq-cups"></a><span class=
                    "term"><span><strong class=
                    "command">lpq</strong></span></span>
                  </td>
                  <td>
                    <p>
                      shows the current print queue status on the named
                      printer.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lpr-cups" name="lpr-cups"></a><span class=
                    "term"><span><strong class=
                    "command">lpr</strong></span></span>
                  </td>
                  <td>
                    <p>
                      submits files for printing.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lprm-cups" name="lprm-cups"></a><span class=
                    "term"><span><strong class=
                    "command">lprm</strong></span></span>
                  </td>
                  <td>
                    <p>
                      cancels print jobs that have been queued for printing.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="lpstat-cups" name="lpstat-cups"></a><span class=
                    "term"><span><strong class=
                    "command">lpstat</strong></span></span>
                  </td>
                  <td>
                    <p>
                      displays status information about the current classes,
                      jobs, and printers.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="reject" name="reject"></a><span class=
                    "term"><span><strong class=
                    "command">reject</strong></span></span>
                  </td>
                  <td>
                    <p>
                      instructs the printing system to reject print jobs to
                      the specified destinations.
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <p class="updated">
        Last updated on 2007-01-28 11:43:31 -0600
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="pst.html" title=
          "Printing, Scanning and Typesetting">Prev</a>
          <p>
            Printing, Scanning and Typesetting
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="LPRng.html" title="LPRng-3.8.28">Next</a>
          <p>
            LPRng-3.8.28
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="pst.html" title=
          "Part&nbsp;XII.&nbsp;Printing, Scanning and Typesetting">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.2.0">Home</a>.
        </li>
      </ul>
    </div>
  </body>
</html>
