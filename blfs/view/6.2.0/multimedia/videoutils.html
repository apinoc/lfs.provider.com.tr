<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Chapter&nbsp;40.&nbsp;Video Utilities
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.69.1" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="blfs" class="6.2.0">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Beyond Linux From Scratch - Version 6.2.0
        </h4>
        <h3>
          Part&nbsp;XI.&nbsp;Multimedia
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="audacious.html" title=
          "Audacious-1.0.0">Prev</a>
          <p>
            Audacious-1.0.0
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="avifile.html" title=
          "Avifile-0.7.45">Next</a>
          <p>
            Avifile-0.7.45
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="multimedia.html" title=
          "Part&nbsp;XI.&nbsp;Multimedia">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.2.0">Home</a>
        </li>
      </ul>
    </div>
    <div class="chapter" lang="en" xml:lang="en">
      <div class="titlepage">
        <a id="multimedia-videoutils" name="multimedia-videoutils"></a>
        <h1 class="chapter">
          Video Utilities
        </h1>
      </div>
      <p>
        This chapter always seems to be the favorite chapter. It's probably
        because there is a lot of satisfaction in playing your first video
        when you have spent so much time getting to that point. All those
        libraries, all the configurations and your reward is that you finally
        get to watch a movie. Not to worry though, there is always one more
        CODEC to install.
      </p>
      <div class="sect1" lang="en" xml:lang="en">
        <div class="titlepage">
          <a id="ffmpeg" name="ffmpeg"></a>
          <h1 class="sect1">
            FFmpeg-0.4.9-pre1
          </h1>
        </div>
        <div class="package" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Introduction to FFmpeg
            </h2>
          </div>
          <p>
            <span class="application">FFmpeg</span> is a solution to record,
            convert and stream audio and video. It is a very fast video and
            audio converter and it can also acquire from a live audio/video
            source. Designed to be intuitive, the command-line interface
            (<span><strong class="command">ffmpeg</strong></span>) tries to
            figure out all the parameters, when possible. <span class=
            "application">FFmpeg</span> can also convert from any sample rate
            to any other, and resize video on the fly with a high quality
            polyphase filter. <span class="application">FFmpeg</span> can use
            a video4linux compatible video source and any Open Sound System
            audio source.
          </p>
          <h3>
            <a id="id2794504" name="id2794504"></a>Package Information
          </h3>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  Download (HTTP): <a href=
                  "http://downloads.sourceforge.net/ffmpeg/ffmpeg-0.4.9-pre1.tar.gz">
                  <span class=
                  "url">http://downloads.sourceforge.net/ffmpeg/ffmpeg-0.4.9-pre1.tar.gz</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download (FTP): <a href=""></a>
                </p>
              </li>
              <li>
                <p>
                  Download MD5 sum: ea5587e3c66d50b1503b82ac4179c303
                </p>
              </li>
              <li>
                <p>
                  Download size: 1.6 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated disk space required: 62.9 MB (built with all
                  dependencies)
                </p>
              </li>
              <li>
                <p>
                  Estimated build time: 1.0 SBU
                </p>
              </li>
            </ul>
          </div>
          <h3>
            <a id="id2978018" name="id2978018"></a>Additional Downloads
          </h3>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  Required patch: <a href=
                  "http://www.linuxfromscratch.org/patches/blfs/6.2.0/ffmpeg-0.4.9-pre1-gcc4-1.patch">
                  <span class=
                  "url">http://www.linuxfromscratch.org/patches/blfs/6.2.0/ffmpeg-0.4.9-pre1-gcc4-1.patch</span></a>
                </p>
              </li>
              <li>
                <p>
                  Required patch: <a href=
                  "http://www.linuxfromscratch.org/patches/blfs/6.2.0/ffmpeg-0.4.9-pre1-amr_fixes-1.patch">
                  <span class=
                  "url">http://www.linuxfromscratch.org/patches/blfs/6.2.0/ffmpeg-0.4.9-pre1-amr_fixes-1.patch</span></a>
                </p>
              </li>
            </ul>
          </div>
          <h3>
            <a id="id2895230" name="id2895230"></a>FFmpeg Dependencies
          </h3>
          <h4>
            <a id="id2696625" name="id2696625"></a>Optional
          </h4>
          <p class="optional">
            <a href="libvorbis.html">libvorbis-1.1.2</a>, <a href=
            "lame.html">LAME-3.96.1</a>, <a href=
            "../general/imlib2.html">Imlib2-1.2.2</a>, <a href=
            "../x/installing.html">X Window System</a>, <a href=
            "sdl.html">SDL-1.2.11</a>, <a href=
            "../general/freetype2.html">FreeType-2.1.10</a>, <a href=
            "mplayer.html">MPlayer-1.0pre7try2</a> (for the shared
            post-processing library), <a href=
            "http://sourceforge.net/projects/faac"><span class=
            "url">FAAC</span></a>, <a href=
            "http://sourceforge.net/projects/faac"><span class=
            "url">FAAD2</span></a>, <a href=
            "http://www.3gpp.org/ftp/Specs/latest/Rel-5/26_series/26104-540.zip">
            <span class="url">AMR narrowband (floating point)</span></a> or
            <a href=
            "http://www.3gpp.org/ftp/Specs/latest/Rel-5/26_series/26073-530.zip">
            <span class="url">AMR naarrowband (fixed point)</span></a>,
            <a href=
            "http://www.3gpp.org/ftp/Specs/latest/Rel-5/26_series/26204-530.zip">
            <span class="url">AMR wideband</span></a>, and <a href=
            "../pst/typesetting.html#tetex">teTeX-3.0</a> (to build HTML
            documentation)
          </p>
          <p class="usernotes">
            User Notes: <a href=
            "http://wiki.linuxfromscratch.org/blfs/wiki/ffmpeg"><span class=
            "url">http://wiki.linuxfromscratch.org/blfs/wiki/ffmpeg</span></a>
          </p>
        </div>
        <div class="installation" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Installation of FFmpeg
            </h2>
          </div>
          <p>
            Install <span class="application">FFmpeg</span> by running the
            following commands:
          </p>
          <div class="note">
            <div class="admonhead">
              <img alt="[Note]" src="../images/note.png" />
              <h3 class="admontitle">
                Note
              </h3>
            </div>
            <div class="admonbody">
              <p>
                Review the <tt class="filename">doc/optimization.txt</tt>
                file in the source tree for information about optimizing the
                build.
              </p>
            </div>
          </div>
          <pre class="userinput"><kbd class=
          "command">patch -Np1 -i ../ffmpeg-0.4.9-pre1-gcc4-1.patch &amp;&amp;
patch -Np1 -i ../ffmpeg-0.4.9-pre1-amr_fixes-1.patch &amp;&amp;
sed -i "s/static uint64/const uint64/" \
    libavcodec/liba52/resample_mmx.c &amp;&amp;
./configure --prefix=/usr --enable-shared \
    --enable-pthreads --disable-ffplay &amp;&amp;
make</kbd></pre>
          <p>
            If you have <span class="application">teTeX</span> installed, the
            man pages and HTML documentation were built during the
            <span><strong class="command">make</strong></span> process. Skip
            to the <tt class="systemitem">root</tt> user installation steps
            if you don't need other formats of the documentation, or issue
            any or all of the following commands to create the additional
            formats.
          </p>
          <pre class="userinput"><kbd class=
          "command">for DOCFILE in faq ffmpeg-doc ffplay-doc ffserver-doc hooks
do
    texi2pdf -b $DOCFILE.texi
    texi2dvi -b $DOCFILE.texi
    dvips -o $DOCFILE.ps $DOCFILE.dvi
    makeinfo --plaintext --force -o $DOCFILE.txt $DOCFILE.texi
done</kbd></pre>
          <p>
            If you do not have <span class="application">teTeX</span>
            installed, use the following command to build the man pages:
          </p>
          <pre class="userinput"><kbd class=
          "command">make -C doc ff{mpeg,play,server}.1</kbd></pre>
          <p>
            This package does not come with a test suite that works.
          </p>
          <p>
            Now, as the <tt class="systemitem">root</tt> user:
          </p>
          <pre class="root"><kbd class="command">make install</kbd></pre>
          <p>
            If you have <span class="application">teTeX</span> installed on
            your system, install the documentation by issuing the following
            commands as the <tt class="systemitem">root</tt> user (modify the
            command appropriately to reflect the documentation formats you've
            created):
          </p>
          <pre class="root"><kbd class=
          "command">install -v -m755 -d /usr/share/doc/ffmpeg-0.4.9-pre1 &amp;&amp;
install -v -m644 doc/*.{html,dvi,pdf,ps,txt} \
    /usr/share/doc/ffmpeg-0.4.9-pre1</kbd></pre>
        </div>
        <div class="commands" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Command Explanations
            </h2>
          </div>
          <p>
            <span><strong class="command">sed -i -e "s/static uint64/const
            uint64/" libavcodec/liba52/resample_mmx.c</strong></span>: This
            command fixes an issue on machines with MMX capability and use
            <span class="application">GCC</span> &gt;= 3.4.x to compile in
            A52 support using the <tt class="option">--enable-a52</tt>
            parameter passed to the <span><strong class=
            "command">configure</strong></span> script.
          </p>
          <p>
            <em class="parameter"><tt>--enable-shared</tt></em>: This switch
            is needed to build the <tt class="filename">libavcodec</tt> and
            <tt class="filename">libavformat</tt> shared libraries.
          </p>
          <p>
            <em class="parameter"><tt>--enable-pthreads</tt></em>: This
            switch enables the build to link against the Posix threads
            library.
          </p>
          <p>
            <em class="parameter"><tt>--disable-ffplay</tt></em>: Only
            installs the server part. <span><strong class=
            "command">ffplay</strong></span> requires <span class=
            "application">X</span> for building. Remove this option if
            <span class="application">X</span> is installed.
          </p>
          <p>
            <tt class="option">--enable-<em class=
            "replaceable"><tt>&lt;codec&gt;</tt></em></tt>: Review the
            available options and codecs using the <span><strong class=
            "command">./configure --help</strong></span> command. Also review
            the information at the end of the configure script
            (<span><strong class="command">cat</strong></span> the file or
            view it using a text editor) for information about building
            support for the AMR codecs.
          </p>
        </div>
        <div class="configuration" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Configuring FFmpeg
            </h2>
          </div>
          <div class="sect3" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title">
                    <a id="ffmpeg-config" name="ffmpeg-config"></a>Config
                    Files
                  </h4>
                </div>
              </div>
            </div>
            <p>
              <tt class="filename">/etc/ffserver.conf</tt> and <tt class=
              "filename">~/.ffmpeg/ffserver-config</tt>
            </p>
            <p>
              You'll find a sample ffserver configuration file at <a href=
              "http://ffmpeg.sourceforge.net/sample.html"><span class=
              "url">http://ffmpeg.sourceforge.net/sample.html</span></a>
              (also <tt class="filename">doc/ffserver.conf</tt> in the source
              tree).
            </p>
          </div>
        </div>
        <div class="content" lang="en" xml:lang="en">
          <div class="titlepage">
            <h2 class="sect2">
              Contents
            </h2>
          </div>
          <div class="segmentedlist">
            <div class="seglistitem">
              <div class="seg">
                <strong><span class="segtitle">Installed
                Programs:</span></strong> <span class="seg">ffmpeg, ffserver,
                and optionally, ffplay</span>
              </div>
              <div class="seg">
                <strong><span class="segtitle">Installed
                Libraries:</span></strong> <span class="seg">libavcodec.so,
                libavformat.so, and video hook modules</span>
              </div>
              <div class="seg">
                <strong><span class="segtitle">Installed
                Directories:</span></strong> <span class=
                "seg">/usr/include/ffmpeg, /usr/lib/vhook, and
                /usr/share/doc/ffmpeg-0.4.9-pre1</span>
              </div>
            </div>
          </div>
          <div class="variablelist">
            <h3>
              <a id="id2949617" name="id2949617"></a>Short Descriptions
            </h3>
            <table border="0">
              <col align="left" valign="top" />
              <tbody>
                <tr>
                  <td>
                    <a id="ffmpeg-prog" name="ffmpeg-prog"></a><span class=
                    "term"><span><strong class=
                    "command">ffmpeg</strong></span></span>
                  </td>
                  <td>
                    <p>
                      is a command-line tool to convert video files, network
                      streams and input from a TV card to several video
                      formats.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="ffplay" name="ffplay"></a><span class=
                    "term"><span><strong class=
                    "command">ffplay</strong></span></span>
                  </td>
                  <td>
                    <p>
                      is a very simple and portable media player using the
                      <tt class="filename">ffmpeg</tt> libraries and the SDL
                      library.
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="ffserver" name="ffserver"></a><span class=
                    "term"><span><strong class=
                    "command">ffserver</strong></span></span>
                  </td>
                  <td>
                    <p>
                      is a streaming server for everything that
                      <span><strong class="command">ffmpeg</strong></span>
                      could use as input (files, streams, TV card input,
                      webcam, etc.).
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="libavcodec" name="libavcodec"></a><span class=
                    "term"><tt class="filename">libavcodec.so</tt></span>
                  </td>
                  <td>
                    <p>
                      is a library containing the <span class=
                      "application">FFmpeg</span> codecs (both encoding and
                      decoding).
                    </p>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a id="libavformat" name="libavformat"></a><span class=
                    "term"><tt class="filename">libavformat.so</tt></span>
                  </td>
                  <td>
                    <p>
                      is a library containing the file formats handling (mux
                      and demux code for several formats) used by
                      <span><strong class="command">ffplay</strong></span> as
                      well as allowing the generation of audio or video
                      streams.
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <p class="updated">
        Last updated on 2007-01-15 17:25:53 -0600
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="audacious.html" title=
          "Audacious-1.0.0">Prev</a>
          <p>
            Audacious-1.0.0
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="avifile.html" title=
          "Avifile-0.7.45">Next</a>
          <p>
            Avifile-0.7.45
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="multimedia.html" title=
          "Part&nbsp;XI.&nbsp;Multimedia">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.2.0">Home</a>.
        </li>
      </ul>
    </div>
  </body>
</html>
