<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "text/html; charset=iso-8859-1" />
    <title>
      FOP-0.20.5
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.68.1" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="blfs" class="6.1">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Beyond Linux From Scratch - Version 6.1
        </h4>
        <h3>
          Chapter&nbsp;45.&nbsp;PostScript
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="xpdf.html" title="Xpdf-3.00pl3">Prev</a>
          <p>
            Xpdf-3.00pl3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="otherps.html" title=
          "Other PostScript Programs">Next</a>
          <p>
            Other PostScript Programs
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="ps.html" title=
          "Chapter&nbsp;45.&nbsp;PostScript">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.1">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <a id="fop" name="fop"></a>
        <h1 class="sect1">
          FOP-0.20.5
        </h1>
      </div>
      <div class="package" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Introduction to FOP
          </h2>
        </div>
        <p>
          The <span class="application">FOP</span> (Formatting Objects
          Processor) package contains a print formatter driven by XSL
          formatting objects (XSL-FO). It is a <span class=
          "application">Java</span> application that reads a formatting
          object tree and renders the resulting pages to a specified output.
          Output formats currently supported include PDF, PCL, PostScript,
          SVG, XML (area tree representation), print, AWT, MIF and ASCII
          text. The primary output target is PDF.
        </p>
        <h3>
          <a id="id2906030" name="id2906030"></a>Package Information
        </h3>
        <div class="itemizedlist">
          <ul compact="compact">
            <li>
              <p>
                Download (HTTP): <a href=
                "http://www.apache.org/dist/xml/fop/fop-0.20.5-src.tar.gz"><span class="url">
                http://www.apache.org/dist/xml/fop/fop-0.20.5-src.tar.gz</span></a>
              </p>
            </li>
            <li>
              <p>
                Download (FTP): <a href=
                "ftp://apache.mirrors.pair.com/xml/fop/source/fop-0.20.5-src.tar.gz">
                <span class=
                "url">ftp://apache.mirrors.pair.com/xml/fop/source/fop-0.20.5-src.tar.gz</span></a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: 1a31eb1357e5d4b8d32d4cb3edae2da2
              </p>
            </li>
            <li>
              <p>
                Download size: 7.8 MB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 45.3 MB
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 0.25 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          <a id="id2855184" name="id2855184"></a>Additional Downloads
        </h3>
        <div class="itemizedlist">
          <p class="title">
            <b>Required package</b>
          </p>
          <ul compact="compact">
            <li>
              <p>
                <span class="application">Java</span> Advanced Imaging (JAI)
                API components: <a href=
                "http://javashoplm.sun.com/ECom/docs/Welcome.jsp?StoreId=22&amp;PartDetailId=jai-1_1_2_01-oth-JPR&amp;SiteId=JSC&amp;TransactionId=noreg">
                <span class=
                "url">http://javashoplm.sun.com/ECom/docs/Welcome.jsp?StoreId=22&amp;</span></a>
                <a href=
                "http://javashoplm.sun.com/ECom/docs/Welcome.jsp?StoreId=22&amp;PartDetailId=jai-1_1_2_01-oth-JPR&amp;SiteId=JSC&amp;TransactionId=noreg">
                <span class=
                "url">PartDetailId=jai-1_1_2_01-oth-JPR&amp;SiteId=JSC&amp;TransactionId=noreg</span></a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: f2be3619a8d002eff3874355e96327eb
              </p>
            </li>
            <li>
              <p>
                Download size: 2.6 MB
              </p>
            </li>
          </ul>
        </div>
        <p>
          Choose the &ldquo;<span class="quote"><span class=
          "application">Linux</span> <span class="application">JDK</span>
          Install</span>&rdquo; file after accepting the license agreement.
        </p>
        <div class="itemizedlist">
          <p class="title">
            <b>Required patch</b>
          </p>
          <ul compact="compact">
            <li>
              <p>
                <a href=
                "http://www.linuxfromscratch.org/blfs/downloads/6.1/fop_0.20.5-jdk_1.5.0-1.patch">
                <span class=
                "url">http://www.linuxfromscratch.org/blfs/downloads/6.1/fop_0.20.5-jdk_1.5.0-1.patch</span></a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          <a id="id2656012" name="id2656012"></a>FOP Dependencies
        </h3>
        <h4>
          <a id="id2622750" name="id2622750"></a>Required
        </h4>
        <p>
          <a href="../general/jdk.html">JDK-1.5.0</a>
        </p>
        <h4>
          <a id="id2556045" name="id2556045"></a>Optional
        </h4>
        <p>
          <a href="../general/libxslt.html">libxslt-1.1.14</a>, <a href=
          "http://java.sun.com/products/jimi/"><span class="url">JIMI
          SDK</span></a>, <a href="http://xml.apache.org/batik/"><span class=
          "url">Batik</span></a> and <a href=
          "http://forrest.apache.org/"><span class="url">Forrest</span></a>
          (only used to rebuild the documentation)
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Installation of FOP
          </h2>
        </div>
        <div class="note">
          <div class="admonhead">
            <img alt="[Note]" src="../images/note.png" />
            <h3 class="admontitle">
              Note
            </h3>
          </div>
          <div class="admonbody">
            <p>
              Ensure <tt class="envar">$JAVA_HOME</tt> is set correctly
              before beginning the build.
            </p>
          </div>
        </div>
        <p>
          Some versions of tar will display a message similar to
          &ldquo;<span class="quote"><tt class="computeroutput">tar: A lone
          zero block at 33476</tt></span>&rdquo; when unpacking the source
          tarball. You may safely ignore this message.
        </p>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2554955" name="id2554955"></a>Installing JAI
                </h4>
              </div>
            </div>
          </div>
          <p>
            Install the JAI components by running the following commands as
            the <tt class="systemitem">root</tt> user while in the root of
            the <span class="application">FOP</span> source tree:
          </p>
          <pre class="root"><kbd class=
          "command">chmod 755 ../jai-1_1_2_01-lib-linux-i586-jdk.bin &amp;&amp;
FOP_BUILD_DIR=$(pwd) &amp;&amp;
cd $JAVA_HOME &amp;&amp;
yes | $FOP_BUILD_DIR/../jai-1_1_2_01-lib-linux-i586-jdk.bin &amp;&amp;
cd $FOP_BUILD_DIR</kbd></pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2795383" name="id2795383"></a>Installing FOP
                  required components
                </h4>
              </div>
            </div>
          </div>
          <p>
            Install <span class="application">FOP</span> by running the
            following commands:
          </p>
          <pre class="userinput"><kbd class=
          "command">patch -Np1 -i ../fop_0.20.5-jdk_1.5.0-1.patch &amp;&amp;
./build.sh &amp;&amp;
sed -i -e "s/build/lib/" fop.sh</kbd></pre>
          <p>
            Now, as the <tt class="systemitem">root</tt> user:
          </p>
          <pre class="root"><kbd class="command">install -v -d -m755 \
    /opt/fop-0.20.5/{bin,lib,docs/{general,lib,site}} &amp;&amp;
install -v -m755 fop.sh /opt/fop-0.20.5/bin &amp;&amp;
install -v -m644 build/fop.jar lib/avalon-framework-cvs-20020806.jar \
    /opt/fop-0.20.5/lib &amp;&amp;
install -v -m644 docs/* /opt/fop-0.20.5/docs &amp;&amp;
install -v -m644 CHANGES LICENSE README ReleaseNotes.html STATUS \
    /opt/fop-0.20.5/docs/general &amp;&amp;
install -v -m644 lib/{avalon.LICENSE.txt,readme} \
    /opt/fop-0.20.5/docs/lib &amp;&amp;
cp -v -R build/site/* /opt/fop-0.20.5/docs/site &amp;&amp;
ln -svf fop-0.20.5 /opt/fop</kbd></pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2871520" name="id2871520"></a>Installing the Batik
                  JAR
                </h4>
              </div>
            </div>
          </div>
          <p>
            You'll need to install one additional <span class=
            "application">Java</span> class library to process SVG objects.
            This library is part of the <a href=
            "http://xml.apache.org/batik/"><span class="url">Batik</span></a>
            package, but is also included with the <span class=
            "application">FOP</span> package. If you have <span class=
            "application">Batik</span> installed, ensure the <tt class=
            "filename">batik.jar</tt> library is included in your <tt class=
            "envar">$CLASSPATH</tt> environment variable. Alternatively,
            create a symbolic link from <tt class=
            "filename">/opt/fop-0.20.5/lib/batik.jar</tt> pointing to the
            full path of the installed <tt class="filename">batik.jar</tt>
            file so that the <span><strong class=
            "command">fop.sh</strong></span> script will automatically pick
            it up.
          </p>
          <p>
            If you don't have the <span class="application">Batik</span>
            package installed, run the following commands as the <tt class=
            "systemitem">root</tt> user:
          </p>
          <pre class="root"><kbd class=
          "command">install -v -m644 lib/batik.jar /opt/fop-0.20.5/lib &amp;&amp;
install -v -m644 lib/batik.LICENSE.txt \
    /opt/fop-0.20.5/docs/lib</kbd></pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2675856" name="id2675856"></a>Installing the
                  Xalan-Java components
                </h4>
              </div>
            </div>
          </div>
          <p>
            The components of <span class="application">FOP</span> required
            to process FO files created by an XSL transformation engine (also
            known as an XSLT processor) is now complete. An XSL
            transformation engine (<span><strong class=
            "command">xsltproc</strong></span>) is included with the <a href=
            "../general/libxslt.html">libxslt-1.1.14</a> package in BLFS. The
            <span class="application">FOP</span> package includes components
            of <a href="http://xml.apache.org/xalan-j/"><span class=
            "url">Xalan-Java</span></a> to accomplish XSL transformations. If
            you have the <span class="application">Xalan-Java</span> package
            installed, skip to the next section.
          </p>
          <p>
            If you wish to install the <span class=
            "application">Xalan-Java</span> components provided by the
            <span class="application">FOP</span> package, run the following
            commands as the <tt class="systemitem">root</tt> user:
          </p>
          <pre class="root"><kbd class=
          "command">sed -i -e "s/build/lib/" xalan.sh &amp;&amp;
install -v -m755 xalan.sh /opt/fop-0.20.5/bin &amp;&amp;
install -v -m644 lib/xml-apis.jar \
                 lib/xercesImpl-2.2.1.jar \
                 lib/xalan-2.4.1.jar \
    /opt/fop-0.20.5/lib &amp;&amp;
install -v -m644 lib/{xml-apis,xerces,xalan}.LICENSE.txt \
                 lib/xml-apis.README.txt \
    /opt/fop-0.20.5/docs/lib</kbd></pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2856310" name="id2856310"></a>Installing the Jimi
                  SDK JAR
                </h4>
              </div>
            </div>
          </div>
          <p>
            If you installed the Java Image I/O class library (<span class=
            "application">Jimi SDK</span>) into the <span class=
            "application">FOP</span> source tree <tt class=
            "filename">lib</tt> directory before building <span class=
            "application">FOP</span> (this will enable Jimi support), ensure
            you also install this JAR file into <tt class=
            "filename">/opt/fop-0.20.5/lib</tt>.
          </p>
        </div>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Command Explanations
          </h2>
        </div>
        <p>
          <span><strong class="command">yes |
          $FOP_BUILD_DIR/../jai-...-jdk.bin</strong></span>: This command
          installs the <span class="application">JAI</span> components into
          the <span class="application">JDK</span> file structure. The
          <span><strong class="command">yes</strong></span> command is piped
          through so that you don't have to scroll through four pages of the
          license agreement and automatically responds &ldquo;<span class=
          "quote">yes</span>&rdquo; to the agreement. <tt class=
          "envar">$FOP_BUILD_DIR</tt> is used as a reference point to the
          source executable and as a method to return back to the
          <span class="application">FOP</span> source tree.
        </p>
        <p>
          <span><strong class="command">sed -i -e "s/build/lib/"
          ...</strong></span>: These commands modify the installed shell
          scripts so that the location of the installed <tt class=
          "filename">fop.jar</tt> file is correctly identified.
        </p>
        <p>
          <span><strong class="command">install -v ...; cp -v
          ...</strong></span>: There is no installation script provided by
          the <span class="application">FOP</span> package. These commands
          install the package.
        </p>
        <p>
          <span><strong class="command">ln -svf fop-0.20.5
          /opt/fop</strong></span>: This creates a convenience symlink so
          that <tt class="envar">$FOP_HOME</tt> doesn't have to be changed
          each time there's a package version change.
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Configuring FOP
          </h2>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="fop-config" name="fop-config"></a>Config Files
                </h4>
              </div>
            </div>
          </div>
          <p>
            <tt class="filename">~/.foprc</tt>
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2760499" name="id2760499"></a>Configuration
                  Information
                </h4>
              </div>
            </div>
          </div>
          <p>
            Using <span class="application">FOP</span> to process some large
            FO's (including the FO derived from the BLFS XML sources), can
            lead to memory errors. Unless you add a parameter to the
            <span><strong class="command">java</strong></span> command used
            in the <span><strong class="command">fop.sh</strong></span>
            script you may receive messages similar to the one shown below:
          </p>
          <p>
            <tt class="computeroutput">Exception in thread "main"
            java.lang.OutOfMemoryError: Java heap space</tt>
          </p>
          <p>
            To avoid errors like this, you need to pass an extra parameter to
            the <span><strong class="command">java</strong></span> command
            used in the <span><strong class="command">fop.sh</strong></span>
            script. This can be accomplished by creating a <tt class=
            "filename">~/.foprc</tt> (which is sourced by the
            <span><strong class="command">fop.sh</strong></span> script) and
            adding the parameter to the <tt class="envar">FOP_OPTS</tt>
            environment variable.
          </p>
          <p>
            The <span><strong class="command">fop.sh</strong></span> script
            looks for a <tt class="envar">FOP_HOME</tt> environment variable
            to locate the <span class="application">FOP</span> class
            libraries. You can create this variable using the <tt class=
            "filename">~/.foprc</tt> file as well. Create a <tt class=
            "filename">~/.foprc</tt> file using the following commands:
          </p>
          <pre class="userinput"><kbd class=
          "command">cat &gt; ~/.foprc &lt;&lt; "EOF"
<tt class="literal">FOP_OPTS="-Xmx<em class=
"replaceable"><tt>[RAM_Installed]</tt></em>m"
FOP_HOME="/opt/fop"</tt>

EOF</kbd></pre>
          <p>
            Replace <em class="replaceable"><tt>[RAM_Installed]</tt></em>
            with a number representing the amount of RAM installed in your
            computer. An example would be <strong class=
            "userinput"><tt>FOP_OPTS="-Xmx768m"</tt></strong>. For more
            information about memory issues running <span class=
            "application">FOP</span>, see <a href=
            "http://xml.apache.org/fop/running.html#memory"><span class=
            "url">http://xml.apache.org/fop/running.html#memory</span></a>.
          </p>
          <p>
            To include the <span><strong class=
            "command">fop.sh</strong></span> script in your path, update your
            personal or system-wide profile with the following:
          </p>
          <pre class="screen"><tt class=
          "literal">PATH=$PATH:/opt/fop/bin</tt></pre>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Contents
          </h2>
        </div>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong><span class="segtitle">Installed
              Programs:</span></strong> <span class="seg">fop.sh and
              xalan.sh</span>
            </div>
            <div class="seg">
              <strong><span class="segtitle">Installed
              Libraries:</span></strong> <span class=
              "seg">avalon-framework-cvs-20020806.jar, batik.jar, fop.jar,
              xalan-2.4.1.jar, xercesImpl-2.2.1.jar, and xml-apis.jar. JAI
              components include libmlib_jai.so, jai_codec.jar, jai_core.jar,
              and mlibwrapper_jai.jar</span>
            </div>
            <div class="seg">
              <strong><span class="segtitle">Installed
              Directory:</span></strong> <span class=
              "seg">/opt/fop-0.20.5</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            <a id="id2860265" name="id2860265"></a>Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <a id="fop.sh" name="fop.sh"></a><span class=
                  "term"><span><strong class=
                  "command">fop.sh</strong></span></span>
                </td>
                <td>
                  <p>
                    is a wrapper script to the <span><strong class=
                    "command">java</strong></span> command which sets up the
                    <span class="application">FOP</span> environment and
                    passes the required parameters.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <a id="fop.jar" name="fop.jar"></a><span class=
                  "term"><tt class="filename">fop.jar</tt></span>
                </td>
                <td>
                  <p>
                    contains all the <span class="application">FOP</span>
                    <span class="application">Java</span> classes.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2005-08-01 13:29:19 -0600
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="xpdf.html" title="Xpdf-3.00pl3">Prev</a>
          <p>
            Xpdf-3.00pl3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="otherps.html" title=
          "Other PostScript Programs">Next</a>
          <p>
            Other PostScript Programs
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="ps.html" title=
          "Chapter&nbsp;45.&nbsp;PostScript">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.1">Home</a>.
        </li>
      </ul>
    </div>
  </body>
</html>
