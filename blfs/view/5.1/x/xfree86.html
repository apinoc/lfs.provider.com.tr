<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "text/html; charset=iso-8859-1" />
    <title>
      XFree86-4.4.0
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.65.1" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body>
    <div class="navheader">
      <div class="headertitles">
        <p>
          Beyond Linux From Scratch - Version 5.1
        </p>
        <p>
          <b>Chapter&nbsp;25.&nbsp;X Window Environment</b>
        </p>
      </div>
      <div class="headerlinks">
        <div class="prev">
          <a accesskey="p" href="installing.html">Prev</a>
        </div>
        <div class="next">
          <a accesskey="n" href="xfree86-setup.html">Next</a>
        </div>
        <div class="home">
          <a accesskey="h" href="../index.html">Home</a>
        </div>
      </div>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <h1 class="sect1">
          XFree86-4.4.0
        </h1>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h3 class="sect2">
            Introduction to XFree86
          </h3>
        </div>
        <p>
          <span class="application">XFree86</span> is a freely
          redistributable open-source implementation of the <span class=
          "application">X</span> Window System. <span class=
          "application">XFree86</span> provides a client/server interface
          between display hardware (the mouse, keyboard, and video displays)
          and the desktop environment, while also providing both the
          windowing infrastructure and a standardized application interface
          (<span class="acronym">API</span>).
        </p>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2913012" name="id2913012"></a>Package information
                </h4>
              </div>
            </div>
          </div>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  Download (HTTP): <a href=
                  "http://gnu.kookel.org/ftp/XFree86/4.4.0/source/">http://gnu.kookel.org/ftp/XFree86/4.4.0/source/</a>
                </p>
              </li>
              <li>
                <p>
                  Download (FTP): <a href=
                  "ftp://ftp.xfree86.org/pub/XFree86/4.4.0/source/">ftp://ftp.xfree86.org/pub/XFree86/4.4.0/source/</a>
                </p>
              </li>
              <li>
                <p>
                  Download size: 52 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated Disk space required: 636 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated build time: 14.3 SBU
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2913047" name="id2913047"></a><span class=
                  "application">XFree86</span> dependencies
                </h4>
              </div>
            </div>
          </div>
          <div class="sect4" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h5 class="title">
                    <a id="id2913071" name="id2913071"></a>Required
                  </h5>
                </div>
              </div>
            </div>
            <p>
              <a href="../general/libpng.html">libpng-1.2.5</a>
            </p>
          </div>
          <div class="sect4" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h5 class="title">
                    <a id="id2913083" name="id2913083"></a>Optional
                  </h5>
                </div>
              </div>
            </div>
            <p>
              <a href="../postlfs/linux_pam.html">Linux-PAM-0.77</a> and the
              following packages are included in the <span class=
              "application">XFree86</span> package, however they are updated
              more often than the <span class="application">XFree86</span>
              package and are highly recommended: <a href=
              "../general/expat.html">expat-1.95.7</a>, <a href=
              "../general/freetype2.html">FreeType-2.1.7</a>, <a href=
              "../general/fontconfig.html">Fontconfig-2.2.2</a>.
            </p>
            <div class="admonition">
              <div class="admonhead">
                <img alt="[Note]" src="../images/note.png" />
                <h3 class="note">
                  Note
                </h3>
              </div>
              <div class="admonbody">
                <p>
                  If you choose not to install <span class=
                  "application">expat</span>, <span class=
                  "application">freetype2</span>, and <span class=
                  "application">fontconfig</span>, the <tt class=
                  "filename">host.def</tt> file below will have to be
                  modified to instruct <span class=
                  "application">XFree86</span> to build them.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2913162" name="id2913162"></a>Download
                  Instructions
                </h4>
              </div>
            </div>
          </div>
          <p>
            There are several files that need to be fetched from the download
            location:
          </p>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  <tt class="filename">XFree86-4.4.0-src-1.tgz</tt>
                </p>
              </li>
              <li>
                <p>
                  <tt class="filename">XFree86-4.4.0-src-2.tgz</tt>
                </p>
              </li>
              <li>
                <p>
                  <tt class="filename">XFree86-4.4.0-src-3.tgz</tt>
                </p>
              </li>
              <li>
                <p>
                  <tt class="filename">XFree86-4.4.0-src-4.tgz</tt>
                </p>
              </li>
              <li>
                <p>
                  <tt class="filename">XFree86-4.4.0-src-5.tgz</tt>
                </p>
              </li>
              <li>
                <p>
                  <tt class="filename">XFree86-4.4.0-src-6.tgz</tt>
                </p>
              </li>
              <li>
                <p>
                  <tt class="filename">XFree86-4.4.0-src-7.tgz</tt>
                </p>
              </li>
            </ul>
          </div>
          <p>
            The first three packages are the <span class=
            "application">XFree86</span> programs, the fourth and fifth are
            fonts, the sixth is normal documentation, and the seventh is
            hardcopy documentation. There are also two packages <tt class=
            "filename">doctools-1.3.1.tgz</tt>, which contain programs to
            regenerate hardcopy documentation, and <tt class=
            "filename">utils-1.1.0.tgz</tt>, which contain <span class=
            "application"><span class="acronym">GNU</span> <span class=
            "acronym">TAR</span></span> and <span class=
            "application">zlib</span> which are already installed on an
            <span class="acronym">LFS</span> system.
          </p>
          <p>
            To check your downloads for integrity, download the <tt class=
            "filename">SUMS.md5sum</tt> file. Then:
          </p>
          <pre class="screen">
<tt class="userinput"><span><b class=
"command">md5sum -c SUMS.md5sum</b></span></tt>
</pre>
          <p>
            The only errors you should see are for <tt class=
            "filename">README</tt>, <tt class=
            "filename">doctools-1.3.1.tgz</tt>, and <tt class=
            "filename">utils-1.1.0.tgz</tt> files if you did not download
            them.
          </p>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h3 class="sect2">
            Installation of XFree86
          </h3>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2912914" name="id2912914"></a>Kernel Compilation
                  Settings
                </h4>
              </div>
            </div>
          </div>
          <p>
            If you have an Intel P6 (Pentium Pro, Pentium II and later), it
            is recommended that you compile <span class="acronym">MTRR</span>
            (Memory Type Range Registers) support into the kernel. The kernel
            can map Cyrix and AMD <span class="acronym">CPU</span>s to the
            <span class="acronym">MTRR</span> interface, so selecting this
            option is useful for those processors also. This option is found
            in the "Processor type and features" menu. It can increase
            performance of image write operations 2.5 times or more on
            <span class="acronym">PCI</span> or <span class=
            "acronym">AGP</span> video cards.
          </p>
          <p>
            In the "Character Devices" section, enable <span class=
            "acronym">AGP</span> Support and select the chipset support on
            your motherboard. If you do not know the chipset, you may select
            all the chip types at the expense of extra kernel size. You can
            usually determine your motherboard's chipset by doing:
          </p>
          <pre class="screen">
<tt class="userinput"><span><b class="command">cat /proc/pci</b></span></tt>
</pre>
          <p>
            In the "Character Devices" section, <span class=
            "emphasis"><em>disable</em></span> Direct Rendering Manager
            unless you have a Direct Rendering Infrastructure (<span class=
            "acronym">DRI</span>) supported video card. A complete list of
            <span class="acronym">DRI</span> supported video cards can be
            found at <a href=
            "http://dri.sourceforge.net">http://dri.sourceforge.net</a> in
            the Status section. Currently, supported cards include those from
            3dfx (Voodoo, Banshee), 3Dlabs, ATI (Rage Pro, Rage 128, Radeon
            7X00, Radeon 2), Intel (i810, i815), and Matrox (G200, G400,
            G450). If you do enable <span class="acronym">DRI</span> here,
            make sure you select the video card(s) you want to support as a
            <span class="emphasis"><em>module</em></span>.
          </p>
          <p>
            Additionally NVidia provides their own closed source binary
            drivers, which do not make use of <span class=
            "acronym">DRI</span>. If you intend to use these drivers, do not
            enable <span class="acronym">DRI</span>.
          </p>
          <p>
            If you made any changes to the kernel configuration, recompile
            the kernel.
          </p>
          <p>
            Copy <tt class=
            "filename">/usr/src/linux/arch/i386/boot/bzImage</tt> and
            <tt class="filename">/usr/src/linux/System.map</tt> to <tt class=
            "filename">/boot</tt>, edit <tt class=
            "filename">/etc/lilo.conf</tt> appropriately and run <tt class=
            "filename">lilo</tt>. If you use <tt class="filename">grub</tt>,
            edit <tt class="filename">/boot/grub/grub.conf</tt> and add the
            new kernel to the boot menu.
          </p>
          <div class="admonition">
            <div class="admonhead">
              <img alt="[Note]" src="../images/note.png" />
              <h3 class="note">
                Note
              </h3>
            </div>
            <div class="admonbody">
              <p>
                If you build <span class="application">XFree86</span> in a
                chroot environment, make sure the kernel version of the base
                system and the target system are the same. This is especially
                important if you enabled <span class="acronym">DRI</span>
                support as a module as instructed above.
              </p>
            </div>
          </div>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2913951" name="id2913951"></a>Creating <tt class=
                  "filename">host.def</tt>
                </h4>
              </div>
            </div>
          </div>
          <p>
            Although <span class="application">XFree86</span> will compile
            without a <tt class="filename">host.def</tt> file, the following
            file is recommended for customizing the installation. Start from
            the <tt class="filename">xc</tt> directory.
          </p>
          <div class="admonition">
            <div class="admonhead">
              <img alt="[Note]" src="../images/note.png" />
              <h3 class="note">
                Note
              </h3>
            </div>
            <div class="admonbody">
              <p>
                The <tt class="filename">host.def</tt> file is a <span class=
                "application">C</span> file, not the usual configuration
                file. If you make any changes, be sure the comment characters
                (<tt class="userinput">/*</tt> and <tt class=
                "userinput">*/</tt>) are balanced. Most of the entries in the
                file below are commented out with the default settings shown.
              </p>
            </div>
          </div>
          <pre class="screen">
<tt class="userinput"><span><b class=
"command">cat &gt; config/cf/host.def &lt;&lt; "EOF"</b></span>
/* Begin XFree86 host.def file */

/* System Related Information.  If you read and configure only one
 * section then it should be this one.  The Intel architecture defaults are 
 * set for a i686 and higher.  Axp is for the Alpha architecture and Ppc is  
 * for the Power PC.  Note that there have been reports that the Ppc 
 * optimization line causes segmentation faults during build.  If that 
 * happens, try building without the DefaultGcc2PpcOpt line.  **************/

/* #define DefaultGcc2i386Opt  -O2 -fomit-frame-pointer -march=i686 */
/* #define DefaultGcc2AxpOpt   -O2 -mcpu=ev6 */
/* #define DefaultGcc2PpcOpt   -O2 -mcpu=750 */

/* The following definitions are normally set properly by XFree86's scripts.
 * You can uncomment them if you want to make sure. ************************/
 
/* #define HasMTRRSupport      YES  */ /* Enabled in kernel see kernel docs*/
/* #define HasMMXSupport        NO  */ /* Any i586 or above */
/* #define HasKatmaiSupport     NO  */ /* PIII SSE instructions */
/* #define Has3DNowSupport      NO  */ /* AMD instructions */


/* This setting reduces compile time a little by omitting rarely used input 
 * devices.  You can find the complete list in config/cf/xfree86.cf ********/
 
#define XInputDrivers                 mouse void

/* VIDEO DRIVERS ***********************************************************/

/* If you are sure you only want the drivers for one or a few video cards,
 * you can delete the drivers you do not want. *****************************/ 


#define XF86CardDrivers  mga glint nv tga s3 s3virge sis rendition \
                         neomagic i740 tdfx savage \
                         cirrus vmware tseng trident chips apm \
                         GlideDriver fbdev i128 nsc \
                         ati i810 AgpGartDrivers DevelDrivers ark \
                         cyrix siliconmotion \
                         vesa vga \
                         dummy XF86OSCardDrivers XF86ExtraCardDrivers


/* USER AND SYSTEM DEFAULT PATHS *******************************************/

/* These settings set the PATH variables used by xdm. See README for *******/
/* detailed description and modify the following as per your need. *********/

/* #define DefaultSystemPath /usr/bin:/bin:/usr/sbin:/sbin:/usr/X11R6/bin */
/* #define DefaultUserPath /usr/bin:/bin:/usr/X11R6/bin */

/* FONT SERVER AND LIBRARY SETTINGS ****************************************/

/* These settings are the defaults   ***************************************/

/* #define BuildFontServer          YES  */ /* For Ghostscript Print Server*/
/* #define SharedLibFont            YES  */
/* #define CompressAllFonts         YES  */
/* #define GzipFontCompression      YES  */

/* These settings ensure we use our libraries ******************************/
#define HasFreetype2             YES
#define HasFontconfig            YES
#define HasExpat                 YES
#define HasLibpng                YES
#define HasZlib                  YES

/* The font path can be redefined in the XF86Config file *******************/

/*
#define DefaultFontPath                $(FONTDIR)/misc/,$(FONTDIR)/75dpi/,\
$(FONTDIR)/100dpi/,$(FONTDIR)/Type1,$(FONTDIR)/local,\
$(FONTDIR)/TrueType,$(FONTDIR)/CID,$(FONTDIR)/Speedo
*/


/* INTERNATIONAL FONTS.  Change to YES if you need any of them.  These  are
 * the defaults. ***********************************************************/

/* #define BuildCyrillicFonts            NO  */
/* #define BuildArabicFonts              NO  */
/* #define BuildISO8859_6Fonts           NO  */
/* #define BuildGreekFonts               NO  */
/* #define BuildISO8859_7Fonts           NO  */
/* #define BuildHebrewFonts              NO  */
/* #define BuildISO8859_8Fonts           NO  */
/* #define BuildKOI8_RFonts              NO  */
/* #define BuildJapaneseFonts            NO  */
/* #define BuildJISX0201Fonts            NO  */
/* #define BuildKoreanFonts              NO  */
/* #define BuildChineseFonts             NO  */

/* DOCUMENTATION SETTINGS **************************************************/

/* These setting are the defaults. *****************************************/

/* #define BuildLinuxDocHtml             NO  */  /* X Docs in Html format */
/* #define BuildLinuxDocPS               NO  */  /* PostScript format */
/* #define BuildAllSpecsDocs             NO  */  /* Various docs */
/* #define BuildHtmlManPages             NO  */

/* GENERAL SETTINGS: You generally want to leave these alone when
 * building X on an LFS system *********************************************/

#define GccWarningOptions         -pipe /* Speed up compiles */
#define TermcapLibrary            -lncurses
#define XprtServer                YES /* Needed by realplayer */
#define XnestServer               YES
#define XAppLoadDir               EtcX11Directory/app-defaults
#define VarLibDir                 /var/lib
#define XFree86Devel               NO
#define FSUseSyslog               YES
#define ThreadedX                 YES
#define HasPam                     NO        
#define SystemManDirectory        /usr/share/man  /* Instead of /usr/man */
#define HasLibCrypt               YES
#define InstallXinitConfig        YES
#define InstallXdmConfig          YES
#define ForceNormalLib            YES
#define BuildSpecsDocs             NO

/* End XFree86 host.def file */
<span><b class="command">EOF</b></span></tt>
</pre>
          <p>
            Edit the file for your hardware and desires.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2914192" name="id2914192"></a>Build Commands
                </h4>
              </div>
            </div>
          </div>
          <p>
            Install <span class="application">XFree86</span> by running the
            following commands:
          </p>
          <pre class="screen">
<tt class="userinput"><span><b class=
"command">( make WORLDOPTS="" World 2&gt;&amp;1 | tee xfree-compile.log &amp;&amp; exit $PIPESTATUS ) &amp;&amp;
make install &amp;&amp;
make install.man &amp;&amp;
ln -sf ../X11R6/bin /usr/bin/X11 &amp;&amp;
ln -sf ../X11R6/lib/{X11,libGL.so{,.1}} /usr/lib &amp;&amp;
ln -sf ../X11R6/include/{X11,GL} /usr/include</b></span></tt>
</pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2914228" name="id2914228"></a>Updating Direct
                  Rendering Infrastructure (<span class="acronym">DRI</span>)
                </h4>
              </div>
            </div>
          </div>
          <p>
            If you have one of the supported <span class="acronym">DRI</span>
            cards and have enabled <span class="acronym">DRI</span> kernel
            modules as explained above, you now need to update the kernel
            modules to ensure they are compatible with the current version of
            <span class="application">XFree86</span>. To do this, perform the
            following:
          </p>
          <pre class="screen">
<tt class="userinput"><span><b class=
"command">cd programs/Xserver/hw/xfree86/os-support/linux/drm/kernel &amp;&amp; 
make  CC=/opt/gcc-2.95.3/bin/gcc -f Makefile.linux  &amp;&amp; 
mkdir -p /lib/modules/`uname -r`/kernel/drivers/char/drm/  &amp;&amp; 
cp gamma.o radeon.o sis.o r128.o i810.o i830.o mga.o tdfx.o \
    /lib/modules/`uname -r`/kernel/drivers/char/drm/  &amp;&amp; 
depmod -a</b></span></tt>
</pre>
          <div class="admonition">
            <div class="admonhead">
              <img alt="[Warning]" src="../images/warning.png" />
              <h3 class="warning">
                Warning
              </h3>
            </div>
            <div class="admonbody">
              <p>
                If you recompile or upgrade your kernel, you will need to
                re-copy the appropriate driver module(s) to the kernel module
                library and rerun <span><b class="command">depmod
                -a</b></span>.
              </p>
            </div>
          </div>
          <div class="admonition">
            <div class="admonhead">
              <img alt="[Note]" src="../images/note.png" />
              <h3 class="note">
                Note
              </h3>
            </div>
            <div class="admonbody">
              <p>
                If you created <span class="acronym">AGP</span> support as a
                module when compiling the kernel, you may have to add a line
                to <tt class="filename">/etc/modules.conf</tt> to ensure the
                agpgart module is loaded. For instance, the <span class=
                "acronym">AGP</span> version of the Radeon video card will
                use the <tt class="filename">radeon.o</tt> driver. It will
                need to have the line
              </p>
              <pre class="screen">
below radeon agpgart
</pre>
              <p>
                in <tt class="filename">/etc/modules.conf</tt> to enable
                <span class="acronym">DRI</span> support.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h3 class="sect2">
            Command explanations
          </h3>
        </div>
        <p>
          <span><b class="command">( make WORLDOPTS="" World 2&gt;&amp;1 |
          tee xfree-compile.log &amp;&amp; exit $PIPESTATUS )</b></span>:
          This command runs multiple makefiles to completely rebuild the
          system. <tt class="envar">WORLDOPTS</tt>="" disables the default
          setting to continue after encountering an error. <i class=
          "parameter"><tt>2&gt;&amp;1</tt></i> redirects error messages to
          the same location as standard output. The <span><b class=
          "command">tee</b></span> command allows viewing of the output while
          logging the results to a file. The parentheses around the command
          runs the entire comand in a subshell and finally the
          <span><b class="command">exit $PIPESTATUS</b></span> ensures the
          result of the <span><b class="command">make</b></span> is returned
          as the result and not the result of the <span><b class=
          "command">tee</b></span> command.
        </p>
        <div class="admonition">
          <div class="admonhead">
            <img alt="[Note]" src="../images/note.png" />
            <h3 class="note">
              Note
            </h3>
          </div>
          <div class="admonbody">
            <p>
              When rebuilding <span class="application">XFree86</span>, a
              separate command that may be used if only minor changes are
              made to the sources is <span><b class="command">make
              Everything</b></span>. This does not automatically remove
              generated files and only rebuilds those files or programs that
              are out of date.
            </p>
          </div>
        </div>
        <pre class="screen">
<span><b class="command">ln -sf ../X11R6/bin /usr/bin/X11
ln -sf ../X11R6/lib/{X11,libGL.so{,.1}} /usr/lib
ln -sf ../X11R6/include/{X11,GL} /usr/include</b></span>
</pre>
        <p>
          These commands are present to enable other (broken) packages to
          build against <span class="application">XFree86</span>. We do this
          even though the Filesystem Hierarchy Standard says: "In general,
          software must not be installed or managed via the above symbolic
          links. They are intended for utilization by users only."
        </p>
        <p>
          <span><b class="command">make CC=/opt/gcc-2.95.3/bin/gcc -f
          Makefile.linux</b></span>: This builds the <span class=
          "application">XFree86</span> compatible kernel modules using the
          same compiler used to compile the kernel.
        </p>
        <p>
          <span><b class="command">cp gamma.o radeon.o sis.o r128.o i810.o
          i830.o mga.o tdfx.o /lib/modules/`uname
          -r`/kernel/drivers/char/drm/</b></span>: Put the kernel module(s)
          where the kernel can find them. You only need to copy the driver
          you need to support your video card.
        </p>
        <p>
          <span><b class="command">depmod -a</b></span>: Update the
          modules.dep file for module management.
        </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h3 class="sect2">
            Configuring XFree86
          </h3>
        </div>
        <p>
          Edit <tt class="filename">/etc/ld.so.conf</tt> and add <tt class=
          "filename">/usr/X11R6/lib</tt>. Run
        </p>
        <pre class="screen">
<tt class="userinput"><span><b class="command">ldconfig</b></span></tt>
</pre>
        <p>
          Ensure <tt class="filename">/usr/X11R6/bin</tt> is added to your
          <tt class="envar">PATH</tt> environment variable. Instructions for
          doing this are described in the section "<a href=
          "../postlfs/profile.html">The Bash Shell Startup Files</a>."
        </p>
        <p>
          Expand the <tt class="envar">PKG_CONFIG_PATH</tt> so that other
          packages can find <span class="application">X</span> libraries.
          Procedures for this are also described in the section "<a href=
          "../postlfs/profile.html">The Bash Shell Startup Files</a>."
        </p>
        <p>
          Run:
        </p>
        <pre class="screen">
<tt class="userinput"><span><b class=
"command">source ~/.bash_profile</b></span></tt>
</pre>
        <p>
          Set up your mouse:
        </p>
        <pre class="screen">
<tt class="userinput"><span><b class=
"command">ln -s psaux /dev/mouse</b></span></tt>
</pre>
        <p>
          Adjust the symbolic link as necessary for other types of mice. For
          instance, a serial mouse on the first serial port would be linked
          to ttyS1.
        </p>
        <p>
          Create the <tt class="filename">XF86Config</tt> file with:
        </p>
        <pre class="screen">
<tt class="userinput"><span><b class="command">cd ~
XFree86 -configure</b></span></tt>
</pre>
        <p>
          The screen will go black and you may hear some clicking of the
          monitor. This command will create a file, <tt class=
          "filename">XF86Config.new</tt> in your home directory.
        </p>
        <p>
          Edit <tt class="filename">XF86Config.new</tt> to suit your system.
          The details of the file are located in the man page <span><b class=
          "command">man XF86Config</b></span>. Some things you may want to do
          are:
        </p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
                Section "Files". Change the order of the font paths searched.
                You may want to put 100dpi fonts ahead of 75dpi fonts if your
                system normally comes up closer to 100 dots per inch. You may
                want to remove some font directories completely.
              </p>
            </li>
            <li>
              <p>
                Section "Monitor". Specify the <i class=
                "parameter"><tt>VertRefresh</tt></i> and <i class=
                "parameter"><tt>HorizSync</tt></i> values if the system does
                not automatically detect the monitor and its values.
              </p>
            </li>
            <li>
              <p>
                Section "InputDevice". You may want to change the keyboard
                autorepeat rate by adding <i class="parameter"><tt>Option
                "Autorepeat" "250 30"</tt></i>.
              </p>
            </li>
            <li>
              <p>
                Section "Device". You may want to set some of the options
                available for your selected video driver. A description of
                the driver parameters is in the man page for your driver.
              </p>
            </li>
            <li>
              <p>
                Section "Screen". Add a DefaultDepth statement such as:
                <i class="parameter"><tt>DefaultDepth 16</tt></i>. In the
                SubSection for your default depth, add a modes line such as:
                <i class="parameter"><tt>Modes "1280x1024"
                "1024x768"</tt></i>. The first mode listed will normally be
                the starting resolution.
              </p>
            </li>
          </ul>
        </div>
        <p>
          Test the system with:
        </p>
        <pre class="screen">
<tt class="userinput"><span><b class=
"command">XFree86 -xf86config ~/XF86Config.new</b></span></tt>
</pre>
        <p>
          You will only get a gray background with an X-shaped mouse cursor,
          but it confirms the system is working. Exit with
          Control-Alt-Backspace. If the system does not work, take a look at
          <tt class="filename">/var/log/XFree86.0.log</tt> to see what went
          wrong.
        </p>
        <p>
          Move the configuration file to its final location:
        </p>
        <pre class="screen">
<tt class="userinput"><span><b class=
"command">mv ~/XF86Config.new /etc/X11/XF86Config</b></span></tt>
</pre>
        <p>
          Create <tt class="filename">.xinitrc</tt>:
        </p>
        <pre class="screen">
<tt class="userinput"><span><b class=
"command">cat &gt; ~/.xinitrc &lt;&lt; "EOF"</b></span>
# Begin .xinitrc file
xterm  -g 80x40+0+0   &amp;
xclock -g 100x100-0+0 &amp;
twm
<span><b class="command">EOF</b></span></tt>
</pre>
        <p>
          This provides an initial screen with an xterm and a clock that is
          managed by a simple window manager, Tab Window Manager. For details
          of twm, see the man page.
        </p>
        <div class="admonition">
          <div class="admonhead">
            <img alt="[Note]" src="../images/note.png" />
            <h3 class="note">
              Note
            </h3>
          </div>
          <div class="admonbody">
            <p>
              When needed, <span class="application">XFree86</span> creates
              the directory <tt class="filename">/tmp/.ICE-unix</tt> if it
              does not exist. If this directory is not owned by root,
              <span class="application">XFree86</span> delays startup by a
              few seconds and also appends a warning to the logfile. This
              also affects startup of other applications. To improve
              performance, it is advisable to manually create the directory
              before XFree86 uses it. Add the file creation to <tt class=
              "filename">/etc/sysconfig/createfiles</tt> that is sourced by
              the <tt class="filename">/etc/rc.d/init.d/cleanfs</tt> startup
              script.
            </p>
            <pre class="screen">
<tt class="userinput"><span><b class=
"command">cat &gt;&gt; /etc/sysconfig/createfiles &lt;&lt; "EOF"</b></span>
/tmp/.ICE-unix dir 1777 root root
<span><b class="command">EOF</b></span></tt>
</pre>
          </div>
        </div>
        <p>
          Start <span class="application">X</span> with:
        </p>
        <pre class="screen">
<tt class="userinput"><span><b class="command">startx</b></span></tt>
</pre>
        <p>
          to get a basic functional <span class="application">X</span> Window
          System.
        </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h3 class="sect2">
            Contents
          </h3>
        </div>
        <p>
          The <span class="application">XFree86</span> package contains the
          <span class="application">X</span> Window System for Linux (and
          other operating systems). It includes the <span class=
          "application">X</span> server, fonts, xterm, a simple window
          manager (twm), various utilities, video output drivers, and various
          input drivers including the mouse and keyboard.
        </p>
        <p>
          <span class="application">XFree86</span> also contains libraries
          and header files for development of the <span class=
          "application">X</span> Window System programs.
        </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h3 class="sect2">
            Description
          </h3>
        </div>
        <div class="admonition">
          <div class="admonhead">
            <img alt="[Note]" src="../images/note.png" />
            <h3 class="note">
              Note
            </h3>
          </div>
          <div class="admonbody">
            <p>
              The following list of programs is not comprehensive. The full
              list is in <tt class="filename">/usr/X11R6/bin</tt>. For
              additional information about these programs, see the respective
              man page.
            </p>
          </div>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2914747" name="id2914747"></a>XFree86
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span class="application">XFree86</span> is the X11R6
            implementation of the <span class="application">X</span> Window
            System server.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916112" name="id2916112"></a>xf86config
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">xf86config</b></span> is an interactive
            program for generating an <tt class="filename">XF86Config</tt>
            file for use with <span class="application">XFree86</span>
            <span class="application">X</span> servers.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916143" name="id2916143"></a>xf86cfg
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">xf86cfg</b></span> is a tool to
            configure <span class="application">XFree86</span> that can be
            used to either write the initial configuration file or make
            customizations to the current configuration.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916164" name="id2916164"></a>startx
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">startx</b></span> is a script to
            initialize the <span class="application">X</span> session. It
            runs <span><b class="command">xinit</b></span>.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916189" name="id2916189"></a>xinit
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">xinit</b></span> is used to start the
            <span class="application">X</span> Window System server.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916208" name="id2916208"></a>twm
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">twm</b></span> (Tab Window Manager) is a
            window manager included with the <span class=
            "application">X</span> Window System.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916227" name="id2916227"></a>xterm
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">xterm</b></span> is a terminal emulator
            for <span class="application">X</span>.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916246" name="id2916246"></a>xwininfo
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">xwininfo</b></span> is a window
            information utility for <span class="application">X</span>.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916264" name="id2916264"></a>x11perf
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">x11perf</b></span> is an <span class=
            "application">X</span>11 server performance test program.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916283" name="id2916283"></a>xlsfonts
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">xlsfonts</b></span> is a program to list
            fonts available to the <span class="application">X</span> server.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916302" name="id2916302"></a>xvidtune
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">xvidtune</b></span> is a video mode
            tuner for <span class="application">XFree86</span>.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916321" name="id2916321"></a>xload
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">xload</b></span> is a system load
            average display for <span class="application">X</span>.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916339" name="id2916339"></a>xcalc
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">xcalc</b></span> is a scientific
            calculator for <span class="application">X</span>.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916358" name="id2916358"></a>xclock and oclock
                </h4>
              </div>
            </div>
          </div>
          <p>
            Clock programs for <span class="application">X</span>.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2916372" name="id2916372"></a>xmodmap
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><b class="command">xmodmap</b></span> is a utility for
            modifying keymaps and pointer button mappings in <span class=
            "application">X</span>.
          </p>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <div class="prev">
        <a accesskey="p" href="installing.html">Prev</a><br />
        Chapter&nbsp;25.&nbsp;X Window Environment
      </div>
      <div class="next">
        <a accesskey="n" href="xfree86-setup.html">Next</a><br />
        X Window Components
      </div>
      <div class="up">
        <a accesskey="u" href="installing.html">Up</a>
      </div>
      <div class="home">
        <a accesskey="h" href="../index.html">Home</a>
      </div>
    </div>
  </body>
</html>
