<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "text/html; charset=iso-8859-1" />
    <title>
      Chapter&nbsp;26.&nbsp;X Libraries
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.65.1" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body>
    <div class="navheader">
      <div class="headertitles">
        <p>
          Beyond Linux From Scratch - Version 5.1
        </p>
        <p>
          <b>Part&nbsp;VIII.&nbsp;X + Window Managers</b>
        </p>
      </div>
      <div class="headerlinks">
        <div class="prev">
          <a accesskey="p" href="xfree86-setup.html">Prev</a>
        </div>
        <div class="next">
          <a accesskey="n" href="gtk.html">Next</a>
        </div>
        <div class="home">
          <a accesskey="h" href="../index.html">Home</a>
        </div>
      </div>
    </div>
    <div class="chapter" lang="en" xml:lang="en">
      <div class="titlepage">
        <h1 class="chapter">
          X Libraries
        </h1>
      </div>
      <p>
        This chapter does not contain libraries that are required to run
        <span class="application">X</span>. It does contain libraries that
        enhance <span class="application">X</span>. In some cases the
        enhancement is as simple as font support. In others it is as complex
        as libraries that sit between <span class="application">X</span> and
        applications that run on <span class="application">X</span> whose
        purpose is to standardize the look and feel and inter-process
        communications for different applications. They also assist
        programmers by supplying common elements.
      </p>
      <div class="sect1" lang="en" xml:lang="en">
        <div class="titlepage">
          <a id="qt" name="qt"></a>
          <h2 class="sect1">
            Qt-3.3.2
          </h2>
        </div>
        <div class="sect2" lang="en" xml:lang="en">
          <div class="titlepage">
            <h3 class="sect2">
              Introduction to Qt
            </h3>
          </div>
          <p>
            The <span class="application">Qt</span> package contains a
            <span class="application">C++</span> <span class=
            "acronym">GUI</span> library. This is useful for creating
            graphical applications or executing graphical applications that
            are dynamically linked to the <span class="application">Qt</span>
            library. One of the major users of <span class=
            "application">Qt</span> is <span class="application">KDE</span>.
          </p>
          <div class="sect3" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title">
                    <a id="id2924481" name="id2924481"></a>Package
                    information
                  </h4>
                </div>
              </div>
            </div>
            <div class="itemizedlist">
              <ul compact="compact">
                <li>
                  <p>
                    Download (HTTP): <a href=
                    "http://sunsite.rediris.es/mirror/Qt/source/qt-x11-free-3.3.2.tar.bz2">
                    http://sunsite.rediris.es/mirror/Qt/source/qt-x11-free-3.3.2.tar.bz2</a>
                  </p>
                </li>
                <li>
                  <p>
                    Download (FTP): <a href=
                    "ftp://ftp.trolltech.com/qt/source/qt-x11-free-3.3.2.tar.bz2">
                    ftp://ftp.trolltech.com/qt/source/qt-x11-free-3.3.2.tar.bz2</a>
                  </p>
                </li>
                <li>
                  <p>
                    MD5 Sum: 903cad618274ad84d7d13fd0027a6c3c
                  </p>
                </li>
                <li>
                  <p>
                    Download size: 14 MB
                  </p>
                </li>
                <li>
                  <p>
                    Estimated Disk space required: 165 MB
                  </p>
                </li>
                <li>
                  <p>
                    Estimated build time: 21.2 SBU (full), 13.4 SBU
                    (sub-tools)
                  </p>
                </li>
              </ul>
            </div>
          </div>
          <div class="sect3" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title">
                    <a id="id2924549" name="id2924549"></a><span class=
                    "application">Qt</span> dependencies
                  </h4>
                </div>
              </div>
            </div>
            <div class="sect4" lang="en" xml:lang="en">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title">
                      <a id="id2924534" name="id2924534"></a>Required
                    </h5>
                  </div>
                </div>
              </div>
              <p>
                <a href="installing.html" title=
                "Chapter&nbsp;25.&nbsp;X Window Environment">Chapter&nbsp;25,
                <i>X Window Environment</i></a>
              </p>
            </div>
            <div class="sect4" lang="en" xml:lang="en">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title">
                      <a id="id2924561" name="id2924561"></a>Recommended
                    </h5>
                  </div>
                </div>
              </div>
              <p>
                <a href="../general/graphlib.html#libjpeg">libjpeg-6b</a> and
                <a href="../general/libmng.html">libmng-1.0.7</a>.
              </p>
            </div>
            <div class="sect4" lang="en" xml:lang="en">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title">
                      <a id="id2924580" name="id2924580"></a>Optional
                    </h5>
                  </div>
                </div>
              </div>
              <p>
                <a href="../multimedia/nas.html">NAS-1.6</a>, <a href=
                "../pst/printing.html#cups">CUPS-1.1.20</a>, <a href=
                "../content/mysql.html">MySQL-4.0.20</a>, <a href=
                "../content/postgresql.html">PostgreSQL-7.4.2</a>, <a href=
                "http://firebird.sourceforge.net/">Firebird</a>, and <a href=
                "http://www.unixodbc.org/">unixODBC</a>.
              </p>
            </div>
          </div>
        </div>
        <div class="sect2" lang="en" xml:lang="en">
          <div class="titlepage">
            <h3 class="sect2">
              Installation of Qt
            </h3>
          </div>
          <p>
            There are several ways to install a complicated package such as
            <span class="application">Qt</span>. The files are not completely
            position independent. Installation procedures execute the program
            <tt class="filename">pkg-config</tt> to determine the location of
            package executables, libraries, headers, and other files. For
            <span class="application">Qt</span>, <tt class=
            "filename">pkg-config</tt> will look for the file <tt class=
            "filename">lib/pkgconfig/qt-mt.pc</tt> which must be modified if
            relocating the package. This file is set up correctly by the
            build process.
          </p>
          <p>
            The default installation places the files in <tt class=
            "filename">/usr/local/qt/</tt>. Many commercial distributions
            place the files in the system's <tt class="filename">/usr</tt>
            hierarchy. The package can also be installed in an arbitrary
            directory.
          </p>
          <p>
            This section will demonstrate two different methods.
          </p>
          <div class="admonition">
            <div class="admonhead">
              <img alt="[Note]" src="../images/note.png" />
              <h3 class="note">
                Note
              </h3>
            </div>
            <div class="admonbody">
              <p>
                The build time for <span class="application">Qt</span> is
                quite long. If you want to save some time and don't want the
                tutorials and examples, change the first make line to:
              </p>
              <p>
                <tt class="userinput"><span><b class="command">make
                sub-tools</b></span></tt>
              </p>
            </div>
          </div>
          <div class="sect3" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title">
                    <a id="id2924722" name="id2924722"></a>Method 1 -
                    Installing in the <tt class="filename">/usr</tt>
                    hierarchy
                  </h4>
                </div>
              </div>
            </div>
            <p>
              The advantage of this method is that no updates to the
              <tt class="filename">/etc/ld.so.conf</tt> or <tt class=
              "filename">/etc/man.conf</tt> files are required. The package
              files are distributed within several subdirectories of the
              <tt class="filename">/usr</tt> hierarchy. This is the method
              that most commercial distributions use.
            </p>
            <pre class="screen">
<tt class="userinput"><span><b class=
"command">sed -i "s:cp -f:install:" mkspecs/linux-g++/qmake.conf &amp;&amp;
bash
export PATH=$PWD/bin:$PATH &amp;&amp;
export LD_LIBRARY_PATH=$PWD/lib:$LD_LIBRARY_PATH &amp;&amp;
./configure -prefix /usr -docdir /usr/share/doc/qt \
    -headerdir /usr/include/qt -plugindir /usr/lib/qt/plugins \
    -datadir /usr/share/qt -translationdir /usr/share/qt/translations \
    -sysconfdir /etc/qt -qt-gif -system-zlib \
    -no-exceptions -thread -plugin-imgfmt-png -system-libpng &amp;&amp;
find -type f -name Makefile | xargs sed -i "s@-Wl,-rpath,/usr/lib@@g" &amp;&amp;
make &amp;&amp;
make install &amp;&amp;
ln -sf libqt-mt.so /usr/lib/libqt.so &amp;&amp;
cp -r doc/man /usr/share &amp;&amp;
cp -r examples /usr/share/doc/qt &amp;&amp;
exit</b></span></tt>
</pre>
          </div>
          <div class="sect3" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title">
                    <a id="id2924798" name="id2924798"></a>Method 2 -
                    Installing in <tt class="filename">/opt</tt>
                  </h4>
                </div>
              </div>
            </div>
            <p>
              This is the method recommended by the <span class=
              "application">Qt</span> developers. It has the advantage of
              keeping all the package files consolidated in a dedicated
              directory hierarchy. By using this method, an update can be
              made without overwriting a previous installation and users can
              easily revert to a previous version by changing one symbolic
              link.
            </p>
            <p>
              The <span class="application">Qt</span> developers use a
              default location of <tt class="filename">/usr/local/qt/</tt>,
              however this procedure puts the files in <tt class=
              "filename">/opt/qt-3.3.2/</tt> and then creates a symbolic link
              to <tt class="filename">/opt/qt/</tt>.
            </p>
            <pre class="screen">
<tt class="userinput"><span><b class="command">bash
export QTDIR=$PWD &amp;&amp;
export LD_LIBRARY_PATH=$PWD/lib:$LD_LIBRARY_PATH &amp;&amp;
export PATH=$PWD/bin:$PATH &amp;&amp;
./configure -prefix /opt/qt-3.3.2 -qt-gif -system-libpng \
   -system-libmng -system-zlib -system-libjpeg -no-exceptions \
   -thread -plugin-imgfmt-png &amp;&amp;
make &amp;&amp;
make install &amp;&amp;
ln -sfn qt-3.3.2 /opt/qt &amp;&amp;
ln -s libqt-mt.so /opt/qt/lib/libqt.so &amp;&amp;
cp -r doc/man /opt/qt/doc &amp;&amp;
cp -r examples /opt/qt/doc
exit</b></span></tt>
</pre>
            <div class="sect4" lang="en" xml:lang="en">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title">
                      <a id="id2924868" name="id2924868"></a>Configuration
                    </h5>
                  </div>
                </div>
              </div>
              <p>
                For Method 2 only, update the <tt class=
                "filename">/etc/ld.so.conf</tt> and <tt class=
                "filename">/etc/man.conf</tt> files.
              </p>
              <pre class="screen">
<tt class="userinput"><span><b class=
"command">cat &gt;&gt; /etc/ld.so.conf &lt;&lt; "EOF"
# Begin qt addition to /etc/ld.so.conf

/opt/qt/lib

# End qt addition
EOF
ldconfig

cat &gt;&gt; /etc/man.conf &lt;&lt; "EOF"
# Begin qt addition to man.conf

MANPATH /opt/qt/doc/man

# End qt addition to man.conf
EOF</b></span></tt>
</pre>
              <p>
                Also, the <tt class="envar">QTDIR</tt> environment variable
                needs to be set when building packages that depend on Qt. Add
                the following to the <tt class="filename">.bash_profile</tt>
                initialization script for each user that builds packages
                using the <span class="application">Qt</span> libraries.
                Alternatively, the variable can be set in the system wide
                <tt class="filename">/etc/profile</tt> file.
              </p>
              <pre class="screen">
<tt class="userinput">export QTDIR=/opt/qt</tt>
</pre>
            </div>
          </div>
        </div>
        <div class="sect2" lang="en" xml:lang="en">
          <div class="titlepage">
            <h3 class="sect2">
              Command explanations
            </h3>
          </div>
          <p>
            <span><b class="command">sed -i "s:cp -f:install:"
            mkspecs/linux-g++/qmake.conf</b></span>: <span><b class=
            "command">install</b></span> is safer than <span><b class=
            "command">cp</b></span> when libraries are in use.
          </p>
          <p>
            <span><b class="command">bash</b></span>: This command enters a
            sub-shell to isolate environment changes.
          </p>
          <p>
            <span><b class="command">export QTDIR=$PWD</b></span>: This
            command defines where the root of the Qt directory is located.
          </p>
          <p>
            <span><b class="command">export
            LD_LIBRARY_PATH=$PWD/lib:$LD_LIBRARY_PATH</b></span>: This
            command allows the not yet installed qt libraries to be used by
            the not yet installed qt programs.
          </p>
          <p>
            <span><b class="command">export PATH=$PWD/bin:$PATH</b></span>:
            This command allows the build process to find supporting
            executables.
          </p>
          <p>
            <i class="parameter"><tt>-qt-gif</tt></i>: This switch adds
            support for gif files to the libraries.
          </p>
          <p>
            <i class="parameter"><tt>-system-zlib -system-libpng</tt></i>:
            This switch forces the build instructions to use the shared
            libraries that are on your system instead of creating a custom
            set of support libraries for these functions.
          </p>
          <p>
            <i class="parameter"><tt>-no-exceptions</tt></i>: This switch
            disables the exceptions coding generated by the <span class=
            "application">C++</span> compiler.
          </p>
          <p>
            <i class="parameter"><tt>-thread</tt></i>: This switch adds
            support for multi-threading.
          </p>
          <p>
            <span><b class="command">find -type f -name Makefile | xargs sed
            -i "s@-Wl,-rpath,/usr/lib@@g"</b></span>: This command removes
            hardcoded run-time paths. Otherwise, <span><b class=
            "command">uic</b></span> always tries to run with Qt libraries in
            <tt class="filename">/usr/lib</tt>.
          </p>
          <p>
            <span><b class="command">ln -s libqt-mt.so
            /usr/lib/libqt.so</b></span>: This command allows configure
            scripts to find a working <span class="application">Qt</span>
            installation.
          </p>
          <p>
            <span><b class="command">cp -r doc/man /usr/share (or
            /opt/qt/doc)</b></span>: This command installs the man pages
            which are missed by <span><b class="command">make
            install</b></span>.
          </p>
          <p>
            <span><b class="command">cp -r examples /usr/share/doc/qt (or
            /opt/qt/doc)</b></span>: This command installs the examples which
            are missed by <span><b class="command">make install</b></span>.
          </p>
          <p>
            <span><b class="command">exit</b></span>: This command returns to
            the parent shell and eliminates environment variables set
            earlier.
          </p>
        </div>
        <div class="sect2" lang="en" xml:lang="en">
          <div class="titlepage">
            <h3 class="sect2">
              Configuring Qt
            </h3>
          </div>
          <div class="sect3" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title">
                    <a id="id2925158" name="id2925158"></a>Configuration
                    Information
                  </h4>
                </div>
              </div>
            </div>
            <p>
              As with most libraries, there is no explicit configuration to
              do. After updating <tt class="filename">/etc/ld.so.conf</tt> as
              explained above, run <span><b class=
              "command">/sbin/ldconfig</b></span> so that <span><b class=
              "command">ldd</b></span> can find the shared libraries.
            </p>
          </div>
        </div>
        <div class="sect2" lang="en" xml:lang="en">
          <div class="titlepage">
            <h3 class="sect2">
              Contents
            </h3>
          </div>
          <p>
            The <span class="application">Qt</span>/<span class=
            "application">X11</span> library contains <span class=
            "acronym">API</span>s necessary to use programs based on the Qt
            <span class="acronym">GUI</span> toolkit.
          </p>
          <p>
            The <span class="application">Qt</span> package contains
            <span><b class="command">assistant</b></span>, <span><b class=
            "command">designer</b></span>, <span><b class=
            "command">linguist</b></span>, <span><b class=
            "command">lrelease</b></span>, <span><b class=
            "command">lupdate</b></span>, <span><b class=
            "command">moc</b></span>, <span><b class=
            "command">qm2ts</b></span>, <span><b class=
            "command">qmake</b></span>, <span><b class=
            "command">qtconfig</b></span>, <span><b class=
            "command">uic</b></span>, and the <tt class=
            "filename">libqt-mt</tt> and <tt class="filename">libqui</tt>
            libraries.
          </p>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <div class="prev">
        <a accesskey="p" href="xfree86-setup.html">Prev</a><br />
        X Window Components
      </div>
      <div class="next">
        <a accesskey="n" href="gtk.html">Next</a><br />
        GTK+-1.2.10
      </div>
      <div class="up">
        <a accesskey="u" href="x.html">Up</a>
      </div>
      <div class="home">
        <a accesskey="h" href="../index.html">Home</a>
      </div>
    </div>
  </body>
</html>
