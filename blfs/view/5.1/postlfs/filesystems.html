<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "text/html; charset=iso-8859-1" />
    <title>
      Chapter&nbsp;5.&nbsp;File Systems
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.65.1" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body>
    <div class="navheader">
      <div class="headertitles">
        <p>
          Beyond Linux From Scratch - Version 5.1
        </p>
        <p>
          <b>Part&nbsp;II.&nbsp;Post LFS Configuration and Extra Software</b>
        </p>
      </div>
      <div class="headerlinks">
        <div class="prev">
          <a accesskey="p" href="mitkrb.html">Prev</a>
        </div>
        <div class="next">
          <a accesskey="n" href="reiserfs.html">Next</a>
        </div>
        <div class="home">
          <a accesskey="h" href="../index.html">Home</a>
        </div>
      </div>
    </div>
    <div class="chapter" lang="en" xml:lang="en">
      <div class="titlepage">
        <h1 class="chapter">
          File Systems
        </h1>
      </div>
      <p>
        Journaling file systems reduce the time needed to recover a file
        system that was not unmounted properly. While this can be extremely
        important in reducing downtime for servers, it has also become
        popular for desktop environments. This chapter contains a variety of
        journaling file systems.
      </p>
      <div class="sect1" lang="en" xml:lang="en">
        <div class="titlepage">
          <a id="postlfs-filesystems-ext3" name=
          "postlfs-filesystems-ext3"></a>
          <h2 class="sect1">
            Ext3
          </h2>
        </div>
        <p>
          Ext3 is a journaling file system that is an extension to the ext2
          file system. It is backward compatible with ext2 and the conversion
          from ext2 to ext3 is trivial.
        </p>
        <p>
          You don't need to install anything to use ext3, all the required
          packages are available with a bare <span class="acronym">LFS</span>
          system.
        </p>
        <p>
          When building the kernel, ensure that you have compiled in ext3
          support. If you want your root partition to be ext3, then compile
          the ext3 support in the kernel, else you may compile it as a
          module. Recompile the kernel if needed.
        </p>
        <p>
          Edit your <tt class="filename">/etc/fstab</tt>. For each partition
          that you want to convert into ext3, edit the entry so that it looks
          similar to the following line.
        </p>
        <pre class="screen">
/dev/hd<i class="replaceable"><tt>XX</tt></i> /mnt_point ext3 defaults 1 0
</pre>
        <p>
          In the above line, replace <tt class="filename">/dev/hd<i class=
          "replaceable"><tt>XX</tt></i></tt> by the partition (e.g.,
          <tt class="filename">/dev/hda2</tt>), <tt class=
          "filename">/mnt_point</tt> by the mount point (e.g., <tt class=
          "filename">/home</tt>). The <tt class="option">0</tt> in the last
          field ensures that the partition will not be checked for
          consistency during the boot process by the <span><b class=
          "command">checkfs</b></span> script. You may replace the <tt class=
          "option">ext3</tt> fs type in the above by <tt class=
          "option">auto</tt> if you want to ensure that the partition is
          mounted if you accidentally skip enabling the ext3 support in the
          kernel.
        </p>
        <p>
          For each partition that you have converted to ext3 in <tt class=
          "filename">/etc/fstab</tt>, enable the journal for the partition by
          running the following command.
        </p>
        <pre class="screen">
<tt class="userinput"><span><b class="command">tune2fs -j /dev/hd<i class=
"replaceable"><tt>XX</tt></i></b></span></tt>
</pre>
        <p>
          Remount the concerned partitions, or simply reboot if you have
          recompiled the kernel to enable ext3 support.
        </p>
        <p>
          More information is available at <a href=
          "http://www.zip.com.au/~akpm/linux/ext3/ext3-usage.html">http://www.zip.com.au/~akpm/linux/ext3/ext3-usage.html</a>.
        </p>
      </div>
    </div>
    <div class="navfooter">
      <div class="prev">
        <a accesskey="p" href="mitkrb.html">Prev</a><br />
        MIT krb5-1.3.3
      </div>
      <div class="next">
        <a accesskey="n" href="reiserfs.html">Next</a><br />
        ReiserFS-3.6.14
      </div>
      <div class="up">
        <a accesskey="u" href="postlfs.html">Up</a>
      </div>
      <div class="home">
        <a accesskey="h" href="../index.html">Home</a>
      </div>
    </div>
  </body>
</html>
