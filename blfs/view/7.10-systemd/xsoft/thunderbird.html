<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Thunderbird-45.3.0
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-7.10">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch <span>(systemd edition)</span>
        - Version 7.10
      </h4>
      <h3>
        Chapter&nbsp;43.&nbsp;Other X-based Programs
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="rxvt-unicode.html" title=
          "rxvt-unicode-9.22">Prev</a>
          <p>
            rxvt-unicode-9.22
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="tigervnc.html" title=
          "Tigervnc-1.6.0">Next</a>
          <p>
            Tigervnc-1.6.0
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="other.html" title=
          "Chapter&nbsp;43.&nbsp;Other X-based Programs">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch (systemd edition) - Version 7.10">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="thunderbird" name="thunderbird"></a>Thunderbird-45.3.0
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to Thunderbird
        </h2>
        <p>
          <span class="application">Thunderbird</span> is a stand-alone
          mail/news client based on the <span class=
          "application">Mozilla</span> codebase. It uses the Gecko rendering
          engine to enable it to display and compose HTML emails.
        </p>
        <p>
          This package is known to build and work properly using an LFS-7.10
          platform.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download (HTTP): <a class="ulink" href=
                "https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/45.3.0/source/thunderbird-45.3.0.source.tar.xz">
                https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/45.3.0/source/thunderbird-45.3.0.source.tar.xz</a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: 3cdb5f1296ab3aabe0351e07b3572a4b
              </p>
            </li>
            <li>
              <p>
                Download size: 192 MB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 3.7 GB (80 MB installed)
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 13 SBU (with -j4, 37 SBU with -j1)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Thunderbird Dependencies
        </h3>
        <h4>
          Required
        </h4>
        <p class="required">
          <a class="xref" href="../multimedia/alsa-lib.html" title=
          "alsa-lib-1.1.2">alsa-lib-1.1.2</a>, <a class="xref" href=
          "../x/gtk2.html" title="GTK+-2.24.30">GTK+-2.24.30</a>, <a class=
          "xref" href="../general/zip.html" title="Zip-3.0">Zip-3.0</a>,
          <a class="xref" href="../general/unzip.html" title=
          "UnZip-6.0">UnZip-6.0</a>, and <a class="xref" href=
          "../general/yasm.html" title="yasm-1.3.0">yasm-1.3.0</a>
        </p>
        <h4>
          Recommended
        </h4>
        <p class="recommended">
          <a class="xref" href="../basicnet/libevent.html" title=
          "libevent-2.0.22">libevent-2.0.22</a>, <a class="xref" href=
          "../multimedia/libvpx.html" title="libvpx-1.6.0">libvpx-1.6.0</a>,
          <a class="xref" href="../general/nspr.html" title=
          "NSPR-4.12">NSPR-4.12</a>, and <a class="xref" href=
          "../postlfs/nss.html" title="NSS-3.26">NSS-3.26</a>
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            If you don't install recommended dependencies, then internal
            copies of those packages will be used. They might be tested to
            work, but they can be out of date or contain security holes.
          </p>
        </div>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            With <span class="application">Thunderbird-31.0</span> and later
            versions, you must have installed <span class=
            "application">Openssl</span> before <span class=
            "application">Python 2</span>, or the build system will quickly
            fail with output including "ImportError: cannot import name
            HTTPSHandler". If you are in any doubt about this (e.g. upgrading
            from an older version of Thunderbird), check if <code class=
            "filename">/usr/lib/python2.7/lib-dynload/_ssl.so</code> exists.
            If it does not, reinstall <a class="xref" href=
            "../general/python2.html" title="Python-2.7.12">Python-2.7.12</a>
            (after installing <a class="xref" href="../postlfs/openssl.html"
            title="OpenSSL-1.0.2h">OpenSSL-1.0.2h</a> - the latest version of
            any <span class="emphasis"><em>currently maintained</em></span>
            version of Openssl should be satisfactory if already installed -
            if that package has not already been installed).
          </p>
        </div>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="../basicnet/curl.html" title=
          "cURL-7.50.1">cURL-7.50.1</a>, <a class="xref" href=
          "../postlfs/cyrus-sasl.html" title="Cyrus SASL-2.1.26">Cyrus
          SASL-2.1.26</a>, <a class="xref" href="../general/dbus-glib.html"
          title="dbus-glib-0.106">dbus-glib-0.106</a>, <a class="xref" href=
          "../general/doxygen.html" title=
          "Doxygen-1.8.11">Doxygen-1.8.11</a>, <a class="xref" href=
          "../gnome/GConf.html" title="GConf-3.2.6">GConf-3.2.6</a>,
          <a class="xref" href="../multimedia/gst10-plugins-base.html" title=
          "gst-plugins-base-1.8.3">gst-plugins-base-1.8.3</a> (with <a class=
          "xref" href="../multimedia/gst10-plugins-good.html" title=
          "gst-plugins-good-1.8.3">gst-plugins-good-1.8.3</a> and <a class=
          "xref" href="../multimedia/gst10-libav.html" title=
          "gst-libav-1.8.3">gst-libav-1.8.3</a> at runtime), <a class="xref"
          href="../general/llvm.html" title="LLVM-3.8.1">LLVM-3.8.1</a>,
          <a class="xref" href="../general/openjdk.html" title=
          "OpenJDK-1.8.0.102">OpenJDK-1.8.0.102</a>, <a class="xref" href=
          "../multimedia/pulseaudio.html" title=
          "PulseAudio-9.0">PulseAudio-9.0</a>, <a class="xref" href=
          "../server/sqlite.html" title="SQLite-3.14.1">SQLite-3.14.1</a>
          (not recommended due to potential security concerns), <a class=
          "xref" href="../x/startup-notification.html" title=
          "startup-notification-0.12">startup-notification-0.12</a>,
          <a class="xref" href="../basicnet/wget.html" title=
          "Wget-1.18">Wget-1.18</a>, <a class="xref" href=
          "../basicnet/wireless_tools.html" title=
          "Wireless Tools-29">Wireless Tools-29</a>, and <a class="ulink"
          href="http://hunspell.sourceforge.net/">Hunspell</a>
        </p>
        <p class="usernotes">
          User Notes: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/Thunderbird">http://wiki.linuxfromscratch.org/blfs/wiki/Thunderbird</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of Thunderbird
        </h2>
        <p>
          The configuration of <span class="application">Thunderbird</span>
          is accomplished by creating a <code class=
          "filename">mozconfig</code> file containing the desired
          configuration options. A default <code class=
          "filename">mozconfig</code> is created below. To see the entire
          list of available configuration options (and a brief description of
          each), issue <span class="command"><strong>mozilla/configure
          --help</strong></span>. Create the file with the following command:
        </p>
        <pre class="userinput">
<kbd class="command">cat &gt; mozconfig &lt;&lt; "EOF"
<code class=
"literal"># If you have a multicore machine, the build may be faster if using parallel
# jobs. The build system automatically adds -jN to the "make" flags, where N
# is the number of CPU cores. The option below is therefore useless, unless
# you want to use a smaller number of jobs:
#mk_add_options MOZ_MAKE_FLAGS="-j1"

# If you have installed DBus-Glib comment out this line:
ac_add_options --disable-dbus

# If you have installed wireless-tools comment out this line:
ac_add_options --disable-necko-wifi

# GStreamer is necessary for H.264 video playback in HTML5 Video Player;
# to be enabled, also remember to set "media.gstreamer.enabled" to "true"
# in about:config. If you have GStreamer 1.x.y, comment out this line and
# uncomment the following one:
ac_add_options --disable-gstreamer
#ac_add_options --enable-gstreamer=1.0

# Uncomment these lines if you have installed optional dependencies:
#ac_add_options --enable-system-hunspell
#ac_add_options --enable-startup-notification

# Comment out following option if you have PulseAudio installed
ac_add_options --disable-pulseaudio

# Comment out following option if you have gconf installed
ac_add_options --disable-gconf

# If you want to compile the Mozilla Calendar, uncomment this line:
#ac_add_options --enable-calendar

# Comment out following options if you have not installed
# recommended dependencies:
# Do not use system SQLite for Thunderbird 45.x
#ac_add_options --enable-system-sqlite
ac_add_options --with-system-libevent
ac_add_options --with-system-libvpx
ac_add_options --with-system-nspr
ac_add_options --with-system-nss
ac_add_options --with-system-icu

# The BLFS editors recommend not changing anything below this line:
ac_add_options --prefix=/usr
ac_add_options --enable-application=mail

ac_add_options --disable-crashreporter
ac_add_options --disable-installer
ac_add_options --disable-updater
ac_add_options --disable-debug
ac_add_options --disable-tests

ac_add_options --enable-optimize
ac_add_options --enable-strip
ac_add_options --enable-install-strip

ac_add_options --enable-gio
ac_add_options --enable-official-branding
ac_add_options --enable-safe-browsing
ac_add_options --enable-url-classifier

# Use internal cairo due to reports of unstable execution with
# system cairo
#ac_add_options --enable-system-cairo
ac_add_options --enable-system-ffi
ac_add_options --enable-system-pixman

ac_add_options --with-pthreads

ac_add_options --with-system-bz2
ac_add_options --with-system-jpeg
ac_add_options --with-system-png
ac_add_options --with-system-zlib</code>
EOF</kbd>
</pre>
        <p>
          Compile <span class="application">Thunderbird</span> by issuing the
          following commands:
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            If you are compiling <span class="application">Thunderbird</span>
            in chroot, prepend <code class="envar">SHELL=/bin/sh</code> to
            the make command below.
          </p>
        </div>
        <pre class="userinput">
<kbd class="command">sed -e '/#include/i\
    print OUT "#define _GLIBCXX_INCLUDE_NEXT_C_HEADERS\\n"\;' \
    -i mozilla/nsprpub/config/make-system-wrappers.pl &amp;&amp;

sed -e '/#include/a\
    print OUT "#undef _GLIBCXX_INCLUDE_NEXT_C_HEADERS\\n"\;' \
    -i mozilla/nsprpub/config/make-system-wrappers.pl &amp;&amp;

export CFLAGS_HOLD=$CFLAGS &amp;&amp;
export CXXFLAGS_HOLD=$CXXFLAGS &amp;&amp;
export CFLAGS+=" -fno-delete-null-pointer-checks -fno-lifetime-dse -fno-schedule-insns2" &amp;&amp;
export CXXFLAGS+=" -fno-delete-null-pointer-checks -fno-lifetime-dse -fno-schedule-insns2" &amp;&amp;

make -f client.mk</kbd>
</pre>
        <p>
          This package does not come with a test suite.
        </p>
        <p>
          Install <span class="application">Thunderbird</span> by running the
          following commands as the <code class="systemitem">root</code>
          user:
        </p>
        <pre class="root">
<kbd class="command">make -f client.mk install INSTALL_SDK= &amp;&amp;
chown -R 0:0 /usr/lib/thunderbird-45.3.0 &amp;&amp;

export CFLAGS=$CFLAGS_HOLD &amp;&amp;
export CXXFLAGS=$CFLAGS_HOLD &amp;&amp;
unset CFLAGS_HOLD CXXFLAGS_HOLD</kbd>
</pre>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <span class="command"><strong>sed ...</strong></span>: These
          commands correct the source to be compatible with gcc6 by
          preventing c++ scope errors.
        </p>
        <p>
          <span class="command"><strong>export CFLAGS= ... export CXXFLAGS=
          ...</strong></span>: These settings work around code which gcc6
          would otherwise regard as out-of-specification and allow it to
          produce a working program.
        </p>
        <p>
          <span class="command"><strong>make -f client.mk</strong></span>:
          Mozilla products are packaged to allow the use of a configuration
          file which can be used to pass the configuration settings to the
          <span class="command"><strong>configure</strong></span> command.
          <span class="command"><strong>make</strong></span> uses the
          <code class="filename">client.mk</code> file to get initial
          configuration and setup parameters.
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <h2 class="sect2">
          Configuring Thunderbird
        </h2>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            Configuration Information
          </h3>
          <p>
            If your Window or Desktop Manager does not allow you to configure
            a default browser, you can add a configuration parameter to
            <span class="application">Thunderbird</span> so that a browser
            will start when when you click on an Internet/intranet/local URL.
            The procedure to check or modify any of the configuration
            parameters is quite simple and the instructions here can be used
            to view or modify any of the parameters.
          </p>
          <p>
            First, open the configuration dialog by opening the
            &ldquo;<span class="quote">Edit</span>&rdquo; drop-down menu.
            Choose &ldquo;<span class="quote">Preferences</span>&rdquo; and
            then click on the &ldquo;<span class=
            "quote">Advanced</span>&rdquo; icon on the top menu bar. Choose
            the &ldquo;<span class="quote">General</span>&rdquo; tab and
            click on the &ldquo;<span class="quote">Config
            Editor</span>&rdquo; button. This will display a list of the
            configuration preferences and information related to each one.
            You can use the &ldquo;<span class="quote">Filter:</span>&rdquo;
            bar to enter search criteria and narrow down the listed items.
            Changing a preference can be done using two methods. One, if the
            preference has a boolean value (True/False), simply double-click
            on the preference to toggle the value and two, for other
            preferences simply right-click on the desired line, choose
            &ldquo;<span class="quote">Modify</span>&rdquo; from the menu and
            change the value. Creating new preference items is accomplished
            in the same way, except choose &ldquo;<span class=
            "quote">New</span>&rdquo; from the menu and provide the desired
            data into the fields when prompted.
          </p>
          <p>
            The configuration preference item you need to check so that
            <span class="application">Thunderbird</span> uses a specified
            browser is the <em class=
            "parameter"><code>network.protocol-handler.app.http</code></em>
            which should be set to the path of the desired browser, e.g.
            <code class="option">/usr/bin/firefox</code>.
          </p>
          <div class="admon tip">
            <img alt="[Tip]" src="../images/tip.png" />
            <h3>
              Tip
            </h3>
            <p>
              There is a multitude of configuration parameters you can tweak
              to customize <span class="application">Thunderbird</span>. A
              very extensive, but not so up-to-date list of these parameters
              can be found at <a class="ulink" href=
              "http://preferential.mozdev.org/preferences.html">http://preferential.mozdev.org/preferences.html</a>.
            </p>
          </div>
          <p>
            If you use a desktop environment such as <span class=
            "application">GNOME</span> or <span class=
            "application">KDE</span>, a desktop file <code class=
            "filename">thunderbird.desktop</code> may be created, in order to
            include a &ldquo;<span class="quote"><span class=
            "application">Thunderbird</span></span>&rdquo; entry in the menu.
            If you didn't enable <span class=
            "application">startup-notification</span> in your mozconfig, then
            change the StartupNotify line to false. Run the following
            commands as the <code class="systemitem">root</code> user:
          </p>
          <pre class="root">
<kbd class="command">mkdir -pv /usr/share/{applications,pixmaps} &amp;&amp;

cat &gt; /usr/share/applications/thunderbird.desktop &lt;&lt; "EOF" &amp;&amp;
<code class="literal">[Desktop Entry]
Encoding=UTF-8
Name=Thunderbird Mail
Comment=Send and receive mail with Thunderbird
GenericName=Mail Client
Exec=thunderbird %u
Terminal=false
Type=Application
Icon=thunderbird
Categories=Application;Network;Email;
MimeType=application/xhtml+xml;text/xml;application/xhtml+xml;application/xml;application/rss+xml;x-scheme-handler/mailto;
StartupNotify=true</code>
EOF

ln -sfv /usr/lib/thunderbird-45.3.0/chrome/icons/default/default256.png \
        /usr/share/pixmaps/thunderbird.png</kbd>
</pre>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Program:</strong>
              <span class="segbody">thunderbird</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">None</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directory:</strong>
              <span class="segbody">/usr/lib/thunderbird-45.3.0</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="thunderbird-prog" name=
                    "thunderbird-prog"></a><span class="term"><span class=
                    "command"><strong>thunderbird</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is <span class="application">Mozilla</span>'s email and
                    newsgroup client.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2016-08-31 22:06:40 -0700
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="rxvt-unicode.html" title=
          "rxvt-unicode-9.22">Prev</a>
          <p>
            rxvt-unicode-9.22
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="tigervnc.html" title=
          "Tigervnc-1.6.0">Next</a>
          <p>
            Tigervnc-1.6.0
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="other.html" title=
          "Chapter&nbsp;43.&nbsp;Other X-based Programs">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch (systemd edition) - Version 7.10">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
