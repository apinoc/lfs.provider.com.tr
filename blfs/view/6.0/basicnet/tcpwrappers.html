<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "text/html; charset=iso-8859-1" />
    <title>
      tcpwrappers-7.6
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.67.2" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="blfs" class="6.0">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Beyond Linux From Scratch - Version 6.0
        </h4>
        <h3>
          Chapter&nbsp;18.&nbsp;Basic Networking Programs
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="wget.html" title="Wget-1.9.1">Prev</a>
          <p>
            Wget-1.9.1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="portmap.html" title="portmap-5beta">Next</a>
          <p>
            portmap-5beta
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="netprogs.html" title=
          "Chapter&nbsp;18.&nbsp;Basic Networking Programs">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.0">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <a id="tcpwrappers" name="tcpwrappers"></a>
        <h1 class="sect1">
          tcpwrappers-7.6
        </h1>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Introduction to tcpwrappers
          </h2>
        </div>
        <p>
          The <span class="application">tcpwrappers</span> package provides
          daemon wrapper programs that report the name of the client
          requesting network services and the requested service.
        </p>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2675456" name="id2675456"></a>Package information
                </h4>
              </div>
            </div>
          </div>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  Download (HTTP): <a href=
                  "http://files.ichilton.co.uk/nfs/tcp_wrappers_7.6.tar.gz"><span class="url">
                  http://files.ichilton.co.uk/nfs/tcp_wrappers_7.6.tar.gz</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download (FTP): <a href=
                  "ftp://ftp.porcupine.org/pub/security/tcp_wrappers_7.6.tar.gz">
                  <span class=
                  "url">ftp://ftp.porcupine.org/pub/security/tcp_wrappers_7.6.tar.gz</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download MD5 Sum: e6fa25f71226d090f34de3f6b122fb5a
                </p>
              </li>
              <li>
                <p>
                  Download size: 97 KB
                </p>
              </li>
              <li>
                <p>
                  Estimated disk space required: 1.04 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated build time: 0.02 SBU
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2623256" name="id2623256"></a>Additional downloads
                </h4>
              </div>
            </div>
          </div>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  Required Patch (Fixes some build issues and adds building
                  of a shared library): <a href=
                  "http://www.linuxfromscratch.org/blfs/downloads/6.0/tcp_wrappers-7.6-shared_lib_plus_plus-1.patch">
                  <span class=
                  "url">http://www.linuxfromscratch.org/blfs/downloads/6.0/tcp_wrappers-7.6-shared_lib_plus_plus-1.patch</span></a>
                </p>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Installation of tcpwrappers
          </h2>
        </div>
        <p>
          Install <span class="application">tcpwrappers</span> with the
          following commands:
        </p>
        <pre class="userinput"><kbd class="command"><span><strong class=
        "command">patch -Np1 -i ../tcp_wrappers-7.6-shared_lib_plus_plus-1.patch &amp;&amp;
sed -i -e "s,^extern char \*malloc();,/* &amp; */," scaffold.c &amp;&amp;
make REAL_DAEMON_DIR=/usr/sbin STYLE=-DPROCESS_OPTIONS linux &amp;&amp;
make install</strong></span></kbd></pre>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Command explanations
          </h2>
        </div>
        <p>
          <span><strong class="command">sed -i -e ...
          scaffold.c</strong></span>: This command removes an obsolete C
          declaration which causes the build to fail if using <span class=
          "application"><span class="acronym">GCC</span>-3.4.x</span>.
        </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Configuring tcpwrappers
          </h2>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2663835" name="id2663835"></a>Config files
                </h4>
              </div>
            </div>
          </div>
          <p>
            <tt class="filename">/etc/hosts.allow</tt>, <tt class=
            "filename">/etc/hosts.deny</tt>
          </p>
          <p>
            File protections: the wrapper, all files used by the wrapper, and
            all directories in the path leading to those files, should be
            accessible but not writable for unprivileged users (mode 755 or
            mode 555). Do not install the wrapper set-uid.
          </p>
          <p>
            Then perform the following edits on the <tt class=
            "filename">/etc/inetd.conf</tt> configuration file:
          </p>
          <pre class="userinput"><kbd class=
          "command">finger stream tcp nowait nobody /usr/sbin/in.fingerd in.fingerd</kbd></pre>
          <p>
            becomes:
          </p>
          <pre class="userinput"><kbd class=
          "command">finger stream tcp nowait nobody /usr/sbin/tcpd in.fingerd</kbd></pre>
          <div class="note">
            <div class="admonhead">
              <img alt="[Note]" src="../images/note.png" />
              <h3 class="admontitle">
                Note
              </h3>
            </div>
            <div class="admonbody">
              <p>
                The finger server is used as an example here.
              </p>
            </div>
          </div>
          <p>
            Similar changes must be made if <span class=
            "application">xinetd</span> is used, with the emphasis being on
            calling <span><strong class=
            "command">/usr/sbin/tcpd</strong></span> instead of calling the
            service daemon directly, and passing the name of the service
            daemon to <span><strong class="command">tcpd</strong></span>.
          </p>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Contents
          </h2>
        </div>
        <p>
          The <span class="application">tcpwrappers</span> package contains
          <span><strong class="command">tcpd</strong></span>,
          <span><strong class="command">tcpdchk</strong></span>,
          <span><strong class="command">tcpdmatch</strong></span>,
          <span><strong class="command">try-from</strong></span>,
          <span><strong class="command">safe_finger</strong></span> and the
          <tt class="filename">libwrap</tt> libraries.
        </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Description
          </h2>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2650119" name="id2650119"></a>tcpd
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">tcpd</strong></span> is the main
            access control daemon for all Internet services, which
            <span><strong class="command">inetd</strong></span> or
            <span><strong class="command">xinetd</strong></span> will run
            instead of running the requested service daemon.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2643528" name="id2643528"></a>tcpdchk
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">tcpdchk</strong></span> is a tool
            to examine a <span><strong class="command">tcpd</strong></span>
            wrapper configuration and report problems with it.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2582838" name="id2582838"></a>tcpdmatch
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">tcpdmatch</strong></span> is used
            to predict how the tcp wrapper would handle a specific request
            for a service.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2644835" name="id2644835"></a>try-from
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">try-from</strong></span> can be
            called via a remote shell command to find out if the host name
            and address are properly recognized.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2757693" name="id2757693"></a>safe_finger
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">safe_finger</strong></span> is a
            wrapper for the <span><strong class=
            "command">finger</strong></span> utility, to provide automatic
            reverse name lookups.
          </p>
        </div>
      </div>
      <p class="updated">
        Last updated on 2005-02-28 13:39:06 -0700
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="wget.html" title="Wget-1.9.1">Prev</a>
          <p>
            Wget-1.9.1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="portmap.html" title="portmap-5beta">Next</a>
          <p>
            portmap-5beta
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="netprogs.html" title=
          "Chapter&nbsp;18.&nbsp;Basic Networking Programs">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.0">Home</a>.
        </li>
      </ul>
    </div>
  </body>
</html>
