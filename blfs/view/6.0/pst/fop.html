<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "text/html; charset=iso-8859-1" />
    <title>
      FOP-0.20.5
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.67.2" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="blfs" class="6.0">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Beyond Linux From Scratch - Version 6.0
        </h4>
        <h3>
          Chapter&nbsp;45.&nbsp;PostScript
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="xpdf.html" title="Xpdf-3.00pl3">Prev</a>
          <p>
            Xpdf-3.00pl3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="otherps.html" title=
          "Other PostScript programs">Next</a>
          <p>
            Other PostScript programs
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="ps.html" title=
          "Chapter&nbsp;45.&nbsp;PostScript">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.0">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <a id="fop" name="fop"></a>
        <h1 class="sect1">
          FOP-0.20.5
        </h1>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Introduction to FOP
          </h2>
        </div>
        <p>
          The <span class="application"><span class=
          "acronym">FOP</span></span> (Formatting Objects Processor) package
          contains a print formatter driven by <span class=
          "acronym">XSL</span> formatting objects (<span class=
          "acronym">XSL</span>-<span class="acronym">FO</span>). It is a
          <span class="application">Java</span> application that reads a
          formatting object tree and renders the resulting pages to a
          specified output. Output formats currently supported include
          <span class="acronym">PDF</span>, <span class="acronym">PCL</span>,
          PostScript, <span class="acronym">SVG</span>, <span class=
          "acronym">XML</span> (area tree representation), print,
          <span class="acronym">AWT</span>, <span class="acronym">MIF</span>
          and <span class="acronym">ASCII</span> text. The primary output
          target is <span class="acronym">PDF</span>.
        </p>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2694029" name="id2694029"></a>Package information
                </h4>
              </div>
            </div>
          </div>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  Download (HTTP): <a href=
                  "http://www.apache.org/dist/xml/fop/fop-0.20.5-src.tar.gz"><span class="url">
                  http://www.apache.org/dist/xml/fop/fop-0.20.5-src.tar.gz</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download (FTP): <a href=
                  "ftp://apache.mirrors.pair.com/xml/fop/source/fop-0.20.5-src.tar.gz">
                  <span class=
                  "url">ftp://apache.mirrors.pair.com/xml/fop/source/fop-0.20.5-src.tar.gz</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download MD5 sum: 1a31eb1357e5d4b8d32d4cb3edae2da2
                </p>
              </li>
              <li>
                <p>
                  Download size: 7.8 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated disk space required: 45.3 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated build time: 0.25 SBU
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2900460" name="id2900460"></a>Additional downloads
                </h4>
              </div>
            </div>
          </div>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  <span class="application">Java</span> Advanced Imaging
                  (<span class="acronym">JAI</span>) <span class=
                  "acronym">API</span> components: <a href=
                  "http://javashoplm.sun.com/ECom/docs/Welcome.jsp?StoreId=22&amp;PartDetailId=jai-1_1_2_01-oth-JPR&amp;SiteId=JSC&amp;TransactionId=noreg">
                  <span class=
                  "url">http://javashoplm.sun.com/ECom/docs/Welcome.jsp?StoreId=22&amp;</span></a>
                  <a href=
                  "http://javashoplm.sun.com/ECom/docs/Welcome.jsp?StoreId=22&amp;PartDetailId=jai-1_1_2_01-oth-JPR&amp;SiteId=JSC&amp;TransactionId=noreg">
                  <span class=
                  "url">PartDetailId=jai-1_1_2_01-oth-JPR&amp;SiteId=JSC&amp;TransactionId=noreg</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download MD5 sum: f2be3619a8d002eff3874355e96327eb
                </p>
              </li>
              <li>
                <p>
                  Download size: 2.6 MB
                </p>
              </li>
            </ul>
          </div>
          <p>
            Choose the &ldquo;<span class="quote"><span class=
            "application">Linux</span> <span class="application"><span class=
            "acronym">JDK</span></span> Install</span>&rdquo; file after
            accepting the license agreement.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2757304" name="id2757304"></a><span class=
                  "application">FOP</span> dependencies
                </h4>
              </div>
            </div>
          </div>
          <div class="sect4" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h5 class="title">
                    <a id="id2897540" name="id2897540"></a>Required
                  </h5>
                </div>
              </div>
            </div>
            <p>
              <a href="../general/j2sdk.html">J2SDK-1.4.2</a>
            </p>
          </div>
          <div class="sect4" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h5 class="title">
                    <a id="id2727232" name="id2727232"></a>Optional
                  </h5>
                </div>
              </div>
            </div>
            <p>
              <a href="../general/libxslt.html">libxslt-1.1.12</a>, <a href=
              "http://java.sun.com/products/jimi/"><span class="url">JIMI
              SDK</span></a>, <a href=
              "http://xml.apache.org/batik/"><span class=
              "url">Batik</span></a> and <a href=
              "http://forrest.apache.org/"><span class=
              "url">Forrest</span></a> (only used to rebuild the
              documentation)
            </p>
          </div>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Installation of FOP
          </h2>
        </div>
        <div class="note">
          <div class="admonhead">
            <img alt="[Note]" src="../images/note.png" />
            <h3 class="admontitle">
              Note
            </h3>
          </div>
          <div class="admonbody">
            <p>
              Ensure <tt class="envar">$JAVA_HOME</tt> is set correctly
              before beginning the build. Additionally, the build will fail
              if your version of the <span class="acronym">JDK</span> is
              higher than 1.4.2_x.
            </p>
          </div>
        </div>
        <p>
          Some versions of tar will display a message similar to
          &ldquo;<span class="quote"><tt class="computeroutput">tar: A lone
          zero block at 33476</tt></span>&rdquo; when unpacking the source
          tarball. You may safely ignore this message.
        </p>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2727904" name="id2727904"></a>Installing
                  <span class="acronym">JAI</span>
                </h4>
              </div>
            </div>
          </div>
          <p>
            Install the <span class="acronym">JAI</span> components by
            running the following commands as the root user while in the root
            of the <span class="application"><span class=
            "acronym">FOP</span></span> source tree:
          </p>
          <pre class="userinput"><kbd class="command"><span><strong class=
          "command">chmod 755 ../jai-1_1_2_01-lib-linux-i586-jdk.bin &amp;&amp;
FOP_BUILD_DIR=$(pwd) &amp;&amp;
cd $JAVA_HOME &amp;&amp;
yes | $FOP_BUILD_DIR/../jai-1_1_2_01-lib-linux-i586-jdk.bin &amp;&amp;
cd $FOP_BUILD_DIR</strong></span></kbd></pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2913186" name="id2913186"></a>Installing
                  <span class="application"><span class=
                  "acronym">FOP</span></span> required components
                </h4>
              </div>
            </div>
          </div>
          <p>
            Install <span class="application"><span class=
            "acronym">FOP</span></span> by running the following commands:
          </p>
          <pre class="userinput"><kbd class="command"><span><strong class=
          "command">./build.sh &amp;&amp;
sed -i -e "s/build/lib/" fop.sh</strong></span></kbd></pre>
          <p>
            Now, as the root user:
          </p>
          <pre class="userinput"><kbd class="command"><span><strong class=
          "command">install -v -d -m755 \
    /opt/fop-0.20.5/{bin,lib,docs/{general,lib,site}} &amp;&amp;
install -v -m755 fop.sh /opt/fop-0.20.5/bin &amp;&amp;
install -v -m644 build/fop.jar lib/avalon-framework-cvs-20020806.jar \
    /opt/fop-0.20.5/lib &amp;&amp;
install -v -m644 docs/* /opt/fop-0.20.5/docs &amp;&amp;
install -v -m644 CHANGES LICENSE README ReleaseNotes.html STATUS \
    /opt/fop-0.20.5/docs/general &amp;&amp;
install -v -m644 lib/{avalon.LICENSE.txt,readme} \
    /opt/fop-0.20.5/docs/lib &amp;&amp;
cp -v -R build/site/* /opt/fop-0.20.5/docs/site &amp;&amp;
ln -svf fop-0.20.5 /opt/fop</strong></span></kbd></pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2622108" name="id2622108"></a>Installing the
                  <span class="application">Batik</span> <span class=
                  "acronym">JAR</span>
                </h4>
              </div>
            </div>
          </div>
          <p>
            You'll need to install one additional <span class=
            "application">Java</span> class library to process <span class=
            "acronym">SVG</span> objects. This library is part of the
            <a href="http://xml.apache.org/batik/"><span class=
            "url">Batik</span></a> package, but is also included with the
            <span class="application"><span class="acronym">FOP</span></span>
            package. If you have <span class="application">Batik</span>
            installed, ensure the <tt class="filename">batik.jar</tt> library
            is included in your <tt class="envar">$CLASSPATH</tt> environment
            variable. Alternatively, create a symbolic link from <tt class=
            "filename">/opt/fop-0.20.5/lib/batik.jar</tt> pointing to the
            full path of the installed <tt class="filename">batik.jar</tt>
            file so that the <span><strong class=
            "command">fop.sh</strong></span> script will automatically pick
            it up.
          </p>
          <p>
            If you don't have the <span class="application">Batik</span>
            package installed, run the following commands as the root user:
          </p>
          <pre class="userinput"><kbd class="command"><span><strong class=
          "command">install -v -m644 lib/batik.jar /opt/fop-0.20.5/lib &amp;&amp;
install -v -m644 lib/batik.LICENSE.txt \
    /opt/fop-0.20.5/docs/lib</strong></span></kbd></pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2766629" name="id2766629"></a>Installing the
                  <span class="application">Xalan-Java</span> components
                </h4>
              </div>
            </div>
          </div>
          <p>
            The components of <span class="application"><span class=
            "acronym">FOP</span></span> required to process <span class=
            "acronym">FO</span> files created by an <span class=
            "acronym">XSL</span> transformation engine (also known as an
            <span class="acronym">XSLT</span> processor) is now complete. An
            <span class="acronym">XSL</span> transformation engine
            (<span><strong class="command">xsltproc</strong></span>) is
            included with the <a href=
            "../general/libxslt.html">libxslt-1.1.12</a> package in
            <span class="acronym">BLFS</span>. The <span class=
            "application"><span class="acronym">FOP</span></span> package
            includes components of <a href=
            "http://xml.apache.org/xalan-j/"><span class=
            "url">Xalan-Java</span></a> to accomplish <span class=
            "acronym">XSL</span> transformations. If you have the
            <span class="application">Xalan-Java</span> package installed,
            skip to the next section.
          </p>
          <p>
            If you wish to install the <span class=
            "application">Xalan-Java</span> components provided by the
            <span class="application"><span class="acronym">FOP</span></span>
            package, run the following commands as the root user:
          </p>
          <pre class="userinput"><kbd class="command"><span><strong class=
          "command">sed -i -e "s/build/lib/" xalan.sh &amp;&amp;
install -v -m755 xalan.sh /opt/fop-0.20.5/bin &amp;&amp;
install -v -m644 lib/xml-apis.jar \
                 lib/xercesImpl-2.2.1.jar \
                 lib/xalan-2.4.1.jar \
    /opt/fop-0.20.5/lib &amp;&amp;
install -v -m644 lib/{xml-apis,xerces,xalan}.LICENSE.txt \
                 lib/xml-apis.README.txt \
    /opt/fop-0.20.5/docs/lib</strong></span></kbd></pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2864804" name="id2864804"></a>Installing the
                  <span class="application">Jimi <span class=
                  "acronym">SDK</span></span> <span class=
                  "acronym">JAR</span>
                </h4>
              </div>
            </div>
          </div>
          <p>
            If you installed the Java Image I/O class library (<span class=
            "application">Jimi <span class="acronym">SDK</span></span>) into
            the <span class="application"><span class=
            "acronym">FOP</span></span> source tree <tt class=
            "filename">lib</tt> directory before building <span class=
            "application"><span class="acronym">FOP</span></span> (this will
            enable Jimi support), ensure you also install this <span class=
            "acronym">JAR</span> file into <tt class=
            "filename">/opt/fop-0.20.5/lib</tt>.
          </p>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Command explanations
          </h2>
        </div>
        <p>
          <span><strong class="command">yes |
          $FOP_BUILD_DIR/../jai-...-jdk.bin</strong></span>: This command
          installs the <span class="application"><span class=
          "acronym">JAI</span></span> components into the <span class=
          "application"><span class="acronym">JDK</span></span> file
          structure. The <span><strong class="command">yes</strong></span>
          command is piped through so that you don't have to scroll through
          four pages of the license agreement and automatically responds
          &ldquo;<span class="quote">yes</span>&rdquo; to the agreement.
          <tt class="envar">$FOP_BUILD_DIR</tt> is used as a reference point
          to the source executable and as a method to return back to the
          <span class="application"><span class="acronym">FOP</span></span>
          source tree.
        </p>
        <p>
          <span><strong class="command">sed -i -e "s/build/lib/"
          ...</strong></span>: These commands modify the installed shell
          scripts so that the location of the installed <tt class=
          "filename">fop.jar</tt> file is correctly identified.
        </p>
        <p>
          <span><strong class="command">install -v ...; cp -v
          ...</strong></span>: There is no installation script provided by
          the <span class="application"><span class=
          "acronym">FOP</span></span> package. These commands install the
          package.
        </p>
        <p>
          <span><strong class="command">ln -svf fop-0.20.5
          /opt/fop</strong></span>: This creates a convenience symlink so
          that <tt class="envar">$FOP_HOME</tt> doesn't have to be changed
          each time there's a package version change.
        </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Configuring FOP
          </h2>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="fop-config" name="fop-config"></a>Config files
                </h4>
              </div>
            </div>
          </div>
          <p>
            <tt class="filename">~/.foprc</tt>
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2982696" name="id2982696"></a>Configuration
                  Information
                </h4>
              </div>
            </div>
          </div>
          <p>
            Using <span class="application"><span class=
            "acronym">FOP</span></span> to process some large <span class=
            "acronym">FO</span>'s (including the <span class=
            "acronym">FO</span> derived from the <span class=
            "acronym">BLFS</span> <span class="acronym">XML</span> sources),
            can lead to memory errors. Unless you add a parameter to the
            <span><strong class="command">java</strong></span> command used
            in the <span><strong class="command">fop.sh</strong></span>
            script you may receive messages similar to the one shown below:
          </p>
          <p>
            <tt class="computeroutput">Exception in thread "main"
            java.lang.OutOfMemoryError: Java heap space</tt>
          </p>
          <p>
            To avoid errors like this, you need to pass an extra parameter to
            the <span><strong class="command">java</strong></span> command
            used in the <span><strong class="command">fop.sh</strong></span>
            script. This can be accomplished by creating a <tt class=
            "filename">~/.foprc</tt> (which is sourced by the
            <span><strong class="command">fop.sh</strong></span> script) and
            adding the parameter to the <tt class="envar">FOP_OPTS</tt>
            environment variable.
          </p>
          <p>
            The <span><strong class="command">fop.sh</strong></span> script
            looks for a <tt class="envar">FOP_HOME</tt> environment variable
            to locate the <span class="application"><span class=
            "acronym">FOP</span></span> class libraries. You can create this
            variable using the <tt class="filename">~/.foprc</tt> file as
            well. Create a <tt class="filename">~/.foprc</tt> file using the
            following commands:
          </p>
          <pre class="userinput"><kbd class="command"><span><strong class=
          "command">cat &gt; ~/.foprc &lt;&lt; "EOF"</strong></span>
FOP_OPTS="-Xmx<em class="replaceable"><tt>[RAM_Installed]</tt></em>m"
FOP_HOME="/opt/fop"

<span><strong class="command">EOF</strong></span></kbd></pre>
          <p>
            Replace <em class="replaceable"><tt>[RAM_Installed]</tt></em>
            with a number representing the amount of RAM installed in your
            computer. An example would be <strong class=
            "userinput"><tt>FOP_OPTS="-Xmx768m"</tt></strong>. For more
            information about memory issues running <span class=
            "application"><span class="acronym">FOP</span></span>, see
            <a href=
            "http://xml.apache.org/fop/running.html#memory"><span class=
            "url">http://xml.apache.org/fop/running.html#memory</span></a>.
          </p>
          <p>
            To include the <span><strong class=
            "command">fop.sh</strong></span> script in your path, update your
            personal or system-wide profile with the following:
          </p>
          <pre class="userinput"><kbd class=
          "command">PATH=$PATH:/opt/fop/bin</kbd></pre>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Contents
          </h2>
        </div>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong><span class="segtitle">Installed
              Programs:</span></strong> <span class="seg">fop.sh and
              xalan.sh</span>
            </div>
            <div class="seg">
              <strong><span class="segtitle">Installed
              Libraries:</span></strong> <span class=
              "seg">avalon-framework-cvs-20020806.jar, batik.jar, fop.jar,
              xalan-2.4.1.jar, xercesImpl-2.2.1.jar and xml-apis.jar.
              <span class="acronym">JAI</span> components include
              libmlib_jai.so, jai_codec.jar, jai_core.jar and
              mlibwrapper_jai.jar</span>
            </div>
            <div class="seg">
              <strong><span class="segtitle">Installed
              Directory:</span></strong> <span class=
              "seg">/opt/fop-0.20.5</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            <a id="id2859352" name="id2859352"></a>Short Descriptions
          </h3>
          <dl>
            <dt>
              <a id="fop.sh" name="fop.sh"></a><span class=
              "term"><span><strong class=
              "command">fop.sh</strong></span></span>
            </dt>
            <dd>
              <p>
                is a wrapper script to the <span><strong class=
                "command">java</strong></span> command which sets up the
                <span class="application"><span class=
                "acronym">FOP</span></span> environment and passes the
                required parameters.
              </p>
            </dd>
            <dt>
              <a id="fop.jar" name="fop.jar"></a><span class=
              "term"><tt class="filename">fop.jar</tt></span>
            </dt>
            <dd>
              <p>
                contains all the <span class="application"><span class=
                "acronym">FOP</span></span> <span class=
                "application">Java</span> classes.
              </p>
            </dd>
          </dl>
        </div>
      </div>
      <p class="updated">
        Last updated on 2005-02-16 14:46:41 -0700
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="xpdf.html" title="Xpdf-3.00pl3">Prev</a>
          <p>
            Xpdf-3.00pl3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="otherps.html" title=
          "Other PostScript programs">Next</a>
          <p>
            Other PostScript programs
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="ps.html" title=
          "Chapter&nbsp;45.&nbsp;PostScript">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.0">Home</a>.
        </li>
      </ul>
    </div>
  </body>
</html>
