<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "text/html; charset=iso-8859-1" />
    <title>
      OpenLDAP-2.2.20
    </title>
    <link rel="stylesheet" href="../stylesheets/blfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.67.2" />
    <link rel="stylesheet" href="../stylesheets/blfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body id="blfs" class="6.0">
    <div class="navheader">
      <div class="headertitles">
        <h4>
          Beyond Linux From Scratch - Version 6.0
        </h4>
        <h3>
          Chapter&nbsp;22.&nbsp;Other Server Software
        </h3>
      </div>
      <ul class="headerlinks">
        <li class="prev">
          <a accesskey="p" href="rsync.html" title="rsync-2.6.3">Prev</a>
          <p>
            rsync-2.6.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="samba3.html" title="Samba-3.0.11">Next</a>
          <p>
            Samba-3.0.11
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="other.html" title=
          "Chapter&nbsp;22.&nbsp;Other Server Software">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.0">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <a id="openldap" name="openldap"></a>
        <h1 class="sect1">
          OpenLDAP-2.2.20
        </h1>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Introduction to OpenLDAP
          </h2>
        </div>
        <p>
          The <span class="application">Open<span class=
          "acronym">LDAP</span></span> package provides an open source
          implementation of the Lightweight Directory Access Protocol.
        </p>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2729115" name="id2729115"></a>Package information
                </h4>
              </div>
            </div>
          </div>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  Download (HTTP): <a href=
                  "http://gd.tuwien.ac.at/infosys/network/OpenLDAP/openldap-release/openldap-2.2.20.tgz">
                  <span class=
                  "url">http://gd.tuwien.ac.at/infosys/network/OpenLDAP/openldap-release/openldap-2.2.20.tgz</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download (FTP): <a href=
                  "ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-2.2.20.tgz">
                  <span class=
                  "url">ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-2.2.20.tgz</span></a>
                </p>
              </li>
              <li>
                <p>
                  Download MD5 sum: bd45020a47061ea1c1e14e2f6204a0f9
                </p>
              </li>
              <li>
                <p>
                  Download size: 2.5 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated disk space required: 67 MB
                </p>
              </li>
              <li>
                <p>
                  Estimated build time: 6.42 SBU
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2753611" name="id2753611"></a><span class=
                  "application">Open<span class="acronym">LDAP</span></span>
                  dependencies
                </h4>
              </div>
            </div>
          </div>
          <div class="sect4" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h5 class="title">
                    <a id="id2571341" name="id2571341"></a>Required
                  </h5>
                </div>
              </div>
            </div>
            <p>
              <a href="../content/databases.html#db">Berkeley DB-4.3.27</a>
            </p>
          </div>
          <div class="sect4" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h5 class="title">
                    <a id="id2796460" name="id2796460"></a>Recommended
                  </h5>
                </div>
              </div>
            </div>
            <p>
              <a href="../postlfs/cyrus-sasl.html">Cyrus SASL-2.1.20</a> and
              <a href="../postlfs/security.html#openssl">OpenSSL-0.9.7e</a>
            </p>
          </div>
          <div class="sect4" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h5 class="title">
                    <a id="id2712326" name="id2712326"></a>Optional
                  </h5>
                </div>
              </div>
            </div>
            <p>
              <a href="../basicnet/tcpwrappers.html">tcpwrappers-7.6</a>,
              <a href="../general/gdbm.html">GDBM-1.8.3</a>, <a href=
              "http://www.gnu.org/software/pth/"><span class="url">GNU
              Pth</span></a>, and <a href=
              "../postlfs/heimdal.html">Heimdal-0.6.3</a> or <a href=
              "../postlfs/mitkrb.html">MIT krb5-1.4</a>
            </p>
          </div>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Installation of OpenLDAP
          </h2>
        </div>
        <p>
          Install <span class="application">Open<span class=
          "acronym">LDAP</span></span> by running the following commands:
        </p>
        <pre class="userinput"><kbd class="command"><span><strong class=
        "command">./configure --prefix=/usr --libexecdir=/usr/sbin \
    --sysconfdir=/etc --localstatedir=/srv/ldap \
    --enable-ldbm --disable-debug &amp;&amp;
make depend &amp;&amp;
make &amp;&amp;
make test &amp;&amp;
make install &amp;&amp;
chmod 755 /usr/lib/libl*-2.2.so.7.0.13</strong></span></kbd></pre>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Command explanations
          </h2>
        </div>
        <p>
          <em class="parameter"><tt>--libexecdir=/usr/sbin</tt></em>:
          Installs the server executables in <tt class=
          "filename">/usr/sbin</tt> instead of <tt class=
          "filename">/usr/libexec</tt>.
        </p>
        <p>
          <em class="parameter"><tt>--sysconfdir=/etc</tt></em>: Sets the
          configuration file directory to avoid the default of <tt class=
          "filename">/usr/etc</tt>.
        </p>
        <p>
          <em class="parameter"><tt>--localstatedir=/srv/ldap</tt></em>: Sets
          the directory to use for the <span class="acronym">LDAP</span>
          directory database, replication logs and run-time variable data.
        </p>
        <p>
          <em class="parameter"><tt>--enable-ldbm</tt></em>: Build
          <span><strong class="command">slapd</strong></span> with the
          primary database back end using either <span class=
          "application">Berkeley DB</span> or <span class=
          "application"><span class="acronym">GNU</span> Database
          Manager</span>.
        </p>
        <p>
          <em class="parameter"><tt>--disable-debug</tt></em>: Disable
          debugging code.
        </p>
        <p>
          <span><strong class="command">make test</strong></span>: Validates
          the correct build of the package. If you've enabled <span class=
          "application">tcp_wrappers</span>, ensure you add 127.0.0.1 to the
          <em class="parameter"><tt>slapd</tt></em> line in the <tt class=
          "filename">/etc/hosts.allow</tt> file if you have a restrictive
          <tt class="filename">/etc/hosts.deny</tt> file.
        </p>
        <p>
          <span><strong class="command">chmod 755
          /usr/lib/libl*-2.2.so.7.0.10</strong></span>: This command adds the
          executable bit to the shared libraries.
        </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Configuring OpenLDAP
          </h2>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2648731" name="id2648731"></a>Config files
                </h4>
              </div>
            </div>
          </div>
          <p>
            <tt class="filename">/etc/openldap/*</tt>
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2735691" name="id2735691"></a>Configuration
                  Information
                </h4>
              </div>
            </div>
          </div>
          <p>
            Configuring the <span><strong class=
            "command">slapd</strong></span> and <span><strong class=
            "command">slurpd</strong></span> servers can be complex. Securing
            the <span class="acronym">LDAP</span> directory, especially if
            you are storing non-public data such as password databases, can
            also be a challenging task. You'll need to modify the <tt class=
            "filename">/etc/openldap/slapd.conf</tt> and <tt class=
            "filename">/etc/openldap/ldap.conf</tt> files to set up
            <span class="application">Open<span class=
            "acronym">LDAP</span></span> for your particular needs.
          </p>
          <p>
            Resources to assist you with topics such as choosing a directory
            configuration, backend and database definitions, access control
            settings, running as a user other than root and setting a
            <span><strong class="command">chroot</strong></span> environment
            include:
          </p>
          <div class="itemizedlist">
            <ul compact="compact">
              <li>
                <p>
                  The <span><strong class="command">slapd</strong></span> man
                  page
                </p>
              </li>
              <li>
                <p>
                  The <tt class="filename">slapd.conf</tt> man page
                </p>
              </li>
              <li>
                <p>
                  The <a href=
                  "http://www.openldap.org/doc/admin22/"><span class=
                  "url">OpenLDAP 2.2 Administrator's Guide</span></a>
                </p>
              </li>
              <li>
                <p>
                  Documents located at <a href=
                  "http://www.openldap.org/pub/"><span class=
                  "url">http://www.openldap.org/pub/</span></a>
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2804912" name="id2804912"></a>Utilizing
                  <span class="application">GDBM</span>
                </h4>
              </div>
            </div>
          </div>
          <p>
            To utilize <span class="application">GDBM</span> as the database
            backend, the &ldquo;<span class="quote">database</span>&rdquo;
            entry in <tt class="filename">/etc/openldap/slapd.conf</tt> must
            be changed from &ldquo;<span class="quote">bdb</span>&rdquo; to
            &ldquo;<span class="quote">ldbm</span>&rdquo;. You can use both
            by creating an additional database section in <tt class=
            "filename">/etc/openldap/slapd.conf</tt>.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2586739" name="id2586739"></a><span class=
                  "application">Mozilla</span> Address Directory
                </h4>
              </div>
            </div>
          </div>
          <p>
            By default, <span class="acronym">LDAP</span>v2 support is
            disabled in the <tt class="filename">slapd.conf</tt> file. Once
            the database is properly set up and <span class=
            "application">Mozilla</span> is configured to use the directory,
            you must add <tt class="option">allow bind_v2</tt> to the
            <tt class="filename">slapd.conf</tt> file.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2753159" name="id2753159"></a>Init Script
                </h4>
              </div>
            </div>
          </div>
          <p>
            To automate the startup of the <span class="acronym">LDAP</span>
            server at system bootup, install the <tt class=
            "filename">/etc/rc.d/init.d/openldap</tt> init script included in
            the <a href=
            "../introduction/bootscripts.html">blfs-bootscripts-6.0</a>
            package using the following command:
          </p>
          <pre class="userinput"><kbd class="command"><span><strong class=
          "command">make install-openldap1</strong></span></kbd></pre>
          <p>
            <span class="emphasis"><em>Note:</em></span> The init script you
            just installed only starts the <span><strong class=
            "command">slapd</strong></span> daemon. If you wish to also start
            the <span><strong class="command">slurpd</strong></span> daemon
            at system startup, install a modified version of the script using
            this command:
          </p>
          <pre class="userinput"><kbd class="command"><span><strong class=
          "command">make install-openldap2</strong></span></kbd></pre>
          <div class="note">
            <div class="admonhead">
              <img alt="[Note]" src="../images/note.png" />
              <h3 class="admontitle">
                Note
              </h3>
            </div>
            <div class="admonbody">
              <p>
                The init script starts the daemons without any parameters.
                You'll need to modify the script to include the parameters
                needed for your specific configuration. See the
                <span><strong class="command">slapd</strong></span> and
                <span><strong class="command">slurpd</strong></span> man
                pages for parameter information.
              </p>
            </div>
          </div>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2793465" name="id2793465"></a>Testing the
                  Configuration
                </h4>
              </div>
            </div>
          </div>
          <p>
            Start the <span class="acronym">LDAP</span> server using the init
            script:
          </p>
          <pre class="userinput"><kbd class="command"><span><strong class=
          "command">/etc/rc.d/init.d/openldap start</strong></span></kbd></pre>
          <p>
            Verify access to the <span class="acronym">LDAP</span> server
            with the following command:
          </p>
          <pre class="userinput"><kbd class="command"><span><strong class=
          "command">ldapsearch -x -b '' -s base '(objectclass=*)' namingContexts</strong></span></kbd></pre>
          <p>
            The expected result is:
          </p>
          <pre class="screen"><tt class="computeroutput"># extended LDIF
#
# LDAPv3
# base &lt;&gt; with scope base
# filter: (objectclass=*)
# requesting: namingContexts 
#

#
dn:
namingContexts: dc=my-domain,dc=com

# search result
search: 2
result: 0 Success

# numResponses: 2
# numEntries: 1</tt></pre>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Contents
          </h2>
        </div>
        <p>
          The Open<span class="acronym">LDAP</span> package contains
          <span><strong class="command">ldapadd</strong></span>,
          <span><strong class="command">ldapcompare</strong></span>,
          <span><strong class="command">ldapdelete</strong></span>,
          <span><strong class="command">ldapmodify</strong></span>,
          <span><strong class="command">ldapmodrdn</strong></span>,
          <span><strong class="command">ldappasswd</strong></span>,
          <span><strong class="command">ldapsearch</strong></span>,
          <span><strong class="command">ldapwhoami</strong></span>,
          <span><strong class="command">slapadd</strong></span>,
          <span><strong class="command">slapcat</strong></span>,
          <span><strong class="command">slapd</strong></span>,
          <span><strong class="command">slapdn</strong></span>,
          <span><strong class="command">slapindex</strong></span>,
          <span><strong class="command">slappasswd</strong></span>,
          <span><strong class="command">slaptest</strong></span>,
          <span><strong class="command">slurpd</strong></span>, <tt class=
          "filename">liblber</tt> and the <tt class="filename">libldap</tt>
          libraries.
        </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <h2 class="sect2">
            Description
          </h2>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2567498" name="id2567498"></a>ldapadd
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">ldapadd</strong></span> opens a
            connection to an <span class="acronym">LDAP</span> server, binds
            and adds entries.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2625917" name="id2625917"></a>ldapcompare
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">ldapcompare</strong></span> opens a
            connection to an <span class="acronym">LDAP</span> server, binds
            and performs a compare using specified parameters.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2691393" name="id2691393"></a>ldapdelete
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">ldapdelete</strong></span> opens a
            connection to an <span class="acronym">LDAP</span> server, binds
            and deletes one or more entries.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2745697" name="id2745697"></a>ldapmodify
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">ldapmodify</strong></span> opens a
            connection to an <span class="acronym">LDAP</span> server, binds
            and modifies entries.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2762114" name="id2762114"></a>ldapmodrdn
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">ldapmodrdn</strong></span> opens a
            connection to an <span class="acronym">LDAP</span> server, binds
            and modifies the <span class="acronym">RDN</span> of entries.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2580097" name="id2580097"></a>ldappasswd
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">ldappasswd</strong></span> is a
            tool to set the password of an <span class="acronym">LDAP</span>
            user.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2687415" name="id2687415"></a>ldapsearch
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">ldapsearch</strong></span> opens a
            connection to an <span class="acronym">LDAP</span> server, binds
            and performs a search using specified parameters.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2565109" name="id2565109"></a>ldapwhoami
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">ldapwhoami</strong></span> opens a
            connection to an <span class="acronym">LDAP</span> server, binds
            and displays whoami information.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2750576" name="id2750576"></a>slapadd
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">slapadd</strong></span> is used to
            add entries specified in <span class="acronym">LDAP</span>
            Directory Interchange Format (<span class="acronym">LDIF</span>)
            to an <span class="acronym">LDAP</span> database.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2730195" name="id2730195"></a>slapcat
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">slapcat</strong></span> is used to
            generate an <span class="acronym">LDAP</span> <span class=
            "acronym">LDIF</span> output based upon the contents of a slapd
            database.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2600707" name="id2600707"></a>slapd
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">slapd</strong></span> is the
            stand-alone <span class="acronym">LDAP</span> server.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2820738" name="id2820738"></a>slapdn
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">slapdn</strong></span> checks a
            list of string-represented <span class="acronym">DN</span>s based
            on schema syntax.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2558484" name="id2558484"></a>slapindex
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">slapindex</strong></span> is used
            to regenerate slapd indices based upon the current contents of a
            database.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2645425" name="id2645425"></a>slappasswd
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">slappasswd</strong></span> is an
            Open<span class="acronym">LDAP</span> password utility.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2609151" name="id2609151"></a>slaptest
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">slaptest</strong></span> checks the
            sanity of the <tt class="filename">slapd.conf</tt> file.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2742491" name="id2742491"></a>slurpd
                </h4>
              </div>
            </div>
          </div>
          <p>
            <span><strong class="command">slurpd</strong></span> is the
            stand-alone <span class="acronym">LDAP</span> replication server.
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title">
                  <a id="id2630285" name="id2630285"></a>liblber and libldap
                </h4>
              </div>
            </div>
          </div>
          <p>
            These libraries support the <span class="acronym">LDAP</span>
            programs and provide functionality for other programs interacting
            with <span class="acronym">LDAP</span>.
          </p>
        </div>
      </div>
      <p class="updated">
        Last updated on 2005-02-12 00:50:52 -0700
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="rsync.html" title="rsync-2.6.3">Prev</a>
          <p>
            rsync-2.6.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="samba3.html" title="Samba-3.0.11">Next</a>
          <p>
            Samba-3.0.11
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="other.html" title=
          "Chapter&nbsp;22.&nbsp;Other Server Software">Up</a>.
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.0">Home</a>.
        </li>
      </ul>
    </div>
  </body>
</html>
