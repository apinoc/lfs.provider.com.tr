<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      LLVM-3.7.1
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-7.9">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch - Version 7.9
      </h4>
      <h3>
        Chapter&nbsp;13.&nbsp;Programming
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="librep.html" title="Librep-0.92.5">Prev</a>
          <p>
            Librep-0.92.5
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="lua.html" title="Lua-5.3.2">Next</a>
          <p>
            Lua-5.3.2
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapter&nbsp;13.&nbsp;Programming">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 7.9">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="llvm" name="llvm"></a>LLVM-3.7.1
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to LLVM
        </h2>
        <p>
          The <span class="application">LLVM</span> package contains a
          collection of modular and reusable compiler and toolchain
          technologies. The Low Level Virtual Machine (LLVM) Core libraries
          provide a modern source and target-independent optimizer, along
          with code generation support for many popular CPUs (as well as some
          less common ones!). These libraries are built around a well
          specified code representation known as the LLVM intermediate
          representation ("LLVM IR").
        </p>
        <p>
          The optional <span class="application">Clang</span> and
          <span class="application">Compiler RT</span> packages provide a new
          C, C++, Objective C and Objective C++ front-ends and runtime
          libraries for the <span class="application">LLVM</span>.
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            This package hits a bug in GCC-4.9.0 or an unpatched GCC-4.9.1.
            To build this package, GCC needs to be updated if you have one of
            these versions. See <a class="xref" href="gcc.html" title=
            "GCC-5.3.0">GCC-5.3.0</a> for <span class=
            "application">gcc</span> installation instructions.
          </p>
        </div>
        <p>
          This package is known to build and work properly using an LFS-7.9
          platform.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download (HTTP): <a class="ulink" href=
                "http://llvm.org/releases/3.7.1/llvm-3.7.1.src.tar.xz">http://llvm.org/releases/3.7.1/llvm-3.7.1.src.tar.xz</a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: bf8b3a2c79e61212c5409041dfdbd319
              </p>
            </li>
            <li>
              <p>
                Download size: 14 MB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 1.6 GB (with Clang and tests)
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 13 SBU (with Clang, tests and
                parallelism = 4)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Optional Downloads
        </h3>
        <h4>
          Clang
        </h4>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download: <a class="ulink" href=
                "http://llvm.org/releases/3.7.1/cfe-3.7.1.src.tar.xz">http://llvm.org/releases/3.7.1/cfe-3.7.1.src.tar.xz</a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: 0acd026b5529164197563d135a8fd83e
              </p>
            </li>
            <li>
              <p>
                Download size: 8.7 MB
              </p>
            </li>
          </ul>
        </div>
        <h4>
          Compiler RT
        </h4>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download: <a class="ulink" href=
                "http://llvm.org/releases/3.7.1/compiler-rt-3.7.1.src.tar.xz">
                http://llvm.org/releases/3.7.1/compiler-rt-3.7.1.src.tar.xz</a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: 1c6975daf30bb3b0473b53c3a1a6ff01
              </p>
            </li>
            <li>
              <p>
                Download size: 1.2 MB
              </p>
            </li>
          </ul>
        </div>
        <h3>
          LLVM Dependencies
        </h3>
        <h4>
          Recommended
        </h4>
        <p class="recommended">
          <a class="xref" href="libffi.html" title=
          "libffi-3.2.1">libffi-3.2.1</a> and <a class="xref" href=
          "python2.html" title="Python-2.7.11">Python-2.7.11</a>
        </p>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="cmake.html" title=
          "CMake-3.4.3">CMake-3.4.3</a>, <a class="xref" href="doxygen.html"
          title="Doxygen-1.8.11">Doxygen-1.8.11</a>, <a class="xref" href=
          "graphviz.html" title="Graphviz-2.38.0">Graphviz-2.38.0</a>,
          <a class="xref" href="libxml2.html" title=
          "libxml2-2.9.3">libxml2-2.9.3</a>, <a class="xref" href=
          "../pst/texlive.html" title=
          "texlive-20150521-source">texlive-20150521</a> (or <a class="xref"
          href="../pst/tl-installer.html" title=
          "install-tl-unx">install-tl-unx</a>), <a class="xref" href=
          "valgrind.html" title="Valgrind-3.11.0">Valgrind-3.11.0</a>,
          <a class="xref" href="zip.html" title="Zip-3.0">Zip-3.0</a>,
          <a class="ulink" href="http://www.ocaml.org/">OCaml</a>, and
          <a class="ulink" href=
          "http://pypi.python.org/pypi/Sphinx">Sphinx</a>
        </p>
        <p class="usernotes">
          User Notes: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/llvm">http://wiki.linuxfromscratch.org/blfs/wiki/llvm</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of LLVM
        </h2>
        <p>
          If you have downloaded the optional packages, install them into the
          source tree by running the following commands:
        </p>
        <pre class="userinput">
<kbd class="command">tar -xf ../cfe-3.7.1.src.tar.xz -C tools &amp;&amp;
tar -xf ../compiler-rt-3.7.1.src.tar.xz -C projects &amp;&amp;

mv tools/cfe-3.7.1.src tools/clang &amp;&amp;
mv projects/compiler-rt-3.7.1.src projects/compiler-rt</kbd>
</pre>
        <p>
          The run-time library needs to be fixed for 32 bit installations:
        </p>
        <pre class="userinput">
<kbd class="command">sed -r "/ifeq.*CompilerTargetArch/s#i386#i686#g" \
    -i projects/compiler-rt/make/platform/clang_linux.mk</kbd>
</pre>
        <p>
          Install <span class="application">LLVM</span> by running the
          following commands:
        </p>
        <pre class="userinput">
<kbd class="command">sed -e "s:/docs/llvm:/share/doc/llvm-3.7.1:" \
    -i Makefile.config.in &amp;&amp;

mkdir -v build &amp;&amp;
cd       build &amp;&amp;

CC=gcc CXX=g++                          \
../configure --prefix=/usr              \
             --datarootdir=/usr/share   \
             --sysconfdir=/etc          \
             --enable-libffi            \
             --enable-optimized         \
             --enable-shared            \
             --enable-targets=host,r600 \
             --disable-assertions       \
             --docdir=/usr/share/doc/llvm-3.7.1 &amp;&amp;
make</kbd>
</pre>
        <p>
          If you have installed <span class="application">Sphinx</span> and
          wish to generate manual pages, issue the following command:
        </p>
        <pre class="userinput">
<kbd class="command">make -C ../docs -f Makefile.sphinx man</kbd>
</pre>
        <p>
          To test the results, issue: <span class="command"><strong>make -k
          check-all</strong></span>. Some tests may fail for unknown reasons.
        </p>
        <p>
          Now, as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root">
<kbd class="command">make install &amp;&amp;

for file in /usr/lib/lib{clang,LLVM,LTO}*.a
do
  test -f $file &amp;&amp; chmod -v 644 $file
done
unset file</kbd>
</pre>
        <p>
          If you had <a class="xref" href="python2.html" title=
          "Python-2.7.11">Python-2.7.11</a> installed and you have built
          <span class="application">Clang</span>, install the <span class=
          "application">Clang Analyzer</span> by running the following
          command as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root">
<kbd class="command">install -v -dm755 /usr/lib/clang-analyzer &amp;&amp;

for prog in scan-build scan-view
do
  cp -rfv ../tools/clang/tools/$prog /usr/lib/clang-analyzer/ &amp;&amp;
  ln -sfv ../lib/clang-analyzer/$prog/$prog /usr/bin/
done
unset prog &amp;&amp;

ln -sfv /usr/bin/clang \
        /usr/lib/clang-analyzer/scan-build/ &amp;&amp;
mv -v   /usr/lib/clang-analyzer/scan-build/scan-build.1 \
        /usr/share/man/man1/</kbd>
</pre>
        <p>
          If you have built manual pages, install them by running the
          following command as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root">
<kbd class=
"command">install -v -m644 ../docs/_build/man/* /usr/share/man/man1/</kbd>
</pre>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <span class="command"><strong>sed -e ...
          Makefile.config.in</strong></span>: This sed fixes location of the
          installed documentation.
        </p>
        <p>
          <em class="parameter"><code>--enable-libffi</code></em>: This
          switch enables <span class="application">LLVM</span> to use
          <span class="application">libffi</span>. Remove if you did not
          install <span class="application">libffi</span>.
        </p>
        <p>
          <em class="parameter"><code>--enable-optimized</code></em>: This
          switch enables compiler optimizations in order to speed up the code
          and reduce its size.
        </p>
        <p>
          <em class="parameter"><code>--enable-shared</code></em>: This
          switch enables building of the <span class=
          "application">LLVM</span> shared library which contains all of the
          static libraries linked into a single library.
        </p>
        <p>
          <em class="parameter"><code>--enable-targets=host,r600</code></em>:
          This switch enables building for the same target as the host, and
          also for the r600 AMD GPU used by the Mesa r600 and radeonsi
          drivers. Default is all. You can use a comma separated list. Valid
          targets are: host, x86, x86_64, sparc, powerpc, arm64, arm,
          aarch64, mips, hexagon, xcore, msp430, nvptx, systemz, r600, amdgpu
          (equivalent to r600), bpf, wasm, and cpp.
        </p>
        <p>
          <em class="parameter"><code>--disable-assertions</code></em>:
          Disable some compile checks, not necessary on a production system.
        </p>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">bugpoint, c-index-test, clang, clang++
              (symlink), count, FileCheck, clang-check, clang-format,
              clang-tblgen, llc, lli, lli-child-target, llvm-ar, llvm-as,
              llvm-bcanalyzer, llvm-config, llvm-cov, llvm-cxxdump,
              llvm-diff, llvm-dis, llvm-dsymutil, llvm-dwarfdump,
              llvm-extract, llvm-link, llvm-mc, llvm-mcmarkup, llvm-nm,
              llvm-objdump, llvm-pdbdump, llvm-profdata, llvm-ranlib
              (symlink), llvm-readobj, llvm-rtdyld, llvm-size, llvm-stress,
              llvm-symbolizer, llvm-tblgen, macho-dump, not, obj2yaml, opt,
              scan-build (symlink), scan-view (symlink), verify-uselistorder,
              and yaml2obj</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">BugpointPasses.so, libclang.so,
              libLLVM-3.7.1.so, libLTO.so, LLVMHello.so and numerous static
              libraries in /usr/lib</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/usr/include/{clang,clang-c,llvm,llvm-c},
              /usr/lib/{clang,clang-analyzer}, and
              /usr/share/{doc/llvm-3.7.1,llvm}</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="bugpoint" name="bugpoint"></a><span class=
                    "term"><span class=
                    "command"><strong>bugpoint</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the automatic test case reduction tool.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="clang" name="clang"></a><span class=
                    "term"><span class=
                    "command"><strong>clang</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the <span class="application">Clang</span> C, C++, and
                    Objective-C compiler.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llc" name="llc"></a><span class=
                    "term"><span class="command"><strong>llc</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the <span class="application">LLVM</span> static
                    compiler.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="lli" name="lli"></a><span class=
                    "term"><span class="command"><strong>lli</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used to directly execute programs from <span class=
                    "application">LLVM</span> bitcode.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-ar" name="llvm-ar"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-ar</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the <span class="application">LLVM</span> archiver.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-as" name="llvm-as"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-as</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the <span class="application">LLVM</span> assembler.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-bcanalyzer" name=
                    "llvm-bcanalyzer"></a><span class="term"><span class=
                    "command"><strong>llvm-bcanalyzer</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the <span class="application">LLVM</span> bitcode
                    analyzer.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-config" name="llvm-config"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-config</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    Prints <span class="application">LLVM</span> compilation
                    options.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-cov" name="llvm-cov"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-cov</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used to emit coverage information.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-cxxdump" name="llvm-cxxdump"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-cxxdump</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used for C++ ABI Data Dumper.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-diff" name="llvm-diff"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-diff</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the <span class="application">LLVM</span> structural
                    '<span class="command"><strong>diff</strong></span>'.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-dis" name="llvm-dis"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-dis</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the <span class="application">LLVM</span>
                    disassembler.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-dsymutil" name=
                    "llvm-dsymutil"></a><span class="term"><span class=
                    "command"><strong>llvm-dsymutil</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    tool used to manipulate archived DWARF debug symbol
                    files, compatible with the Darwin command <span class=
                    "command"><strong>dsymutil</strong></span>.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-extract" name="llvm-extract"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-extract</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used to extract a function from an <span class=
                    "application">LLVM</span> module.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-link" name="llvm-link"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-link</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the <span class="application">LLVM</span> linker.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-nm" name="llvm-nm"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-nm</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used to list <span class="application">LLVM</span>
                    bitcode and object file's symbol table.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-pdbdump" name="llvm-pdbdump"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-pdbdump</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used as PDB Dumper.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-ranlib" name="llvm-ranlib"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-ranlib</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used to generate index for <span class=
                    "application">LLVM</span> archive.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-stress" name="llvm-stress"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-stress</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used to generate random <code class=
                    "filename">.ll</code> files.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="llvm-tblgen" name="llvm-tblgen"></a><span class=
                    "term"><span class=
                    "command"><strong>llvm-tblgen</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the <span class="application">LLVM</span> Target
                    Description To C++ Code Generator.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="obj2yaml" name="obj2yaml"></a><span class=
                    "term"><span class=
                    "command"><strong>obj2yaml</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    takes an object file,and produces a YAML representation
                    of the file.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="opt" name="opt"></a><span class=
                    "term"><span class="command"><strong>opt</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the <span class="application">LLVM</span> optimizer.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="scan-build" name="scan-build"></a><span class=
                    "term"><span class=
                    "command"><strong>scan-build</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a <span class="application">Perl</span> script that
                    invokes the <span class="application">Clang</span> static
                    analyzer.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="yaml2obj" name="yaml2obj"></a><span class=
                    "term"><span class=
                    "command"><strong>yaml2obj</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    takes a YAML representation of an object file and
                    converts it to an binary file.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libllvm" name="libllvm"></a><span class=
                    "term"><code class=
                    "filename">libLLVM-3.7.1.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    contains the <span class="application">LLVM</span> API
                    functions.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2016-02-22 14:52:02 -0800
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="librep.html" title="Librep-0.92.5">Prev</a>
          <p>
            Librep-0.92.5
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="lua.html" title="Lua-5.3.2">Next</a>
          <p>
            Lua-5.3.2
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapter&nbsp;13.&nbsp;Programming">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 7.9">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
