<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      DHCP-3.0.6
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-6.3">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch - Version 6.3
      </h4>
      <h3>
        Chapter&nbsp;22.&nbsp;Other Server Software
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="other.html" title=
          "Other Server Software">Prev</a>
          <p>
            Other Server Software
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="leafnode.html" title=
          "Leafnode-1.11.5">Next</a>
          <p>
            Leafnode-1.11.5
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="other.html" title=
          "Chapter&nbsp;22.&nbsp;Other Server Software">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.3">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="dhcp" name="dhcp"></a>DHCP-3.0.6
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to DHCP
        </h2>
        <p>
          The <span class="application">DHCP</span> package contains both the
          client and server programs for DHCP. <span class=
          "command"><strong>dhclient</strong></span> (the client) is useful
          for connecting your computer to a network which uses DHCP to assign
          network addresses. <span class=
          "command"><strong>dhcpd</strong></span> (the server) is useful for
          assigning network addresses on your private network.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download (HTTP): <a class="ulink" href=
                "http://gd.tuwien.ac.at/infosys/servers/isc/dhcp/dhcp-3.0.6.tar.gz">
                http://gd.tuwien.ac.at/infosys/servers/isc/dhcp/dhcp-3.0.6.tar.gz</a>
              </p>
            </li>
            <li>
              <p>
                Download (FTP): <a class="ulink" href=
                "ftp://ftp.isc.org/isc/dhcp/dhcp-3.0.6.tar.gz">ftp://ftp.isc.org/isc/dhcp/dhcp-3.0.6.tar.gz</a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: 724bad21ad8b638abadd5fcc07df1a0f
              </p>
            </li>
            <li>
              <p>
                Download size: 876 KB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 21 MB
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 0.1 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Additional Downloads
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Required Patch: <a class="ulink" href=
                "http://www.linuxfromscratch.org/patches/blfs/6.3/dhcp-3.0.6-client_dns-1.patch">
                http://www.linuxfromscratch.org/patches/blfs/6.3/dhcp-3.0.6-client_dns-1.patch</a>
              </p>
            </li>
            <li>
              <p>
                Optional Patch: <a class="ulink" href=
                "http://www.linuxfromscratch.org/patches/blfs/6.3/dhcp-3.0.6-iproute2-1.patch">
                http://www.linuxfromscratch.org/patches/blfs/6.3/dhcp-3.0.6-iproute2-1.patch</a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          DHCP Dependencies
        </h3>
        <h4>
          Required
        </h4>
        <p class="required">
          <a class="xref" href="../basicnet/net-tools.html" title=
          "Net-tools-1.60">Net-tools-1.60</a> (you may omit <span class=
          "application">net-tools</span> by using the optional patch to
          utilize <span class="application">iproute2</span>.
        </p>
        <p class="usernotes">
          User Notes: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/dhcp">http://wiki.linuxfromscratch.org/blfs/wiki/dhcp</a>
        </p>
      </div>
      <div class="kernel" lang="en" xml:lang="en">
        <h2 class="sect2">
          <a id="dhcp-kernel" name="dhcp-kernel"></a>Kernel Configuration
        </h2>
        <p>
          You must have Packet Socket support (Device Drivers &rArr;
          Networking Support &rArr; Networking Options &rArr; Packet Socket)
          compiled into the kernel.
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of DHCP
        </h2>
        <p>
          First fix a problem with always regenerating /etc/resolv.conf
          whether the DNS server has changed or not.
        </p>
        <pre class="userinput">
<kbd class="command">patch -Np1 -i ../dhcp-3.0.6-client_dns-1.patch</kbd>
</pre>
        <p>
          If you chose not to install net-tools, apply the iproute2 patch:
        </p>
        <pre class="userinput">
<kbd class="command">patch -Np1 -i ../dhcp-3.0.6-iproute2-1.patch</kbd>
</pre>
        <p>
          Install <span class="application">DHCP</span> by running the
          following commands:
        </p>
        <pre class="userinput">
<kbd class="command">./configure &amp;&amp;
make</kbd>
</pre>
        <p>
          This package does not come with a test suite.
        </p>
        <p>
          Now, as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root">
<kbd class="command">make LIBDIR=/usr/lib INCDIR=/usr/include install</kbd>
</pre>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <em class="parameter"><code>LIBDIR=/usr/lib
          INCDIR=/usr/include</code></em>: This command installs the library
          and include files in <code class="filename">/usr</code> instead of
          <code class="filename">/usr/local</code>.
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <h2 class="sect2">
          Configuring DHCP
        </h2>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            <a id="dhcp-config" name="dhcp-config"></a>Config Files
          </h3>
          <p>
            <code class="filename">/etc/dhclient.conf</code> and <code class=
            "filename">/etc/dhcpd.conf</code>
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            <a id="dhcp-init" name="dhcp-init"></a>Configuration Information
          </h3>
          <p>
            Information on configuring the DHCP client can be found in
            <a class="xref" href="../basicnet/connect.html" title=
            "Chapter&nbsp;13.&nbsp;Connecting to a Network">Chapter&nbsp;13,
            Connecting to a Network</a>.
          </p>
          <p>
            Note that you only need the DHCP server if you want to issue LAN
            addresses over your network. The DHCP client doesn't need this
            script to be used. Also note that this script is coded for the
            <span class="strong"><strong>eth1</strong></span> interface,
            which may need to be modified for your hardware configuration.
          </p>
          <p>
            Install the <code class="filename">/etc/rc.d/init.d/dhcp</code>
            init script included in the <a class="xref" href=
            "../introduction/bootscripts.html" title=
            "BLFS Boot Scripts">blfs-bootscripts-20080816</a> package.
          </p>
          <pre class="root">
<kbd class="command">make install-dhcp</kbd>
</pre>
          <p>
            The lease file must exist on startup. The following command will
            satisfy that requirement:
          </p>
          <pre class="root">
<kbd class="command">touch /var/state/dhcp/dhcpd.leases</kbd>
</pre>
          <p>
            The following commands will create a base configuration file for
            a DHCP server. There are several options that you may want to add
            (information that is passed back to the DHCP client) and those
            are covered in the man pages for <code class=
            "filename">dhcp.conf</code>.
          </p>
          <pre class="root">
<kbd class="command">cat &gt; /etc/dhcpd.conf &lt;&lt; "EOF"
<code class="literal">default-lease-time 72000;
max-lease-time 144000;
ddns-update-style ad-hoc;

subnet <em class=
"replaceable"><code>&lt;192.168.5.0&gt;</code></em> netmask <em class=
"replaceable"><code>&lt;255.255.255.0&gt;</code></em> {
  range <em class=
"replaceable"><code>&lt;192.168.5.10&gt; &lt;192.168.5.240&gt;</code></em>;
  option broadcast-address <em class=
"replaceable"><code>&lt;192.168.5.255&gt;</code></em>;
  option routers <em class=
"replaceable"><code>&lt;192.168.5.1&gt;</code></em>;
}</code>
EOF</kbd>
</pre>
          <p>
            All addresses should be changed to meet your circumstance.
          </p>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">dhcpd, dhcrelay, dhclient,
              dhclient-script, and omshell</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">bdhcpctl.a, libomapi.a</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/var/state/dhcp, /usr/include/omapip, and
              /usr/include/isi-dhcp</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="dhclient" name="dhclient"></a><span class=
                    "term"><span class=
                    "command"><strong>dhclient</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the implementation of the DHCP client.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="dhcpd" name="dhcpd"></a><span class=
                    "term"><span class=
                    "command"><strong>dhcpd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    implements Dynamic Host Configuration Protocol (DHCP) and
                    Internet Bootstrap Protocol (BOOTP) requests for network
                    addresses.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="dhcrelay" name="dhcrelay"></a><span class=
                    "term"><span class=
                    "command"><strong>dhcrelay</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    provides a means to accept DHCP and BOOTP requests on a
                    subnet without a DHCP server and relay them to a DHCP
                    server on another subnet.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="omshell" name="omshell"></a><span class=
                    "term"><span class=
                    "command"><strong>omshell</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    provides an interactive way to connect to, query, and
                    possibly change, the ISC DHCP Server's state via OMAPI,
                    the Object Management API.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2008-05-09 08:00:42 -0500
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="other.html" title=
          "Other Server Software">Prev</a>
          <p>
            Other Server Software
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="leafnode.html" title=
          "Leafnode-1.11.5">Next</a>
          <p>
            Leafnode-1.11.5
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="other.html" title=
          "Chapter&nbsp;22.&nbsp;Other Server Software">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.3">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
