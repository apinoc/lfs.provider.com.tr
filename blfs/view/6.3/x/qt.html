<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Qt-3.3.8b
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-6.3">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch - Version 6.3
      </h4>
      <h3>
        Chapter&nbsp;24.&nbsp;X Libraries
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="lib.html" title="X Libraries">Prev</a>
          <p>
            X Libraries
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="qt4.html" title="Qt-4.3.4">Next</a>
          <p>
            Qt-4.3.4
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="lib.html" title=
          "Chapter&nbsp;24.&nbsp;X Libraries">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.3">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="qt" name="qt"></a>Qt-3.3.8b
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to Qt
        </h2>
        <p>
          The <span class="application">Qt</span> package contains a
          <span class="application">C++</span> GUI library. This is useful
          for creating graphical applications or executing graphical
          applications that are dynamically linked to the <span class=
          "application">Qt</span> library. One of the major users of
          <span class="application">Qt</span> is <span class=
          "application">KDE</span>.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download (HTTP): <a class="ulink" href=
                "http://ftp.silug.org/mirrors/ftp.trolltech.com/qt/source/qt-x11-free-3.3.8b.tar.gz">
                http://ftp.silug.org/mirrors/ftp.trolltech.com/qt/source/qt-x11-free-3.3.8b.tar.gz</a>
              </p>
            </li>
            <li>
              <p>
                Download (FTP): <a class="ulink" href=
                "ftp://ftp.trolltech.com/qt/source/qt-x11-free-3.3.8b.tar.gz">
                ftp://ftp.trolltech.com/qt/source/qt-x11-free-3.3.8b.tar.gz</a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: 9f05b4125cfe477cc52c9742c3c09009
              </p>
            </li>
            <li>
              <p>
                Download size: 16.5 MB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 261 MB
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 11 SBU (full), 7.5 SBU (sub-tools)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Qt Dependencies
        </h3>
        <h4>
          Required
        </h4>
        <p class="required">
          <a class="xref" href="installing.html" title=
          "Chapter&nbsp;23.&nbsp;X Window System Environment">X Window
          System</a>
        </p>
        <h4>
          Recommended
        </h4>
        <p class="recommended">
          <a class="xref" href="../general/libjpeg.html" title=
          "libjpeg-6b">libjpeg-6b</a> and <a class="xref" href=
          "../general/libmng.html" title="libmng-1.0.9">libmng-1.0.9</a>
        </p>
        <p>
          Note: if for whatever reason you do not have the recommended
          libraries installed on your system, you must remove the
          corresponding <em class="parameter"><code>-system-<em class=
          "replaceable"><code>&lt;library&gt;</code></em></code></em> and
          <em class="parameter"><code>-plugin-imgfmt-<em class=
          "replaceable"><code>&lt;library&gt;</code></em></code></em>
          parameters from the <span class=
          "command"><strong>configure</strong></span> commands shown in the
          instructions below.
        </p>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="../multimedia/nas.html" title=
          "NAS-1.9">NAS-1.9</a>, <a class="xref" href="../pst/cups.html"
          title="CUPS-1.2.12">CUPS-1.2.12</a>, <a class="xref" href=
          "../server/mysql.html" title="MySQL-5.0.41">MySQL-5.0.41</a>,
          <a class="xref" href="../server/postgresql.html" title=
          "PostgreSQL-8.2.4">PostgreSQL-8.2.4</a>, <a class="xref" href=
          "../general/unixodbc.html" title=
          "unixODBC-2.2.12">unixODBC-2.2.12</a>, <a class="ulink" href=
          "http://sqlite.org/">SQLite</a> and <a class="ulink" href=
          "http://firebird.sourceforge.net/">Firebird</a>
        </p>
        <p class="usernotes">
          User Notes: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/qt">http://wiki.linuxfromscratch.org/blfs/wiki/qt</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of Qt
        </h2>
        <p>
          This package (unfortunately) expects the <span class=
          "application">X Window</span> system to be installed in the
          <code class="filename">/usr/X11R6</code> directory. If you're using
          a recent version of <span class="application">Xorg</span> and it is
          installed in any other location, ensure you have followed the
          instructions in the <a class="xref" href=
          "x-setup.html#X11R6-compat-symlink" title=
          "Creating an X11R6 Compatibility Symlink">Creating an X11R6
          Compatibility Symlink</a> section.
        </p>
        <p>
          There are several ways to install a complicated package such as
          <span class="application">Qt</span>. The files are not completely
          position independent. Installation procedures execute the program
          <span class="command"><strong>pkg-config</strong></span> to
          determine the location of package executables, libraries, headers,
          and other files. For <span class="application">Qt</span>,
          <span class="command"><strong>pkg-config</strong></span> will look
          for the file <code class="filename">lib/pkgconfig/qt-mt.pc</code>
          which must be modified if relocating the package. This file is set
          up correctly by the build process.
        </p>
        <p>
          The default installation places the files in <code class=
          "filename">/usr/local/qt/</code>. Many commercial distributions
          place the files in the system's <code class="filename">/usr</code>
          hierarchy. The package can also be installed in an arbitrary
          directory.
        </p>
        <p>
          This section will demonstrate two different methods.
        </p>
        <div class="admon warning">
          <img alt="[Warning]" src="../images/warning.png" />
          <h3>
            Warning
          </h3>
          <p>
            Building <span class="application">Qt</span> in a <span class=
            "command"><strong>chroot</strong></span> environment may fail.
          </p>
        </div>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            The build time for <span class="application">Qt</span> is quite
            long. If you want to save some time and don't want the tutorials
            and examples, change the first <span class=
            "command"><strong>make</strong></span> command to:
          </p>
          <pre class="userinput">
<kbd class="command">make sub-tools</kbd>
</pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            Method 1 - Installing in the '/usr' Hierarchy
          </h3>
          <p>
            The advantage of this method is that no updates to the
            <code class="filename">/etc/ld.so.conf</code> or <code class=
            "filename">/etc/man_db.conf</code> files are required. The
            package files are distributed within several subdirectories of
            the <code class="filename">/usr</code> hierarchy. This is the
            method that most commercial distributions use.
          </p>
          <div class="admon note">
            <img alt="[Note]" src="../images/note.png" />
            <h3>
              Note
            </h3>
            <p>
              If <span class="application">Qt</span> is being reinstalled,
              run the following commands from a console or non-Qt based
              window manager. It overwrites <span class=
              "application">Qt</span> libraries that should not be in use
              during the install process.
            </p>
          </div>
          <pre class="userinput">
<kbd class=
"command">sed -i '/QMAKE_RPATH/d' mkspecs/linux*/qmake.conf &amp;&amp;

bash
export PATH=$PWD/bin:$PATH &amp;&amp;
export LD_LIBRARY_PATH=$PWD/lib:$LD_LIBRARY_PATH &amp;&amp;

./configure -prefix /usr \
            -docdir /usr/share/doc/qt \
            -headerdir /usr/include/qt \
            -plugindir /usr/lib/qt/plugins \
            -datadir /usr/share/qt \
            -translationdir /usr/share/qt/translations \
            -sysconfdir /etc/qt \
            -qt-gif \
            -system-zlib \
            -system-libpng \
            -system-libjpeg \
            -system-libmng \
            -plugin-imgfmt-png \
            -plugin-imgfmt-jpeg \
            -plugin-imgfmt-mng \
            -no-exceptions \
            -thread \
            -tablet &amp;&amp;

make &amp;&amp;
exit</kbd>
</pre>
          <p>
            This package does not come with a test suite.
          </p>
          <p>
            Now, as the <code class="systemitem">root</code> user:
          </p>
          <pre class="root">
<kbd class="command">make install &amp;&amp;
ln -v -sf libqt-mt.so /usr/lib/libqt.so &amp;&amp;
ln -v -snf ../../bin /usr/share/qt/bin &amp;&amp;
ln -v -snf ../../include/qt /usr/share/qt/include &amp;&amp;
ln -v -snf ../../lib /usr/share/qt/lib &amp;&amp;
cp -v -r doc/man /usr/share &amp;&amp;
cp -v -r examples /usr/share/doc/qt</kbd>
</pre>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            Method 2 - Installing in '/opt'
          </h3>
          <p>
            This is the method recommended by the <span class=
            "application">Qt</span> developers. It has the advantage of
            keeping all the package files consolidated in a dedicated
            directory hierarchy. By using this method, an update can be made
            without overwriting a previous installation and users can easily
            revert to a previous version by changing one symbolic link.
          </p>
          <p>
            The <span class="application">Qt</span> developers use a default
            location of <code class="filename">/usr/local/qt/</code>, however
            this procedure puts the files in <code class=
            "filename">/opt/qt-3.3.8b/</code> and then creates a symbolic
            link to <code class="filename">/opt/qt/</code>.
          </p>
          <pre class="userinput">
<kbd class="command">bash
export QTDIR=$PWD &amp;&amp;
export LD_LIBRARY_PATH=$PWD/lib:$LD_LIBRARY_PATH &amp;&amp;
export PATH=$PWD/bin:$PATH &amp;&amp;

./configure -prefix /opt/qt-3.3.8b \
            -sysconfdir /etc/qt \
            -qt-gif \
            -system-zlib \
            -system-libpng \
            -system-libjpeg \
            -system-libmng \
            -plugin-imgfmt-png \
            -plugin-imgfmt-jpeg \
            -plugin-imgfmt-mng \
            -no-exceptions \
            -thread \
            -tablet &amp;&amp;

make &amp;&amp;
exit</kbd>
</pre>
          <p>
            This package does not come with a test suite.
          </p>
          <p>
            Now, as the <code class="systemitem">root</code> user:
          </p>
          <pre class="root">
<kbd class="command">make install &amp;&amp;
ln -v -sfn qt-3.3.8b /opt/qt &amp;&amp;
ln -v -s libqt-mt.so /opt/qt/lib/libqt.so &amp;&amp;
cp -v -r doc/man examples /opt/qt/doc</kbd>
</pre>
        </div>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <span class="command"><strong>sed -i '/QMAKE_RPATH/d'
          mkspecs/linux*/qmake.conf</strong></span>: In Method 1,
          <span class="application">Qt</span> is being installed into the
          standard system directories. The runtime library search path does
          not need to be set in this case.
        </p>
        <p>
          <span class="command"><strong>bash</strong></span>: This command
          enters a sub-shell to isolate environment changes.
        </p>
        <p>
          <span class="command"><strong>export QTDIR=$PWD</strong></span>:
          This command defines where the root of the <span class=
          "application">Qt</span> directory is located.
        </p>
        <p>
          <span class="command"><strong>export
          LD_LIBRARY_PATH=$PWD/lib:$LD_LIBRARY_PATH</strong></span>: This
          command allows the not yet installed <span class=
          "application">Qt</span> libraries to be used by the not yet
          installed <span class="application">Qt</span> programs.
        </p>
        <p>
          <span class="command"><strong>export
          PATH=$PWD/bin:$PATH</strong></span>: This command allows the build
          process to find supporting executables.
        </p>
        <p>
          <em class="parameter"><code>-qt-gif</code></em>: This switch adds
          support for <code class="filename">gif</code> files to the
          libraries.
        </p>
        <p>
          <em class="parameter"><code>-system-zlib -system-libpng
          -system-libjpeg -system-mng</code></em>: These switches force the
          build instructions to use the shared libraries that are on your
          system instead of creating a custom set of support libraries for
          these functions.
        </p>
        <p>
          <em class="parameter"><code>-plugin-imgfmt-png -plugin-imgfmt-jpeg
          -plugin-imgfmt-mng</code></em>: These switches enable run-time
          linking of the referenced libraries.
        </p>
        <p>
          If you pass the <code class="option">-plugin-sql-<em class=
          "replaceable"><code>&lt;driver&gt;</code></em></code> or
          <code class="option">-qt-sql-<em class=
          "replaceable"><code>&lt;driver&gt;</code></em></code> switch to the
          <span class="command"><strong>configure</strong></span> command,
          you must also pass <code class="option">-I<em class=
          "replaceable"><code>&lt;/path/to/sql/headers&gt;</code></em></code>
          so <span class="command"><strong>make</strong></span> can find the
          appropriate header files. For instance, building in <span class=
          "application">MySQL</span> support (as opposed to building the
          plugin) will need to use <code class="option">-I/usr/include/mysql
          -qt-sql-mysql</code>.
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            To check if <span class="application">mysql</span> is
            autotetected properly, examine the output of <span class=
            "command"><strong>./configure -I/usr/include/mysql
            -help</strong></span>. Other database support will require
            similar <span class="command"><strong>configure</strong></span>
            parameters.
          </p>
        </div>
        <p>
          <em class="parameter"><code>-no-exceptions</code></em>: This switch
          disables the exceptions coding generated by the <span class=
          "application">C++</span> compiler.
        </p>
        <p>
          <em class="parameter"><code>-thread</code></em>: This switch adds
          support for multi-threading.
        </p>
        <p>
          <span class="command"><strong>ln -v -sf libqt-mt.so
          /usr/lib/libqt.so</strong></span>: This command allows <span class=
          "command"><strong>configure</strong></span> scripts to find a
          working <span class="application">Qt</span> installation.
        </p>
        <p>
          <span class="command"><strong>ln -v -snf ../../bin
          /usr/share/qt/bin</strong></span>: This command and the following
          two allow the <code class="filename">/usr</code> style installation
          to mimic the <code class="filename">/opt</code> style installation
          by making all binaries, headers and libraries available from a
          single directory, <code class="filename">/usr/share/qt</code>.
        </p>
        <p>
          <span class="command"><strong>cp -v -r doc/man examples /usr/share
          (or /opt/qt/doc)</strong></span>: This command installs the man
          pages and examples which are missed by <span class=
          "command"><strong>make install</strong></span>.
        </p>
        <p>
          <span class="command"><strong>exit</strong></span>: This command
          returns to the parent shell and eliminates the environment
          variables set earlier.
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <h2 class="sect2">
          Configuring Qt
        </h2>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            <a id="qt-config" name="qt-config"></a>Configuration Information
          </h3>
          <p>
            The <code class="envar">QTDIR</code> environment variable needs
            to be set when building packages that depend on <span class=
            "application">Qt</span>. Add the following to the <code class=
            "filename">.bash_profile</code> initialization script for each
            user that builds packages using the <span class=
            "application">Qt</span> libraries. Alternatively, the variable
            can be set in the system wide <code class=
            "filename">/etc/profile</code> file.
          </p>
          <p>
            For Method 1 (This is optional, only set this if an application
            is unable to find the installed libraries or headers):
          </p>
          <pre class="screen">
<code class="literal">export QTDIR=/usr/share/qt</code>
</pre>
          <p>
            or for Method 2:
          </p>
          <pre class="screen">
<code class="literal">export QTDIR=/opt/qt</code>
</pre>
          <p>
            If you installed <span class="application">Qt</span> using Method
            2, you also need to update the following configuration files so
            that <span class="application">Qt</span> is correctly found by
            other packages and system processes.
          </p>
          <p>
            Update the <code class="filename">/etc/ld.so.conf</code> and
            <code class="filename">/etc/man_db.conf</code> files:
          </p>
          <pre class="root">
<kbd class="command">cat &gt;&gt; /etc/ld.so.conf &lt;&lt; "EOF" &amp;&amp;
<code class="literal"># Begin qt addition to /etc/ld.so.conf

/opt/qt/lib

# End qt addition</code>
EOF
ldconfig &amp;&amp;
cat &gt;&gt; /etc/man_db.conf &lt;&lt; "EOF"
<code class="literal"># Begin qt addition to man_db.conf

MANDATORY_MANPATH /opt/qt/doc/man

# End qt addition to man_db.conf</code>
EOF</kbd>
</pre>
          <p>
            Update the <code class="envar">PKG_CONFIG_PATH</code> environment
            variable in your <code class="filename">~/.bash_profile</code> or
            <code class="filename">/etc/profile</code> with the following:
          </p>
          <pre class="screen">
<code class=
"literal">PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/opt/qt/lib/pkgconfig</code>
</pre>
          <p>
            If you want the <span class="application">Qt</span> executables
            in your shell search path, update the <code class=
            "envar">PATH</code> environment variable in your <code class=
            "filename">~/.bash_profile</code> or <code class=
            "filename">/etc/profile</code> to include <code class=
            "filename">/opt/qt/bin</code>.
          </p>
          <p>
            As with most libraries, there is no explicit configuration to do.
            After updating <code class="filename">/etc/ld.so.conf</code> as
            explained above, run <span class=
            "command"><strong>/sbin/ldconfig</strong></span> so that
            <span class="command"><strong>ldd</strong></span> can find the
            shared libraries.
          </p>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">assistant, designer, linguist, lrelease,
              lupdate, moc, qm2ts, qmake, qtconfig, and uic</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">libqt-mt.so, libqt.so libqui.so,
              libdesignercore.a, libeditor.a, and
              libqassistantclient.a</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/opt/qt-3.3.8b or /usr/lib/qt,
              /usr/share/qt, /usr/share/doc/qt, /usr/include/qt, and
              /etc/qt</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="assistant" name="assistant"></a><span class=
                    "term"><span class=
                    "command"><strong>assistant</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a tool for presenting on-line documentation.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="designer" name="designer"></a><span class=
                    "term"><span class=
                    "command"><strong>designer</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a full-fledged GUI builder. It includes powerful
                    features such as preview mode, automatic widget layout,
                    support for custom widgets, and an advanced property
                    editor.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="linguist" name="linguist"></a><span class=
                    "term"><span class=
                    "command"><strong>linguist</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    provides support for translating applications into local
                    languages.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="lrelease" name="lrelease"></a><span class=
                    "term"><span class=
                    "command"><strong>lrelease</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a simple command line tool. It reads a Qt project file
                    and produces message files used by the application.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="lupdate" name="lupdate"></a><span class=
                    "term"><span class=
                    "command"><strong>lupdate</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    reads a Qt project file, finds the translatable strings
                    in the specified source, header and Qt Designer interface
                    files, and produces or updates the translation files
                    listed in the project file.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="moc" name="moc"></a><span class=
                    "term"><span class="command"><strong>moc</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    generates Qt meta object support code.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qm2ts" name="qm2ts"></a><span class=
                    "term"><span class=
                    "command"><strong>qm2ts</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a tool for converting Qt message file formats.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qmake" name="qmake"></a><span class=
                    "term"><span class=
                    "command"><strong>qmake</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    qmake uses information stored in project files to
                    determine what should go in the makefiles it generates.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qtconfig" name="qtconfig"></a><span class=
                    "term"><span class=
                    "command"><strong>qtconfig</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used to customize the appearance of Qt applications.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="uic" name="uic"></a><span class=
                    "term"><span class="command"><strong>uic</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a Qt user interface compiler.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2008-05-06 16:29:57 -0500
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="lib.html" title="X Libraries">Prev</a>
          <p>
            X Libraries
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="qt4.html" title="Qt-4.3.4">Next</a>
          <p>
            Qt-4.3.4
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="lib.html" title=
          "Chapter&nbsp;24.&nbsp;X Libraries">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.3">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
