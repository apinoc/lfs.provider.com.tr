<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Linux-PAM-0.99.10.0
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-6.3">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch - Version 6.3
      </h4>
      <h3>
        Chapter&nbsp;4.&nbsp;Security
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="cracklib.html" title=
          "CrackLib-2.8.12">Prev</a>
          <p>
            CrackLib-2.8.12
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="shadow.html" title=
          "Shadow-4.0.18.1">Next</a>
          <p>
            Shadow-4.0.18.1
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapter&nbsp;4.&nbsp;Security">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.3">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="linux-pam" name="linux-pam"></a>Linux-PAM-0.99.10.0
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to Linux-PAM
        </h2>
        <p>
          The <span class="application">Linux-PAM</span> package contains
          Pluggable Authentication Modules. This is useful to enable the
          local system administrator to choose how applications authenticate
          users.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download (HTTP): <a class="ulink" href=
                "http://www.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-0.99.10.0.tar.bz2">
                http://www.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-0.99.10.0.tar.bz2</a>
              </p>
            </li>
            <li>
              <p>
                Download (FTP): <a class="ulink" href=
                "ftp://ftp.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-0.99.10.0.tar.bz2">
                ftp://ftp.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-0.99.10.0.tar.bz2</a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: be4dd1d34ac5933408e13e48f3eb710a
              </p>
            </li>
            <li>
              <p>
                Download size: 911 kB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 23 MB
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 0.6 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Additional Downloads
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Optional documentation: <a class="ulink" href=
                "http://anduin.linuxfromscratch.org/sources/BLFS/6.3/l/Linux-PAM-0.99.10.0-docs.tar.bz2">
                http://anduin.linuxfromscratch.org/sources/BLFS/6.3/l/Linux-PAM-0.99.10.0-docs.tar.bz2</a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Linux-PAM Dependencies
        </h3>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="cracklib.html" title=
          "CrackLib-2.8.12">CrackLib-2.8.12</a>, and <a class="ulink" href=
          "http://www.prelude-ids.org/">Prelude</a>
        </p>
        <h4>
          Optional (To {,Re}build the Documentation)
        </h4>
        <p class="optional">
          <a class="xref" href="../general/libxslt.html" title=
          "libxslt-1.1.22">libxslt-1.1.22</a>, <a class="xref" href=
          "../pst/DocBook.html" title="DocBook XML DTD-4.5">DocBook XML
          DTD-4.5</a>, <a class="xref" href="../pst/docbook-xsl.html" title=
          "DocBook XSL Stylesheets-1.71.1">DocBook XSL
          Stylesheets-1.71.1</a>, <a class="xref" href="../basicnet/w3m.html"
          title="W3m-0.5.2">w3m</a>, and <a class="xref" href=
          "../pst/fop.html" title="FOP-0.93">FOP-0.93</a>
        </p>
        <p class="usernotes">
          User Notes: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/linux-pam">http://wiki.linuxfromscratch.org/blfs/wiki/linux-pam</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of Linux-PAM
        </h2>
        <p>
          If you downloaded the documentation, unpack the tarball from the
          same top-level directory you unpacked the source tarball from. The
          files will unpack into the correct directories of the source tree.
        </p>
        <p>
          Install <span class="application">Linux-PAM</span> by running the
          following commands:
        </p>
        <pre class="userinput">
<kbd class="command">./configure --libdir=/lib \
            --sbindir=/lib/security \
            --enable-securedir=/lib/security \
            --docdir=/usr/share/doc/Linux-PAM-0.99.10.0 \
            --enable-read-both-confs \
            --with-xauth=/usr/X11R6/bin/xauth &amp;&amp;
make</kbd>
</pre>
        <p>
          The test suite will not provide meaningful results until the
          package has been installed and minimally configured. If, after
          installing the package and creating a minimum configuration as
          shown below in the 'other' example, you wish to run the tests,
          issue <span class="command"><strong>make check</strong></span>.
        </p>
        <p>
          Now, as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root">
<kbd class="command">make install &amp;&amp;
chmod -v 4755 /lib/security/unix_chkpwd &amp;&amp;

mv -v /lib/security/pam_tally /sbin &amp;&amp;

mv -v /lib/libpam{,c,_misc}.la /usr/lib &amp;&amp;
sed -i 's| /lib| /usr/lib|' /usr/lib/libpam_misc.la &amp;&amp;

if [ -L /lib/libpam.so ]; then
   for LINK in libpam{,c,_misc}.so; do
       ln -v -sf ../../lib/$(readlink /lib/${LINK}) /usr/lib/${LINK} &amp;&amp;
       rm -v /lib/${LINK}
   done
fi</kbd>
</pre>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <em class="parameter"><code>--libdir=/lib</code></em>: This
          parameter results in the libraries being installed in <code class=
          "filename">/lib</code> as they may be required in single-user mode.
        </p>
        <p>
          <em class="parameter"><code>--sbindir=/lib/security</code></em>:
          This parameter results in two executables, one of which is not
          intended to be run from the command line, being installed in the
          same directory as the PAM modules. The other executable is later
          moved to the <code class="filename">/sbin</code> directory.
        </p>
        <p>
          <em class=
          "parameter"><code>--enable-securedir=/lib/security</code></em>:
          This parameter results in the PAM modules being installed in
          <code class="filename">/lib/security</code>.
        </p>
        <p>
          <em class="parameter"><code>--docdir=...</code></em>: This
          parameter results in the documentation being installed in a
          versioned directory name.
        </p>
        <p>
          <em class="parameter"><code>--enable-read-both-confs</code></em>:
          This parameter allows the local administrator to choose which
          configuration file setup to use.
        </p>
        <p>
          <em class=
          "parameter"><code>--with-xauth=/usr/X11R6/bin/xauth</code></em>:
          This parameter forces the build of the pam_xauth module, even if
          xauth is not yet installed. Omit this switch if you have no plans
          to build <span class="application">Xorg</span>, or modify the path
          if you intend to install <span class="application">Xorg</span> into
          a non-standard path.
        </p>
        <p>
          <span class="command"><strong>chmod -v 4755
          /lib/security/unix_chkpwd</strong></span>: The <span class=
          "command"><strong>unix_chkpwd</strong></span> password-helper
          program must be setuid so that non-<code class=
          "systemitem">root</code> processes can access the shadow-password
          file.
        </p>
        <p>
          <span class="command"><strong>mv -v /lib/security/pam_tally
          /sbin</strong></span>: The <span class=
          "command"><strong>pam_tally</strong></span> program is designed to
          be run by the system administrator, possibly in single-user mode,
          so it is moved to the appropriate directory.
        </p>
        <p>
          <span class="command"><strong>mv -v /lib/libpam{,c,_misc}.la
          /usr/lib</strong></span>: This command moves the <span class=
          "application">Libtool</span> library files to <code class=
          "filename">/usr/lib</code> as they are expected to reside there.
        </p>
        <p>
          <span class="command"><strong>sed -i 's| /lib| /usr/lib|'
          /usr/lib/libpam_misc.la</strong></span>: This command corrects an
          installation reference due to the file being moved in the previous
          step.
        </p>
        <p>
          <span class="command"><strong>for ...; do ...;
          done</strong></span>: These commands are used to relocate the
          <code class="filename">.so</code> symbolic links into the
          <code class="filename">/usr/lib</code> directory by cloning and
          then removing the existing symlinks. Using <span class=
          "command"><strong>readlink</strong></span> ensures the new symlinks
          point at the correct library filenames.
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <h2 class="sect2">
          Configuring Linux-PAM
        </h2>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            <a id="pam-config" name="pam-config"></a>Config Files
          </h3>
          <p>
            <code class="filename">/etc/security/*</code> and <code class=
            "filename">/etc/pam.d/*</code> or <code class=
            "filename">/etc/pam.conf</code>
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            Configuration Information
          </h3>
          <p>
            Configuration information is placed in <code class=
            "filename">/etc/pam.d/</code> or <code class=
            "filename">/etc/pam.conf</code> depending on system administrator
            preference. Below are example files of each type:
          </p>
          <pre class="screen">
<code class="literal"># Begin /etc/pam.d/other

auth            required        pam_unix.so     nullok
account         required        pam_unix.so
session         required        pam_unix.so
password        required        pam_unix.so     nullok

# End /etc/pam.d/other

# Begin /etc/pam.conf

other           auth            required        pam_unix.so     nullok
other           account         required        pam_unix.so
other           session         required        pam_unix.so
other           password        required        pam_unix.so     nullok

# End /etc/pam.conf</code>
</pre>
          <p>
            The <span class="application">PAM</span> man page (<span class=
            "command"><strong>man pam</strong></span>) provides a good
            starting point for descriptions of fields and allowable entries.
            The <a class="ulink" href=
            "http://www.kernel.org/pub/linux/libs/pam/Linux-PAM-html/Linux-PAM_SAG.html">
            Linux-PAM System Administrators' Guide</a> is recommended for
            additional information.
          </p>
          <p>
            Refer to <a class="ulink" href=
            "http://www.kernel.org/pub/linux/libs/pam/modules.html">http://www.kernel.org/pub/linux/libs/pam/modules.html</a>
            for a list of various modules available.
          </p>
          <div class="admon important">
            <img alt="[Important]" src="../images/important.png" />
            <h3>
              Important
            </h3>
            <p>
              You should now reinstall the <a class="xref" href="shadow.html"
              title="Shadow-4.0.18.1">Shadow-4.0.18.1</a> package.
            </p>
          </div>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Program:</strong>
              <span class="segbody">pam_tally</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">libpam.{so,a}, libpamc.{so,a}, and
              libpam_misc.{so,a}</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/etc/pam.d, /etc/security, /lib/security
              and /usr/include/security</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="pam_tally" name="pam_tally"></a><span class=
                    "term"><span class=
                    "command"><strong>pam_tally</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used to view or manipulate the <code class=
                    "filename">faillog</code> file.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libpam" name="libpam"></a><span class=
                    "term"><code class="filename">libpam.{so,a}</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    provides the interfaces between applications and the PAM
                    modules.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2008-05-16 01:37:44 -0500
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="cracklib.html" title=
          "CrackLib-2.8.12">Prev</a>
          <p>
            CrackLib-2.8.12
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="shadow.html" title=
          "Shadow-4.0.18.1">Next</a>
          <p>
            Shadow-4.0.18.1
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapter&nbsp;4.&nbsp;Security">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.3">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
