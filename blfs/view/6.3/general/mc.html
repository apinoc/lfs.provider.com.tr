<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      MC-4.6.1
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-6.3">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch - Version 6.3
      </h4>
      <h3>
        Chapter&nbsp;11.&nbsp;System Utilities
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="cpio.html" title="cpio-2.9">Prev</a>
          <p>
            cpio-2.9
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="sysstat.html" title="Sysstat-7.0.4">Next</a>
          <p>
            Sysstat-7.0.4
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="sysutils.html" title=
          "Chapter&nbsp;11.&nbsp;System Utilities">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.3">Home</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="mc" name="mc"></a>MC-4.6.1
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to MC
        </h2>
        <p>
          <span class="application">MC</span> (Midnight Commander) is a
          text-mode full-screen file manager and visual shell. It provides a
          clear, user-friendly, and somewhat protected interface to a Unix
          system while making many frequent file operations more efficient
          and preserving the full power of the command prompt.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Download (HTTP): <a class="ulink" href=
                "http://www.ibiblio.org/pub/Linux/utils/file/managers/mc/mc-4.6.1.tar.gz">
                http://www.ibiblio.org/pub/Linux/utils/file/managers/mc/mc-4.6.1.tar.gz</a>
              </p>
            </li>
            <li>
              <p>
                Download (FTP): <a class="ulink" href=
                "ftp://ftp.uni-koeln.de/util/shell/mc-4.6.1.tar.gz">ftp://ftp.uni-koeln.de/util/shell/mc-4.6.1.tar.gz</a>
              </p>
            </li>
            <li>
              <p>
                Download MD5 sum: 18b20db6e40480a53bac2870c56fc3c4
              </p>
            </li>
            <li>
              <p>
                Download size: 3.8 MB
              </p>
            </li>
            <li>
              <p>
                Estimated disk space required: 29 MB
              </p>
            </li>
            <li>
              <p>
                Estimated build time: 0.4 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Additional Downloads
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li>
              <p>
                Required patch: <a class="ulink" href=
                "http://www.linuxfromscratch.org/patches/blfs/6.3/mc-4.6.1-bash32-1.patch">
                http://www.linuxfromscratch.org/patches/blfs/6.3/mc-4.6.1-bash32-1.patch</a>
              </p>
            </li>
            <li>
              <p>
                Recommended Patch: <a class="ulink" href=
                "http://www.linuxfromscratch.org/patches/blfs/6.3/mc-4.6.1-debian_fixes-1.patch">
                http://www.linuxfromscratch.org/patches/blfs/6.3/mc-4.6.1-debian_fixes-1.patch</a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Do I Need the Debian Patch?
        </h3>
        <p>
          Midnight Commander without the Debian patch is completely unusable
          in multibyte locales because it assumes that characters and bytes
          are the same thing. The issue manifests itself as massive screen
          content corruption similar to what is depicted in <a class="ulink"
          href=
          "http://anduin.linuxfromscratch.org/files/BLFS/6.3/mc-bad.png">this
          screenshot</a> (taken in the ru_RU.UTF-8 locale). For a general
          discussion of this type of issue, see the <a class="xref" href=
          "../introduction/locale-issues.html#locale-wrong-multibyte-characters"
          title=
          "The Program Breaks Multibyte Characters or Doesn't Count Character Cells Correctly">
          Breaks Multibyte Characters</a> section of the <a class="xref"
          href="../introduction/locale-issues.html" title=
          "Locale Related Issues">Locale Related Issues</a> page. The Debian
          patch mostly fixes this issue, and adds support for recoding remote
          FTP filenames. Debian also fixed 64-bit issues, rare segfaults in
          <span class="command"><strong>mcedit</strong></span>, and improved
          syntax highlighting.
        </p>
        <p>
          If you do not use a multibyte locale and do not need any of the new
          features or fixes, the patch is still supposed to be harmless.
          However, the patch changes the dependencies and build instructions,
          and in the past it caused unacceptable regressions for non-UTF-8
          locale users. Thus, failsafe instructions without the patch are
          left in the book just in case. Due to the size and unofficial
          nature of the patch, please do not report bugs in the patched
          <span class="application">MC</span> to the original <span class=
          "application">MC</span> developers.
        </p>
        <h3>
          MC Dependencies
        </h3>
        <h4>
          Required
        </h4>
        <p class="required">
          <a class="xref" href="Glib.html" title=
          "GLib-1.2.10">GLib-1.2.10</a> (untested with Debian patch) or
          <a class="xref" href="glib2.html" title=
          "GLib-2.12.12">GLib-2.12.12</a>
        </p>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="gpm.html" title="GPM-1.20.1">GPM-1.20.1</a>,
          <a class="xref" href="../x/installing.html" title=
          "Chapter&nbsp;23.&nbsp;X Window System Environment">X Window
          System</a>, <a class="xref" href="../server/samba3.html" title=
          "Samba-3.0.30">Samba-3.0.30</a>, <a class="xref" href="slang.html"
          title="S-Lang-2.1.3">S-Lang-2.1.3</a> (required when building with
          Debian patch), <a class="xref" href="zip.html" title=
          "Zip-2.32">Zip-2.32</a>, <a class="xref" href="unzip.html" title=
          "UnZip-5.52">UnZip-5.52</a>, and <a class="ulink" href=
          "http://ftp.gnome.org/pub/gnome/sources/gnome-libs/1.4/">GNOME
          Libraries-1.4</a>
        </p>
        <p class="usernotes">
          User Notes: <a class="ulink" href=
          "http://wiki.linuxfromscratch.org/blfs/wiki/MC">http://wiki.linuxfromscratch.org/blfs/wiki/MC</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of MC
        </h2>
        <p>
          Fix incompatibility of <span class="application">MC</span>-4.6.1
          with <span class="application">Bash</span>-3.2:
        </p>
        <pre class="userinput">
<kbd class="command">patch -Np1 -i ../mc-4.6.1-bash32-1.patch</kbd>
</pre>
        <p>
          If desired, apply Debian fixes:
        </p>
        <pre class="userinput">
<kbd class="command">patch -Np1 -i ../mc-4.6.1-debian_fixes-1.patch</kbd>
</pre>
        <p>
          Install <span class="application">MC</span> by running the
          following commands:
        </p>
        <pre class="userinput">
<kbd class="command">CPPFLAGS="-DUTF8" ./configure --prefix=/usr \
            --enable-charset &amp;&amp;
make</kbd>
</pre>
        <p>
          <span class="application">MC</span> with Debian patches expects its
          documentation to be stored in UTF-8 encoding on disk, and
          automatically converts it to the locale encoding when displaying on
          the terminal. This is different from the expectations of the
          unpatched <span class="application">MC</span>, so the documentation
          files have to be converted if (and only if) the Debian patch has
          been applied:
        </p>
        <pre class="userinput">
<kbd class=
"command">convert-mans ISO-8859-1 UTF-8 lib/mc.hint{,.es,.it,.nl} &amp;&amp;
convert-mans ISO-8859-2 UTF-8 lib/mc.hint{.cs,.hu,.pl} &amp;&amp;
convert-mans ISO-8859-5 UTF-8 lib/mc.hint.sr &amp;&amp;
convert-mans KOI8-R UTF-8 lib/mc.hint.ru &amp;&amp;
convert-mans KOI8-U UTF-8 lib/mc.hint.uk &amp;&amp;
convert-mans BIG5 UTF-8 lib/mc.hint.zh &amp;&amp;
convert-mans ISO-8859-1 UTF-8 doc/{es,it}/mc.hlp.* &amp;&amp;
convert-mans ISO-8859-2 UTF-8 doc/{hu,pl}/mc.hlp.* &amp;&amp;
convert-mans ISO-8859-5 UTF-8 doc/sr/mc.hlp.sr &amp;&amp;
convert-mans KOI8-R UTF-8 doc/ru/mc.hlp.ru</kbd>
</pre>
        <p>
          This package does not come with a test suite.
        </p>
        <p>
          Now, as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root">
<kbd class="command">make install &amp;&amp;
chmod 1755 /usr/lib/mc/cons.saver</kbd>
</pre>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <em class="parameter"><code>CPPFLAGS="-DUTF8"</code></em>: This
          parameter activates UTF-8 support in the Debian patch and has no
          effect without this patch.
        </p>
        <p>
          <em class="parameter"><code>--enable-charset</code></em>: This
          option adds support to <span class=
          "command"><strong>mcedit</strong></span> for editing files in
          encodings different from the one implied by the current locale.
          This feature works in non-UTF-8 locales only, even with the Debian
          patch.
        </p>
        <p>
          <em class=
          "parameter"><code>--with-screen=(slang|mcslang|ncurses)</code></em>:
          This parameter selects the screen library used by <span class=
          "application">MC</span>. <span class="application">NCurses</span>
          support is currently buggy (MC does not handle mouse events in
          xterm correctly). UTF-8 support in the Debian patch is functional
          only when external <a class="xref" href="slang.html" title=
          "S-Lang-2.1.3">S-Lang-2.1.3</a> is used as a screen library (this
          is the default).
        </p>
        <p>
          <em class="parameter"><code>--with-codepagedir=DIR</code></em>:
          This parameter was useful only with <span class=
          "application">SAMBA</span>-2.x. New versions of <span class=
          "application">SAMBA</span> do not have codepage files.
        </p>
        <p>
          <span class="command"><strong>chmod 1755
          /usr/lib/mc/cons.saver</strong></span>: The <span class=
          "command"><strong>cons.saver</strong></span> program has to be
          installed setuid root, because on LFS regular users have no access
          to <code class="filename">/dev/vcsa*</code> devices. This step is
          optional if <span class="application">MC</span> is going to be
          started from X terminal emulators or <span class=
          "command"><strong>ssh</strong></span> sessions only (thus rendering
          the <span class="command"><strong>cons.saver</strong></span> binary
          completely unneeded).
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <h2 class="sect2">
          Configuring MC
        </h2>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            <a id="mc-config" name="mc-config"></a>Config Files
          </h3>
          <p>
            <code class="filename">~/.mc/*</code>
          </p>
        </div>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            Configuration Information
          </h3>
          <p>
            The <code class="filename">~/.mc</code> directory and its
            contents are created when you start <span class=
            "command"><strong>mc</strong></span> for the first time. Then you
            can edit the main <code class="filename">~/.mc/ini</code>
            configuration file manually or through the <span class=
            "application">MC</span> shell. Consult the mc(1) man page for
            details.
          </p>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">cons.saver, mc, mcedit, mcmfmt, and
              mcview</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">None</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/usr/share/mc and /usr/lib/mc</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0">
            <col align="left" valign="top" />
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="conssaver" name="conssaver"></a><span class=
                    "term"><span class=
                    "command"><strong>cons.saver</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used internally by <span class=
                    "command"><strong>mc</strong></span> for saving and
                    restoring the text behind the panels on Linux text
                    console.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="mc-prog" name="mc-prog"></a><span class=
                    "term"><span class=
                    "command"><strong>mc</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a visual shell.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="mcedit" name="mcedit"></a><span class=
                    "term"><span class=
                    "command"><strong>mcedit</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is an internal file editor.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="mcmfmt" name="mcmfmt"></a><span class=
                    "term"><span class=
                    "command"><strong>mcmfmt</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is used internally by <span class=
                    "command"><strong>mcview</strong></span> when viewing
                    mailbox files.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="mcview" name="mcview"></a><span class=
                    "term"><span class=
                    "command"><strong>mcview</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is an internal file viewer.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on 2007-08-05 17:14:40 -0500
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="cpio.html" title="cpio-2.9">Prev</a>
          <p>
            cpio-2.9
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="sysstat.html" title="Sysstat-7.0.4">Next</a>
          <p>
            Sysstat-7.0.4
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="sysutils.html" title=
          "Chapter&nbsp;11.&nbsp;System Utilities">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch - Version 6.3">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
