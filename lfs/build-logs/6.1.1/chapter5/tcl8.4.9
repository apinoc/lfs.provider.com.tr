gcc -pipe -c -O2  -DTCL_DBGX= -Wall -Wno-implicit-int -fno-strict-aliasing -fPIC -I./../generic -I. -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1         -DTCL_SHLIB_EXT=\".so\" \
-DTCL_BUILDTIME_LIBRARY="\"/tools/build/tcl8.4.9/library\"" \
	-DTCL_TEST ./../unix/tclAppInit.c
rm -f tclTestInit.o
mv tclAppInit.o tclTestInit.o
gcc -pipe -c -O2  -DTCL_DBGX= -Wall -Wno-implicit-int -fno-strict-aliasing -fPIC -I./../generic -I. -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1         -DTCL_SHLIB_EXT=\".so\" ./../generic/tclTest.c
gcc -pipe -c -O2  -DTCL_DBGX= -Wall -Wno-implicit-int -fno-strict-aliasing -fPIC -I./../generic -I. -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1         -DTCL_SHLIB_EXT=\".so\" ./../generic/tclTestObj.c
gcc -pipe -c -O2  -DTCL_DBGX= -Wall -Wno-implicit-int -fno-strict-aliasing -fPIC -I./../generic -I. -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1         -DTCL_SHLIB_EXT=\".so\" ./../generic/tclTestProcBodyObj.c
gcc -pipe -c -O2  -DTCL_DBGX= -Wall -Wno-implicit-int -fno-strict-aliasing -fPIC -I./../generic -I. -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1         -DTCL_SHLIB_EXT=\".so\" ./../generic/tclThreadTest.c
gcc -pipe -c -O2  -DTCL_DBGX= -Wall -Wno-implicit-int -fno-strict-aliasing -fPIC -I./../generic -I. -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1         -DTCL_SHLIB_EXT=\".so\" ./../unix/tclUnixTest.c
cd dltest ; make
make[1]: Entering directory `/lfs/tools/build/tcl8.4.9/unix/dltest'
gcc -pipe -c -O2 -I./../../generic -DTCL_MEM_DEBUG -fPIC -DUSE_TCL_STUBS -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1  ./pkga.c
gcc -pipe -shared -o pkga.so pkga.o -L/tools/build/tcl8.4.9/unix -ltclstub8.4 -ldl  -lieee -lm
gcc -pipe -c -O2 -I./../../generic -DTCL_MEM_DEBUG -fPIC -DUSE_TCL_STUBS -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1  ./pkgb.c
gcc -pipe -shared -o pkgb.so pkgb.o -L/tools/build/tcl8.4.9/unix -ltclstub8.4 -ldl  -lieee -lm
gcc -pipe -c -O2 -I./../../generic -DTCL_MEM_DEBUG -fPIC -DUSE_TCL_STUBS -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1  ./pkgc.c
gcc -pipe -shared -o pkgc.so pkgc.o -L/tools/build/tcl8.4.9/unix -ltclstub8.4 -ldl  -lieee -lm
gcc -pipe -c -O2 -I./../../generic -DTCL_MEM_DEBUG -fPIC -DUSE_TCL_STUBS -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1  ./pkgd.c
gcc -pipe -shared -o pkgd.so pkgd.o -L/tools/build/tcl8.4.9/unix -ltclstub8.4 -ldl  -lieee -lm
gcc -pipe -c -O2 -I./../../generic -DTCL_MEM_DEBUG -fPIC -DUSE_TCL_STUBS -DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long -DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1 -DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1 -DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1 -DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1 -DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1 -DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1 -DHAVE_SYS_IOCTL_H=1  ./pkge.c
gcc -pipe -shared -o pkge.so pkge.o -L/tools/build/tcl8.4.9/unix -ltclstub8.4 -ldl  -lieee -lm
make[1]: Leaving directory `/lfs/tools/build/tcl8.4.9/unix/dltest'
make tcltest-real LIB_RUNTIME_DIR=`pwd`
make[1]: Entering directory `/lfs/tools/build/tcl8.4.9/unix'
gcc -pipe   -Wl,--export-dynamic tclTestInit.o tclTest.o tclTestObj.o tclTestProcBodyObj.o tclThreadTest.o	tclUnixTest.o -L/tools/build/tcl8.4.9/unix -ltcl8.4 -ldl  -lieee -lm \
	-Wl,-rpath,/tools/build/tcl8.4.9/unix -o tcltest
make[1]: Leaving directory `/lfs/tools/build/tcl8.4.9/unix'
LD_LIBRARY_PATH=`pwd`:; export LD_LIBRARY_PATH; \
TCL_LIBRARY="/tools/build/tcl8.4.9/library"; export TCL_LIBRARY; \
./tcltest ./../tests/all.tcl  
Tests running in interp:  /lfs/tools/build/tcl8.4.9/unix/tcltest
Tests located in:  /lfs/tools/build/tcl8.4.9/tests
Tests running in:  /lfs/tools/build/tcl8.4.9/unix
Temporary files stored in /lfs/tools/build/tcl8.4.9/unix
Test files run in separate interpreters
Running tests that match:  *
Skipping test files that match:  l.*.test
Only running test files that match:  *.test
Tests began at Mon Oct 24 00:46:09 UTC 2005
append.test
appendComp.test
assocd.test
async.test
autoMkindex.test
basic.test
binary.test
case.test
clock.test
cmdAH.test
cmdIL.test
cmdInfo.test
cmdMZ.test
compExpr-old.test
compExpr.test
compile.test
concat.test
dcall.test
dstring.test
encoding.test
env.test
error.test
eval.test
event.test
exec.test
execute.test
expr-old.test
expr.test
fCmd.test
fileName.test
fileSystem.test
for-old.test
for.test
foreach.test
format.test
get.test
history.test
http.test

==== http-3.3 http::geturl FAILED
==== Contents of test case:

    set token [http::geturl $url]
    http::data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url"
    invoked from within
"set token [http::geturl $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-3.3 FAILED


==== http-3.4 http::geturl FAILED
==== Contents of test case:

    set token [http::geturl $url]
    http::data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url"
    invoked from within
"set token [http::geturl $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-3.4 FAILED


==== http-3.5 http::geturl FAILED
==== Contents of test case:

    http::config -proxyfilter selfproxy
    set token [http::geturl $url]
    http::config -proxyfilter http::ProxyRequired
    http::data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url"
    invoked from within
"set token [http::geturl $url]"
    ("uplevel" body line 3)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-3.5 FAILED


==== http-3.6 http::geturl FAILED
==== Contents of test case:

    http::config -proxyfilter bogus
    set token [http::geturl $url]
    http::config -proxyfilter http::ProxyRequired
    http::data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url"
    invoked from within
"set token [http::geturl $url]"
    ("uplevel" body line 3)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-3.6 FAILED


==== http-3.7 http::geturl FAILED
==== Contents of test case:

    set token [http::geturl $url -headers {Pragma no-cache}]
    http::data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url -headers {Pragma no-cache}"
    invoked from within
"set token [http::geturl $url -headers {Pragma no-cache}]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-3.7 FAILED


==== http-3.8 http::geturl FAILED
==== Contents of test case:

    set token [http::geturl $url -query Name=Value&Foo=Bar -timeout 2000]
    http::data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url -query Name=Value&Foo=Bar -timeout 2000"
    invoked from within
"set token [http::geturl $url -query Name=Value&Foo=Bar -timeout 2000]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-3.8 FAILED


==== http-3.9 http::geturl FAILED
==== Contents of test case:

    set token [http::geturl $url -validate 1]
    http::code $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url -validate 1"
    invoked from within
"set token [http::geturl $url -validate 1]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-3.9 FAILED


==== http-3.10 http::geturl queryprogress FAILED
==== Contents of test case:

    set query foo=bar
    set sep ""
    set i 0
    # Create about 120K of query data
    while {$i < 14} {
	incr i
	append query $sep$query
	set sep &
    }

    proc postProgress {token x y} {
	global postProgress
	lappend postProgress $y
    }
    set postProgress {}
    set t [http::geturl $posturl -query $query  -queryprogress postProgress -queryblocksize 16384]
    http::wait $t
    list [http::status $t] [string length $query] $postProgress [http::data $t]

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $posturl -query $query  -queryprogress postProgress -queryblocksize 16384"
    invoked from within
"set t [http::geturl $posturl -query $query  -queryprogress postProgress -queryblocksize 16384]"
    ("uplevel" body line 17)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-3.10 FAILED


==== http-3.11 http::geturl querychannel with -command FAILED
==== Contents of test case:

    set query foo=bar
    set sep ""
    set i 0
    # Create about 120K of query data
    while {$i < 14} {
	incr i
	append query $sep$query
	set sep &
    }
    set file [makeFile $query outdata]
    set fp [open $file]

    proc asyncCB {token} {
	global postResult
	lappend postResult [http::data $token]
    }
    set postResult [list ]
    set t [http::geturl $posturl -querychannel $fp]
    http::wait $t
    set testRes [list [http::status $t] [string length $query] [http::data $t]]

    # Now do async
    http::cleanup $t
    close $fp
    set fp [open $file]
    set t [http::geturl $posturl -querychannel $fp -command asyncCB]
    set postResult [list PostStart]
    http::wait $t
    close $fp

    lappend testRes [http::status $t] $postResult
    removeFile outdata
    set testRes

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $posturl -querychannel $fp"
    invoked from within
"set t [http::geturl $posturl -querychannel $fp]"
    ("uplevel" body line 19)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-3.11 FAILED


==== http-3.14 http::geturl http://user:pass@(none):1025/a/b/c FAILED
==== Contents of test case:

    set token [http::geturl $fullurl -validate 1]
    http::code $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $fullurl -validate 1"
    invoked from within
"set token [http::geturl $fullurl -validate 1]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-3.14 FAILED


==== http-4.1 http::Event FAILED
==== Contents of test case:

    set token [http::geturl $url]
    upvar #0 $token data
    array set meta $data(meta)
    expr ($data(totalsize) == $meta(Content-Length))

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url"
    invoked from within
"set token [http::geturl $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.1 FAILED


==== http-4.2 http::Event FAILED
==== Contents of test case:

    set token [http::geturl $url]
    upvar #0 $token data
    array set meta $data(meta)
    string compare $data(type) [string trim $meta(Content-Type)]

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url"
    invoked from within
"set token [http::geturl $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.2 FAILED


==== http-4.3 http::Event FAILED
==== Contents of test case:

    set token [http::geturl $url]
    http::code $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url"
    invoked from within
"set token [http::geturl $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.3 FAILED


==== http-4.4 http::Event FAILED
==== Contents of test case:

    set testfile [makeFile "" testfile]
    set out [open $testfile w]
    set token [http::geturl $url -channel $out]
    close $out
    set in [open $testfile]
    set x [read $in]
    close $in
    removeFile $testfile
    set x

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url -channel $out"
    invoked from within
"set token [http::geturl $url -channel $out]"
    ("uplevel" body line 4)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.4 FAILED


==== http-4.5 http::Event FAILED
==== Contents of test case:

    set testfile [makeFile "" testfile]
    set out [open $testfile w]
    set token [http::geturl $url -channel $out]
    close $out
    upvar #0 $token data
    removeFile $testfile
    expr $data(currentsize) == $data(totalsize)

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url -channel $out"
    invoked from within
"set token [http::geturl $url -channel $out]"
    ("uplevel" body line 4)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.5 FAILED


==== http-4.6 http::Event FAILED
==== Contents of test case:

    set testfile [makeFile "" testfile]
    set out [open $testfile w]
    set token [http::geturl $binurl -channel $out]
    close $out
    set in [open $testfile]
    fconfigure $in -translation binary
    set x [read $in]
    close $in
    removeFile $testfile
    set x

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $binurl -channel $out"
    invoked from within
"set token [http::geturl $binurl -channel $out]"
    ("uplevel" body line 4)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.6 FAILED


==== http-4.7 http::Event FAILED
==== Contents of test case:

    set token [http::geturl $url -progress myProgress]
    set progress

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url -progress myProgress"
    invoked from within
"set token [http::geturl $url -progress myProgress]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.7 FAILED


==== http-4.8 http::Event FAILED
==== Contents of test case:

    set token [http::geturl $url]
    http::status $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url"
    invoked from within
"set token [http::geturl $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.8 FAILED


==== http-4.9 http::Event FAILED
==== Contents of test case:

    set token [http::geturl $url -progress myProgress]
    http::code $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url -progress myProgress"
    invoked from within
"set token [http::geturl $url -progress myProgress]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.9 FAILED


==== http-4.10 http::Event FAILED
==== Contents of test case:

    set token [http::geturl $url -progress myProgress]
    http::size $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url -progress myProgress"
    invoked from within
"set token [http::geturl $url -progress myProgress]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.10 FAILED


==== http-4.11 http::Event FAILED
==== Contents of test case:

    set token [http::geturl $url -timeout 1 -command {#}]
    http::reset $token
    http::status $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url -timeout 1 -command {#}"
    invoked from within
"set token [http::geturl $url -timeout 1 -command {#}]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.11 FAILED


==== http-4.12 http::Event FAILED
==== Contents of test case:

    set token [http::geturl $url/?timeout=10 -command {#}]
    http::reset $token
    http::status $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url/?timeout=10 -command {#}"
    invoked from within
"set token [http::geturl $url/?timeout=10 -command {#}]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.12 FAILED


==== http-4.13 http::Event FAILED
==== Contents of test case:

    set token [http::geturl $url?timeout=30 -timeout 10 -command {#}]
    http::wait $token
    http::status $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url?timeout=30 -timeout 10 -command {#}"
    invoked from within
"set token [http::geturl $url?timeout=30 -timeout 10 -command {#}]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-4.13 FAILED


==== http-6.1 http::ProxyRequired FAILED
==== Contents of test case:

    http::config -proxyhost [info hostname] -proxyport $port
    set token [http::geturl $url]
    http::wait $token
    http::config -proxyhost {} -proxyport {}
    upvar #0 $token data
    set data(body)

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"http::geturl $url"
    invoked from within
"set token [http::geturl $url]"
    ("uplevel" body line 3)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== http-6.1 FAILED

httpold.test

==== httpold-3.3 http_get FAILED
==== Contents of test case:

    set token [http_get $url]
    http_data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url"
    invoked from within
"set token [http_get $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-3.3 FAILED


==== httpold-3.4 http_get FAILED
==== Contents of test case:

    set token [http_get $url]
    http_data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url"
    invoked from within
"set token [http_get $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-3.4 FAILED


==== httpold-3.5 http_get FAILED
==== Contents of test case:

    http_config -proxyfilter selfproxy
    set token [http_get $url]
    http_config -proxyfilter httpProxyRequired
    http_data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $phost $pport"
    (procedure "http_get" line 59)
    invoked from within
"http_get $url"
    invoked from within
"set token [http_get $url]"
    ("uplevel" body line 3)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-3.5 FAILED


==== httpold-3.6 http_get FAILED
==== Contents of test case:

    http_config -proxyfilter bogus
    set token [http_get $url]
    http_config -proxyfilter httpProxyRequired
    http_data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url"
    invoked from within
"set token [http_get $url]"
    ("uplevel" body line 3)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-3.6 FAILED


==== httpold-3.7 http_get FAILED
==== Contents of test case:

    set token [http_get $url -headers {Pragma no-cache}]
    http_data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url -headers {Pragma no-cache}"
    invoked from within
"set token [http_get $url -headers {Pragma no-cache}]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-3.7 FAILED


==== httpold-3.8 http_get FAILED
==== Contents of test case:

    set token [http_get $url -query Name=Value&Foo=Bar]
    http_data $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url -query Name=Value&Foo=Bar"
    invoked from within
"set token [http_get $url -query Name=Value&Foo=Bar]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-3.8 FAILED


==== httpold-3.9 http_get FAILED
==== Contents of test case:

    set token [http_get $url -validate 1]
    http_code $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url -validate 1"
    invoked from within
"set token [http_get $url -validate 1]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-3.9 FAILED


==== httpold-4.1 httpEvent FAILED
==== Contents of test case:

    set token [http_get $url]
    upvar #0 $token data
    array set meta $data(meta)
    expr ($data(totalsize) == $meta(Content-Length))

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url"
    invoked from within
"set token [http_get $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.1 FAILED


==== httpold-4.2 httpEvent FAILED
==== Contents of test case:

    set token [http_get $url]
    upvar #0 $token data
    array set meta $data(meta)
    string compare $data(type) [string trim $meta(Content-Type)]

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url"
    invoked from within
"set token [http_get $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.2 FAILED


==== httpold-4.3 httpEvent FAILED
==== Contents of test case:

    set token [http_get $url]
    http_code $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url"
    invoked from within
"set token [http_get $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.3 FAILED


==== httpold-4.4 httpEvent FAILED
==== Contents of test case:

    set testfile [makeFile "" testfile]
    set out [open $testfile w]
    set token [http_get $url -channel $out]
    close $out
    set in [open $testfile]
    set x [read $in]
    close $in
    removeFile $testfile
    set x

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url -channel $out"
    invoked from within
"set token [http_get $url -channel $out]"
    ("uplevel" body line 4)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.4 FAILED


==== httpold-4.5 httpEvent FAILED
==== Contents of test case:

    set testfile [makeFile "" testfile]
    set out [open $testfile w]
    set token [http_get $url -channel $out]
    close $out
    upvar #0 $token data
    removeFile $testfile
    expr $data(currentsize) == $data(totalsize)

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url -channel $out"
    invoked from within
"set token [http_get $url -channel $out]"
    ("uplevel" body line 4)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.5 FAILED


==== httpold-4.6 httpEvent FAILED
==== Contents of test case:

    set testfile [makeFile "" testfile]
    set out [open $testfile w]
    set token [http_get $binurl -channel $out]
    close $out
    set in [open $testfile]
    fconfigure $in -translation binary
    set x [read $in]
    close $in
    removeFile $testfile
    set x

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $binurl -channel $out"
    invoked from within
"set token [http_get $binurl -channel $out]"
    ("uplevel" body line 4)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.6 FAILED


==== httpold-4.7 httpEvent FAILED
==== Contents of test case:

    set token [http_get $url -progress myProgress]
    set progress

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url -progress myProgress"
    invoked from within
"set token [http_get $url -progress myProgress]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.7 FAILED


==== httpold-4.8 httpEvent FAILED
==== Contents of test case:

    set token [http_get $url]
    http_status $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url"
    invoked from within
"set token [http_get $url]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.8 FAILED


==== httpold-4.9 httpEvent FAILED
==== Contents of test case:

    set token [http_get $url -progress myProgress]
    http_code $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url -progress myProgress"
    invoked from within
"set token [http_get $url -progress myProgress]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.9 FAILED


==== httpold-4.10 httpEvent FAILED
==== Contents of test case:

    set token [http_get $url -progress myProgress]
    http_size $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url -progress myProgress"
    invoked from within
"set token [http_get $url -progress myProgress]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.10 FAILED


==== httpold-4.11 httpEvent FAILED
==== Contents of test case:

    set token [http_get $url -timeout 1 -command {#}]
    http_reset $token
    http_status $token

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url -timeout 1 -command {#}"
    invoked from within
"set token [http_get $url -timeout 1 -command {#}]"
    ("uplevel" body line 2)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.11 FAILED


==== httpold-4.12 httpEvent FAILED
==== Contents of test case:

    update
    set x {}
    after 500 {lappend x ok}
    set token [http_get $url -timeout 1 -command {lappend x fail}]
    vwait x
    list [http_status $token] $x

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url -timeout 1 -command {lappend x fail}"
    invoked from within
"set token [http_get $url -timeout 1 -command {lappend x fail}]"
    ("uplevel" body line 5)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-4.12 FAILED


==== httpold-6.1 httpProxyRequired FAILED
==== Contents of test case:

    update
    http_config -proxyhost [info hostname] -proxyport $port
    set token [http_get $url]
    http_wait $token
    http_config -proxyhost {} -proxyport {}
    upvar #0 $token data
    set data(body)

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket $host $port"
    (procedure "http_get" line 61)
    invoked from within
"http_get $url"
    invoked from within
"set token [http_get $url]"
    ("uplevel" body line 4)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== httpold-6.1 FAILED

if-old.test
if.test
incr-old.test
incr.test
indexObj.test
info.test
init.test
:	Total	24	Passed	24	Skipped	0	Failed	0
interp.test
io.test

==== io-29.34 Tcl_Close, async flush on close, using sockets FAILED
==== Contents of test case:

    variable c 0
    variable x running
    set l abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz
    proc writelots {s l} {
	for {set i 0} {$i < 2000} {incr i} {
	    puts $s $l
	}
    }
    proc accept {s a p} {
	variable x
	fileevent $s readable [namespace code [list readit $s]]
	fconfigure $s -blocking off
	set x accepted
    }
    proc readit {s} {
	variable c
	variable x
	set l [gets $s]
	
	if {[eof $s]} {
	    close $s
	    set x done
	} elseif {([string length $l] > 0) || ![fblocked $s]} {
	    incr c
	}
    }
    set ss [socket -server [namespace code accept] 0]
    set cs [socket [info hostname] [lindex [fconfigure $ss -sockname] 2]]
    vwait [namespace which -variable x]
    fconfigure $cs -blocking off
    writelots $cs $l
    close $cs
    close $ss
    vwait [namespace which -variable x]
    set c

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket [info hostname] [lindex [fconfigure $ss -sockname] 2]"
    invoked from within
"set cs [socket [info hostname] [lindex [fconfigure $ss -sockname] 2]]"
    ("uplevel" body line 29)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== io-29.34 FAILED


==== io-29.35 Tcl_Close vs fileevent vs multiple interpreters FAILED
==== Contents of test case:

    # On Mac, this test screws up sockets such that subsequent tests using port 2828 
    # either cause errors or panic().
     
    catch {interp delete x}
    catch {interp delete y}
    interp create x
    interp create y
    set s [socket -server [namespace code accept] 0]
    proc accept {s a p} {
	puts $s hello
	close $s
    }
    set c [socket [info hostname] [lindex [fconfigure $s -sockname] 2]]
    interp share {} $c x
    interp share {} $c y
    close $c
    x eval {
	proc readit {s} {
	    gets $s
	    if {[eof $s]} {
		close $s
	    }
	}
    }
    y eval {
	proc readit {s} {
	    gets $s
	    if {[eof $s]} {
		close $s
	    }
	}
    }
    x eval "fileevent $c readable \{readit $c\}"
    y eval "fileevent $c readable \{readit $c\}"
    y eval [list close $c]
    update
    close $s
    interp delete x
    interp delete y

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket [info hostname] [lindex [fconfigure $s -sockname] 2]"
    invoked from within
"set c [socket [info hostname] [lindex [fconfigure $s -sockname] 2]]"
    ("uplevel" body line 14)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== io-29.35 FAILED


==== io-51.1 Test old socket deletion on Macintosh FAILED
==== Contents of test case:

    set x 0
    set result ""
    proc accept {s a p} {
	variable x
	variable wait
	fconfigure $s -blocking off
	puts $s "sock[incr x]"
	close $s
	set wait done
    }
    set ss [socket -server [namespace code accept] 0]
    variable wait ""
    set cs [socket [info hostname] [lindex [fconfigure $ss -sockname] 2]]
    vwait [namespace which -variable wait]
    lappend result [gets $cs]
    close $cs

    set wait ""
    set cs [socket [info hostname] [lindex [fconfigure $ss -sockname] 2]]
    vwait [namespace which -variable wait]
    lappend result [gets $cs]
    close $cs

    set wait ""
    set cs [socket [info hostname] [lindex [fconfigure $ss -sockname] 2]]
    vwait [namespace which -variable wait]
    lappend result [gets $cs]
    close $cs

    set wait ""
    set cs [socket [info hostname] [lindex [fconfigure $ss -sockname] 2]]
    vwait [namespace which -variable wait]
    lappend result [gets $cs]
    close $cs
    close $ss
    set result

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket [info hostname] [lindex [fconfigure $ss -sockname] 2]"
    invoked from within
"set cs [socket [info hostname] [lindex [fconfigure $ss -sockname] 2]]"
    ("uplevel" body line 14)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== io-51.1 FAILED


==== io-54.1 Recursive channel events FAILED
==== Contents of test case:

    # This test checks to see if file events are delivered during recursive
    # event loops when there is buffered data on the channel.

    proc accept {s a p} {
	variable as
	fconfigure $s -translation lf
	puts $s "line 1\nline2\nline3"
	flush $s
	set as $s
    }
    proc readit {s next} {
	variable x
	variable result
	lappend result $next
	if {$next == 1} {
	    fileevent $s readable [namespace code [list readit $s 2]]
	    vwait [namespace which -variable x]
	}
	incr x
    }
    set ss [socket -server [namespace code accept] 0]

    # We need to delay on some systems until the creation of the
    # server socket completes.

    set done 0
    for {set i 0} {$i < 10} {incr i} {
	if {![catch {set cs [socket [info hostname] [lindex [fconfigure $ss -sockname] 2]]}]} {
	    set done 1
	    break
	}
	after 100
    }
    if {$done == 0} {
	close $ss
	error "failed to connect to server"
    }
    variable result {}
    variable x 0
    variable as
    vwait [namespace which -variable as]
    fconfigure $cs -translation lf
    lappend result [gets $cs]
    fconfigure $cs -blocking off
    fileevent $cs readable [namespace code [list readit $cs 1]]
    set a [after 2000 [namespace code { set x failure }]]
    vwait [namespace which -variable x]
    after cancel $a
    close $as
    close $ss
    close $cs
    list $result $x

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: failed to connect to server
    while executing
"error "failed to connect to server""
    invoked from within
"if {$done == 0} {
	close $ss
	error "failed to connect to server"
    }"
    ("uplevel" body line 35)
    invoked from within
"uplevel 1 $script"
---- errorCode: NONE
==== io-54.1 FAILED

ioCmd.test
ioUtil.test
iogt.test
join.test
lindex.test
link.test
linsert.test
list.test
listObj.test
llength.test
load.test
lrange.test
lreplace.test
lsearch.test
lset.test
lsetComp.test
macFCmd.test
main.test
misc.test
msgcat.test
namespace-old.test
namespace.test
notify.test
obj.test
opt.test
osa.test
package.test
parse.test
parseExpr.test
parseOld.test
pid.test
pkg.test
pkgMkIndex.test
platform.test
proc-old.test
proc.test
pwd.test
reg.test
regexp.test
regexpComp.test
registry.test
rename.test
resource.test
result.test
safe.test
scan.test
security.test
set-old.test
set.test
socket.test

==== socket-2.10 close on accept, accepted socket lives FAILED
==== Contents of test case:

    set done 0
    set timer [after 20000 "set done timed_out"]
    set ss [socket -server accept 0]
    proc accept {s a p} {
	global ss
	close $ss
	fileevent $s readable "readit $s"
	fconfigure $s -trans lf
    }
    proc readit {s} {
	global done
	gets $s
	close $s
	set done 1
    }
    set cs [socket [info hostname] [lindex [fconfigure $ss -sockname] 2]]
    puts $cs hello
    close $cs
    vwait done
    after cancel $timer
    set done

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket [info hostname] [lindex [fconfigure $ss -sockname] 2]"
    invoked from within
"set cs [socket [info hostname] [lindex [fconfigure $ss -sockname] 2]]"
    ("uplevel" body line 17)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== socket-2.10 FAILED


==== socket-7.4 testing socket specific options FAILED
==== Contents of test case:

    set s [socket -server accept 0]
    proc accept {s a p} {
	global x
	set x [fconfigure $s -sockname]
	close $s
    }
    set listen [lindex [fconfigure $s -sockname] 2]
    set s1 [socket [info hostname] $listen]
    set timer [after 10000 "set x timed_out"]
    vwait x
    after cancel $timer
    close $s
    close $s1
    set l ""
    lappend l [expr {[lindex $x 2] == $listen}] [llength $x]

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket [info hostname] $listen"
    invoked from within
"set s1 [socket [info hostname] $listen]"
    ("uplevel" body line 9)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== socket-7.4 FAILED


==== socket-8.1 testing -async flag on sockets FAILED
==== Contents of test case:

    # NOTE: This test may fail on some Solaris 2.4 systems. If it does,
    # check that you have these patches installed (using showrev -p):
    #
    # 101907-05, 101925-02, 101945-14, 101959-03, 101969-05, 101973-03,
    # 101977-03, 101981-02, 101985-01, 102001-03, 102003-01, 102007-01,
    # 102011-02, 102024-01, 102039-01, 102044-01, 102048-01, 102062-03,
    # 102066-04, 102070-01, 102105-01, 102153-03, 102216-01, 102232-01,
    # 101878-03, 101879-01, 101880-03, 101933-01, 101950-01, 102030-01,
    # 102057-08, 102140-01, 101920-02, 101921-09, 101922-07, 101923-03
    #
    # If after installing these patches you are still experiencing a
    # problem, please email jyl@eng.sun.com. We have not observed this
    # failure on Solaris 2.5, so another option (instead of installing
    # these patches) is to upgrade to Solaris 2.5.
    set s [socket -server accept 0]
    proc accept {s a p} {
	global x
	puts $s bye
	close $s
	set x done
    }
    set s1 [socket -async [info hostname] [lindex [fconfigure $s -sockname] 2]]
    vwait x
    set z [gets $s1]
    close $s
    close $s1
    set z

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket -async [info hostname] [lindex [fconfigure $s -sockname] 2]"
    invoked from within
"set s1 [socket -async [info hostname] [lindex [fconfigure $s -sockname] 2]]"
    ("uplevel" body line 23)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== socket-8.1 FAILED


==== socket-9.1 testing spurious events FAILED
==== Contents of test case:

    set len 0
    set spurious 0
    set done 0
    proc readlittle {s} {
	global spurious done len
	set l [read $s 1]
	if {[string length $l] == 0} {
	    if {![eof $s]} {
		incr spurious
	    } else {
		close $s
		set done 1
	    }
	} else {
	    incr len [string length $l]
	}
    }
    proc accept {s a p} {
	fconfigure $s -buffering none -blocking off
	fileevent $s readable [list readlittle $s]
    }
    set s [socket -server accept 0]
    set c [socket [info hostname] [lindex [fconfigure $s -sockname] 2]]
    puts -nonewline $c 01234567890123456789012345678901234567890123456789
    close $c
    set timer [after 10000 "set done timed_out"]
    vwait done
    after cancel $timer
    close $s
    list $spurious $len

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket [info hostname] [lindex [fconfigure $s -sockname] 2]"
    invoked from within
"set c [socket [info hostname] [lindex [fconfigure $s -sockname] 2]]"
    ("uplevel" body line 24)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== socket-9.1 FAILED


==== socket-9.2 testing async write, fileevents, flush on close FAILED
==== Contents of test case:

    set firstblock ""
    for {set i 0} {$i < 5} {incr i} {set firstblock "a$firstblock$firstblock"}
    set secondblock ""
    for {set i 0} {$i < 16} {incr i} {
	set secondblock "b$secondblock$secondblock"
    }
    set l [socket -server accept 0]
    proc accept {s a p} {
	fconfigure $s -blocking 0 -translation lf -buffersize 16384  -buffering line
	fileevent $s readable "readable $s"
    }
    proc readable {s} {
	set l [gets $s]
	fileevent $s readable {}
	after 1000 respond $s
    }
    proc respond {s} {
	global firstblock
	puts -nonewline $s $firstblock
	after 1000 writedata $s
    }
    proc writedata {s} {
	global secondblock
	puts -nonewline $s $secondblock
	close $s
    }
    set s [socket [info hostname] [lindex [fconfigure $l -sockname] 2]]
    fconfigure $s -blocking 0 -trans lf -buffering line
    set count 0
    puts $s hello
    proc readit {s} {
	global count done
	set l [read $s]
	incr count [string length $l]
	if {[eof $s]} {
	    close $s
	    set done 1
	}
    }
    fileevent $s readable "readit $s"
    set timer [after 10000 "set done timed_out"]
    vwait done
    after cancel $timer
    close $l
    set count

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket [info hostname] [lindex [fconfigure $l -sockname] 2]"
    invoked from within
"set s [socket [info hostname] [lindex [fconfigure $l -sockname] 2]]"
    ("uplevel" body line 28)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== socket-9.2 FAILED


==== socket-9.3 testing EOF stickyness FAILED
==== Contents of test case:

    proc count_to_eof {s} {
	global count done timer
	set l [gets $s]
	if {[eof $s]} {
	    incr count
	    if {$count > 9} {
		close $s
		set done true
		set count {eof is sticky}
		after cancel $timer
	    }
	}
    }
    proc timerproc {} {
	global done count c
	set done true
	set count {timer went off, eof is not sticky}
	close $c
    }	
    set count 0
    set done false
    proc write_then_close {s} {
	puts $s bye
	close $s
    }
    proc accept {s a p} {
	fconfigure $s -buffering line -translation lf
	fileevent $s writable "write_then_close $s"
    }
    set s [socket -server accept 0]
    set c [socket [info hostname] [lindex [fconfigure $s -sockname] 2]]
    fconfigure $c -blocking off -buffering line -translation lf
    fileevent $c readable "count_to_eof $c"
    set timer [after 1000 timerproc]
    vwait done
    close $s
    set count

---- Test generated error; Return code was: 1
---- Return code should have been one of: 0 2
---- errorInfo: couldn't open socket: host is unreachable
    while executing
"socket [info hostname] [lindex [fconfigure $s -sockname] 2]"
    invoked from within
"set c [socket [info hostname] [lindex [fconfigure $s -sockname] 2]]"
    ("uplevel" body line 32)
    invoked from within
"uplevel 1 $script"
---- errorCode: POSIX EHOSTUNREACH {host is unreachable}
==== socket-9.3 FAILED

source.test
split.test
stack.test
string.test
stringComp.test
stringObj.test
subst.test
switch.test
tcltest.test
thread.test
timer.test
trace.test
unixFCmd.test
unixFile.test
unixInit.test
unixNotfy.test
unknown.test
uplevel.test
upvar.test
utf.test
util.test
var.test
while-old.test
while.test
winConsole.test
winDde.test
winFCmd.test
winFile.test
winNotify.test
winPipe.test
winTime.test

Tests ended at Mon Oct 24 00:47:57 UTC 2005
all.tcl:	Total	10740	Passed	9798	Skipped	888	Failed	54
Sourced 129 Test Files.
Files with failing tests: http.test httpold.test io.test socket.test
Number of tests skipped for each constraint:
	4	dontCopyLinks
	47	emptyTest
	2	hasIsoLocale
	21	knownBug
	1	largefileSupport
	25	localeRegexp
	126	macOnly
	1	macOrWin
	2	memDebug
	1	needPST
	145	nonPortable
	412	pcOnly
	1	testWinCPUID
	30	testthread
	1	testwinclock
	21	testwordend
	1	umask2
	3	unknownFailure
	22	wideIntegerUnparsed
	2	win
	15	winOnly
	5	xdev
